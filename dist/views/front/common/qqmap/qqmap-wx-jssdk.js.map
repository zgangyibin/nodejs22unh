{"version":3,"sources":["../../../../../src/views/front/common/qqmap/qqmap-wx-jssdk.js"],"names":["ERROR_CONF","KEY_ERR","KEY_ERR_MSG","PARAM_ERR","PARAM_ERR_MSG","SYSTEM_ERR","SYSTEM_ERR_MSG","WX_ERR_CODE","WX_OK_CODE","BASE_URL","URL_SEARCH","URL_SUGGESTION","URL_GET_GEOCODER","URL_CITY_LIST","URL_AREA_LIST","URL_DISTANCE","URL_DIRECTION","MODE","driving","transit","EARTH_RADIUS","Utils","safeAdd","x","y","lsw","msw","bitRotateLeft","num","cnt","md5cmn","q","a","b","s","t","md5ff","c","d","md5gg","md5hh","md5ii","binlMD5","len","i","olda","oldb","oldc","oldd","length","binl2rstr","input","output","length32","String","fromCharCode","rstr2binl","undefined","length8","charCodeAt","rstrMD5","rstrHMACMD5","key","data","bkey","ipad","opad","hash","concat","rstr2hex","hexTab","charAt","str2rstrUTF8","unescape","encodeURIComponent","rawMD5","hexMD5","rawHMACMD5","k","hexHMACMD5","md5","string","raw","getSig","requestParam","sk","feature","mode","sig","requestArr","Object","keys","sort","forEach","push","join","location2query","query","location","lat","lng","latitude","longitude","rad","Math","PI","getEndLocation","to","split","endLocation","parseFloat","getDistance","latFrom","lngFrom","latTo","lngTo","radLatFrom","radLatTo","distance","asin","sqrt","pow","sin","cos","round","toFixed","getWXLocation","success","fail","complete","wx","getLocation","type","getLocationParam","locationArr","polyfillParam","param","checkParamKeyEmpty","errconf","buildErrorConfig","checkKeyword","checkLocation","errCode","errMsg","status","message","handleData","searchResult","searchSimplify","id","title","address","category","tel","adcode","ad_info","city","district","province","suggestResult","suggestSimplify","reverseGeocoderResult","result","reverseGeocoderSimplify","address_component","nation","street","street_number","recommend","formatted_addresses","rough","pois","poisSimplify","geocoderResult","geocoderSimplify","address_components","level","provinceResult","cityResult","districtResult","districtByCity","calculateDistanceResult","elements","direction","routes","buildWxRequestConfig","options","that","header","method","res","statusCode","locationProcess","locationsuccess","locationfail","locationcomplete","QQMapWX","Error","keyword","orderby","page_size","page_index","address_format","filter","auto_extend","region","rectangle","boundary","request","url","region_fix","policy","get_subpois","coord_type","get_poi","poi_options","from","locationTo","duration","calculateResult","distanceResult","SET_URL_DIRECTION","from_poi","heading","speed","accuracy","road_type","to_poi","from_track","waypoints","plate_number","departure_time","module","exports"],"mappings":"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","file":"qqmap-wx-jssdk.js","sourcesContent":["/**\r\n * 微信小程序JavaScriptSDK\r\n * \r\n * @version 1.2\r\n * @date 2019-03-06\r\n * @author v_ylyue@tencent.com\r\n */\r\n\r\nvar ERROR_CONF = {\r\n    KEY_ERR: 311,\r\n    KEY_ERR_MSG: 'key格式错误',\r\n    PARAM_ERR: 310,\r\n    PARAM_ERR_MSG: '请求参数信息有误',\r\n    SYSTEM_ERR: 600,\r\n    SYSTEM_ERR_MSG: '系统错误',\r\n    WX_ERR_CODE: 1000,\r\n    WX_OK_CODE: 200\r\n};\r\nvar BASE_URL = 'https://apis.map.qq.com/ws/';\r\nvar URL_SEARCH = BASE_URL + 'place/v1/search';\r\nvar URL_SUGGESTION = BASE_URL + 'place/v1/suggestion';\r\nvar URL_GET_GEOCODER = BASE_URL + 'geocoder/v1/';\r\nvar URL_CITY_LIST = BASE_URL + 'district/v1/list';\r\nvar URL_AREA_LIST = BASE_URL + 'district/v1/getchildren';\r\nvar URL_DISTANCE = BASE_URL + 'distance/v1/';\r\nvar URL_DIRECTION = BASE_URL + 'direction/v1/';\r\nvar MODE = {\r\n  driving: 'driving',\r\n  transit: 'transit'\r\n};\r\nvar EARTH_RADIUS = 6378136.49;\r\nvar Utils = {\r\n  /**\r\n  * md5加密方法\r\n  * 版权所有©2011 Sebastian Tschan，https：//blueimp.net\r\n  */\r\n  safeAdd(x, y) {\r\n    var lsw = (x & 0xffff) + (y & 0xffff);\r\n    var msw = (x >> 16) + (y >> 16) + (lsw >> 16);\r\n    return (msw << 16) | (lsw & 0xffff);\r\n  },\r\n  bitRotateLeft(num, cnt) {\r\n    return (num << cnt) | (num >>> (32 - cnt));\r\n  },\r\n  md5cmn(q, a, b, x, s, t) {\r\n    return this.safeAdd(this.bitRotateLeft(this.safeAdd(this.safeAdd(a, q), this.safeAdd(x, t)), s), b);\r\n  },\r\n  md5ff(a, b, c, d, x, s, t) {\r\n    return this.md5cmn((b & c) | (~b & d), a, b, x, s, t);\r\n  },\r\n  md5gg(a, b, c, d, x, s, t) {\r\n    return this.md5cmn((b & d) | (c & ~d), a, b, x, s, t);\r\n  },\r\n  md5hh(a, b, c, d, x, s, t) {\r\n    return this.md5cmn(b ^ c ^ d, a, b, x, s, t);\r\n  },\r\n  md5ii(a, b, c, d, x, s, t) {\r\n    return this.md5cmn(c ^ (b | ~d), a, b, x, s, t);\r\n  },\r\n  binlMD5(x, len) {\r\n    /* append padding */\r\n    x[len >> 5] |= 0x80 << (len % 32);\r\n    x[((len + 64) >>> 9 << 4) + 14] = len;\r\n\r\n    var i;\r\n    var olda;\r\n    var oldb;\r\n    var oldc;\r\n    var oldd;\r\n    var a = 1732584193;\r\n    var b = -271733879;\r\n    var c = -1732584194;\r\n    var d = 271733878;\r\n\r\n    for (i = 0; i < x.length; i += 16) {\r\n      olda = a;\r\n      oldb = b;\r\n      oldc = c;\r\n      oldd = d;\r\n\r\n      a = this.md5ff(a, b, c, d, x[i], 7, -680876936);\r\n      d = this.md5ff(d, a, b, c, x[i + 1], 12, -389564586);\r\n      c = this.md5ff(c, d, a, b, x[i + 2], 17, 606105819);\r\n      b = this.md5ff(b, c, d, a, x[i + 3], 22, -1044525330);\r\n      a = this.md5ff(a, b, c, d, x[i + 4], 7, -176418897);\r\n      d = this.md5ff(d, a, b, c, x[i + 5], 12, 1200080426);\r\n      c = this.md5ff(c, d, a, b, x[i + 6], 17, -1473231341);\r\n      b = this.md5ff(b, c, d, a, x[i + 7], 22, -45705983);\r\n      a = this.md5ff(a, b, c, d, x[i + 8], 7, 1770035416);\r\n      d = this.md5ff(d, a, b, c, x[i + 9], 12, -1958414417);\r\n      c = this.md5ff(c, d, a, b, x[i + 10], 17, -42063);\r\n      b = this.md5ff(b, c, d, a, x[i + 11], 22, -1990404162);\r\n      a = this.md5ff(a, b, c, d, x[i + 12], 7, 1804603682);\r\n      d = this.md5ff(d, a, b, c, x[i + 13], 12, -40341101);\r\n      c = this.md5ff(c, d, a, b, x[i + 14], 17, -1502002290);\r\n      b = this.md5ff(b, c, d, a, x[i + 15], 22, 1236535329);\r\n\r\n      a = this.md5gg(a, b, c, d, x[i + 1], 5, -165796510);\r\n      d = this.md5gg(d, a, b, c, x[i + 6], 9, -1069501632);\r\n      c = this.md5gg(c, d, a, b, x[i + 11], 14, 643717713);\r\n      b = this.md5gg(b, c, d, a, x[i], 20, -373897302);\r\n      a = this.md5gg(a, b, c, d, x[i + 5], 5, -701558691);\r\n      d = this.md5gg(d, a, b, c, x[i + 10], 9, 38016083);\r\n      c = this.md5gg(c, d, a, b, x[i + 15], 14, -660478335);\r\n      b = this.md5gg(b, c, d, a, x[i + 4], 20, -405537848);\r\n      a = this.md5gg(a, b, c, d, x[i + 9], 5, 568446438);\r\n      d = this.md5gg(d, a, b, c, x[i + 14], 9, -1019803690);\r\n      c = this.md5gg(c, d, a, b, x[i + 3], 14, -187363961);\r\n      b = this.md5gg(b, c, d, a, x[i + 8], 20, 1163531501);\r\n      a = this.md5gg(a, b, c, d, x[i + 13], 5, -1444681467);\r\n      d = this.md5gg(d, a, b, c, x[i + 2], 9, -51403784);\r\n      c = this.md5gg(c, d, a, b, x[i + 7], 14, 1735328473);\r\n      b = this.md5gg(b, c, d, a, x[i + 12], 20, -1926607734);\r\n\r\n      a = this.md5hh(a, b, c, d, x[i + 5], 4, -378558);\r\n      d = this.md5hh(d, a, b, c, x[i + 8], 11, -2022574463);\r\n      c = this.md5hh(c, d, a, b, x[i + 11], 16, 1839030562);\r\n      b = this.md5hh(b, c, d, a, x[i + 14], 23, -35309556);\r\n      a = this.md5hh(a, b, c, d, x[i + 1], 4, -1530992060);\r\n      d = this.md5hh(d, a, b, c, x[i + 4], 11, 1272893353);\r\n      c = this.md5hh(c, d, a, b, x[i + 7], 16, -155497632);\r\n      b = this.md5hh(b, c, d, a, x[i + 10], 23, -1094730640);\r\n      a = this.md5hh(a, b, c, d, x[i + 13], 4, 681279174);\r\n      d = this.md5hh(d, a, b, c, x[i], 11, -358537222);\r\n      c = this.md5hh(c, d, a, b, x[i + 3], 16, -722521979);\r\n      b = this.md5hh(b, c, d, a, x[i + 6], 23, 76029189);\r\n      a = this.md5hh(a, b, c, d, x[i + 9], 4, -640364487);\r\n      d = this.md5hh(d, a, b, c, x[i + 12], 11, -421815835);\r\n      c = this.md5hh(c, d, a, b, x[i + 15], 16, 530742520);\r\n      b = this.md5hh(b, c, d, a, x[i + 2], 23, -995338651);\r\n\r\n      a = this.md5ii(a, b, c, d, x[i], 6, -198630844);\r\n      d = this.md5ii(d, a, b, c, x[i + 7], 10, 1126891415);\r\n      c = this.md5ii(c, d, a, b, x[i + 14], 15, -1416354905);\r\n      b = this.md5ii(b, c, d, a, x[i + 5], 21, -57434055);\r\n      a = this.md5ii(a, b, c, d, x[i + 12], 6, 1700485571);\r\n      d = this.md5ii(d, a, b, c, x[i + 3], 10, -1894986606);\r\n      c = this.md5ii(c, d, a, b, x[i + 10], 15, -1051523);\r\n      b = this.md5ii(b, c, d, a, x[i + 1], 21, -2054922799);\r\n      a = this.md5ii(a, b, c, d, x[i + 8], 6, 1873313359);\r\n      d = this.md5ii(d, a, b, c, x[i + 15], 10, -30611744);\r\n      c = this.md5ii(c, d, a, b, x[i + 6], 15, -1560198380);\r\n      b = this.md5ii(b, c, d, a, x[i + 13], 21, 1309151649);\r\n      a = this.md5ii(a, b, c, d, x[i + 4], 6, -145523070);\r\n      d = this.md5ii(d, a, b, c, x[i + 11], 10, -1120210379);\r\n      c = this.md5ii(c, d, a, b, x[i + 2], 15, 718787259);\r\n      b = this.md5ii(b, c, d, a, x[i + 9], 21, -343485551);\r\n\r\n      a = this.safeAdd(a, olda);\r\n      b = this.safeAdd(b, oldb);\r\n      c = this.safeAdd(c, oldc);\r\n      d = this.safeAdd(d, oldd);\r\n    }\r\n    return [a, b, c, d];\r\n  },\r\n  binl2rstr(input) {\r\n    var i;\r\n    var output = '';\r\n    var length32 = input.length * 32;\r\n    for (i = 0; i < length32; i += 8) {\r\n      output += String.fromCharCode((input[i >> 5] >>> (i % 32)) & 0xff);\r\n    }\r\n    return output;\r\n  },\r\n  rstr2binl(input) {\r\n    var i;\r\n    var output = [];\r\n    output[(input.length >> 2) - 1] = undefined;\r\n    for (i = 0; i < output.length; i += 1) {\r\n      output[i] = 0;\r\n    }\r\n    var length8 = input.length * 8;\r\n    for (i = 0; i < length8; i += 8) {\r\n      output[i >> 5] |= (input.charCodeAt(i / 8) & 0xff) << (i % 32);\r\n    }\r\n    return output;\r\n  },\r\n  rstrMD5(s) {\r\n    return this.binl2rstr(this.binlMD5(this.rstr2binl(s), s.length * 8));\r\n  },\r\n  rstrHMACMD5(key, data) {\r\n    var i;\r\n    var bkey = this.rstr2binl(key);\r\n    var ipad = [];\r\n    var opad = [];\r\n    var hash;\r\n    ipad[15] = opad[15] = undefined;\r\n    if (bkey.length > 16) {\r\n      bkey = this.binlMD5(bkey, key.length * 8);\r\n    }\r\n    for (i = 0; i < 16; i += 1) {\r\n      ipad[i] = bkey[i] ^ 0x36363636;\r\n      opad[i] = bkey[i] ^ 0x5c5c5c5c;\r\n    }\r\n    hash = this.binlMD5(ipad.concat(this.rstr2binl(data)), 512 + data.length * 8);\r\n    return this.binl2rstr(this.binlMD5(opad.concat(hash), 512 + 128));\r\n  },\r\n  rstr2hex(input) {\r\n    var hexTab = '0123456789abcdef';\r\n    var output = '';\r\n    var x;\r\n    var i;\r\n    for (i = 0; i < input.length; i += 1) {\r\n      x = input.charCodeAt(i);\r\n      output += hexTab.charAt((x >>> 4) & 0x0f) + hexTab.charAt(x & 0x0f);\r\n    }\r\n    return output;\r\n  },\r\n  str2rstrUTF8(input) {\r\n    return unescape(encodeURIComponent(input));\r\n  },\r\n  rawMD5(s) {\r\n    return this.rstrMD5(this.str2rstrUTF8(s));\r\n  },\r\n  hexMD5(s) {\r\n    return this.rstr2hex(this.rawMD5(s));\r\n  },\r\n  rawHMACMD5(k, d) {\r\n    return this.rstrHMACMD5(this.str2rstrUTF8(k), str2rstrUTF8(d));\r\n  },\r\n  hexHMACMD5(k, d) {\r\n    return this.rstr2hex(this.rawHMACMD5(k, d));\r\n  },\r\n\r\n  md5(string, key, raw) {\r\n    if (!key) {\r\n      if (!raw) {\r\n        return this.hexMD5(string);\r\n      }\r\n      return this.rawMD5(string);\r\n    }\r\n    if (!raw) {\r\n      return this.hexHMACMD5(key, string);\r\n    }\r\n    return this.rawHMACMD5(key, string);\r\n  },\r\n  /**\r\n   * 得到md5加密后的sig参数\r\n   * @param {Object} requestParam 接口参数\r\n   * @param {String} sk签名字符串\r\n   * @param {String} featrue 方法名\r\n   * @return 返回加密后的sig参数\r\n   */\r\n  getSig(requestParam, sk, feature, mode) {\r\n    var sig = null;\r\n    var requestArr = [];\r\n    Object.keys(requestParam).sort().forEach(function(key){\r\n      requestArr.push(key + '=' + requestParam[key]);\r\n    });\r\n    if (feature == 'search') {\r\n      sig = '/ws/place/v1/search?' + requestArr.join('&') + sk;\r\n    }\r\n    if (feature == 'suggest') {\r\n      sig = '/ws/place/v1/suggestion?' + requestArr.join('&') + sk;\r\n    }\r\n    if (feature == 'reverseGeocoder') {\r\n      sig = '/ws/geocoder/v1/?' + requestArr.join('&') + sk;\r\n    }\r\n    if (feature == 'geocoder') {\r\n      sig = '/ws/geocoder/v1/?' + requestArr.join('&') + sk;\r\n    }\r\n    if (feature == 'getCityList') {\r\n      sig = '/ws/district/v1/list?' + requestArr.join('&') + sk;\r\n    }\r\n    if (feature == 'getDistrictByCityId') {\r\n      sig = '/ws/district/v1/getchildren?' + requestArr.join('&') + sk;\r\n    }\r\n    if (feature == 'calculateDistance') {\r\n      sig = '/ws/distance/v1/?' + requestArr.join('&') + sk;\r\n    }\r\n    if (feature == 'direction') {\r\n      sig = '/ws/direction/v1/' + mode + '?' + requestArr.join('&') + sk;\r\n    }\r\n    sig = this.md5(sig);\r\n    return sig;\r\n  },\r\n    /**\r\n     * 得到终点query字符串\r\n     * @param {Array|String} 检索数据\r\n     */\r\n    location2query(data) {\r\n        if (typeof data == 'string') {\r\n            return data;\r\n        }\r\n        var query = '';\r\n        for (var i = 0; i < data.length; i++) {\r\n            var d = data[i];\r\n            if (!!query) {\r\n                query += ';';\r\n            }\r\n            if (d.location) {\r\n                query = query + d.location.lat + ',' + d.location.lng;\r\n            }\r\n            if (d.latitude && d.longitude) {\r\n                query = query + d.latitude + ',' + d.longitude;\r\n            }\r\n        }\r\n        return query;\r\n    },\r\n\r\n    /**\r\n     * 计算角度\r\n     */\r\n    rad(d) {\r\n      return d * Math.PI / 180.0;\r\n    },  \r\n    /**\r\n     * 处理终点location数组\r\n     * @return 返回终点数组\r\n     */\r\n    getEndLocation(location){\r\n      var to = location.split(';');\r\n      var endLocation = [];\r\n      for (var i = 0; i < to.length; i++) {\r\n        endLocation.push({\r\n          lat: parseFloat(to[i].split(',')[0]),\r\n          lng: parseFloat(to[i].split(',')[1])\r\n        })\r\n      }\r\n      return endLocation;\r\n    },\r\n\r\n    /**\r\n     * 计算两点间直线距离\r\n     * @param a 表示纬度差\r\n     * @param b 表示经度差\r\n     * @return 返回的是距离，单位m\r\n     */\r\n    getDistance(latFrom, lngFrom, latTo, lngTo) {\r\n      var radLatFrom = this.rad(latFrom);\r\n      var radLatTo = this.rad(latTo);\r\n      var a = radLatFrom - radLatTo;\r\n      var b = this.rad(lngFrom) - this.rad(lngTo);\r\n      var distance = 2 * Math.asin(Math.sqrt(Math.pow(Math.sin(a / 2), 2) + Math.cos(radLatFrom) * Math.cos(radLatTo) * Math.pow(Math.sin(b / 2), 2)));\r\n      distance = distance * EARTH_RADIUS;\r\n      distance = Math.round(distance * 10000) / 10000;\r\n      return parseFloat(distance.toFixed(0));\r\n    },\r\n    /**\r\n     * 使用微信接口进行定位\r\n     */\r\n    getWXLocation(success, fail, complete) {\r\n        wx.getLocation({\r\n            type: 'gcj02',\r\n            success: success,\r\n            fail: fail,\r\n            complete: complete\r\n        });\r\n    },\r\n\r\n    /**\r\n     * 获取location参数\r\n     */\r\n    getLocationParam(location) {\r\n        if (typeof location == 'string') {\r\n            var locationArr = location.split(',');\r\n            if (locationArr.length === 2) {\r\n                location = {\r\n                    latitude: location.split(',')[0],\r\n                    longitude: location.split(',')[1]\r\n                };\r\n            } else {\r\n                location = {};\r\n            }\r\n        }\r\n        return location;\r\n    },\r\n\r\n    /**\r\n     * 回调函数默认处理\r\n     */\r\n    polyfillParam(param) {\r\n        param.success = param.success || function () { };\r\n        param.fail = param.fail || function () { };\r\n        param.complete = param.complete || function () { };\r\n    },\r\n\r\n    /**\r\n     * 验证param对应的key值是否为空\r\n     * \r\n     * @param {Object} param 接口参数\r\n     * @param {String} key 对应参数的key\r\n     */\r\n    checkParamKeyEmpty(param, key) {\r\n        if (!param[key]) {\r\n            var errconf = this.buildErrorConfig(ERROR_CONF.PARAM_ERR, ERROR_CONF.PARAM_ERR_MSG + key +'参数格式有误');\r\n            param.fail(errconf);\r\n            param.complete(errconf);\r\n            return true;\r\n        }\r\n        return false;\r\n    },\r\n\r\n    /**\r\n     * 验证参数中是否存在检索词keyword\r\n     * \r\n     * @param {Object} param 接口参数\r\n     */\r\n    checkKeyword(param){\r\n        return !this.checkParamKeyEmpty(param, 'keyword');\r\n    },\r\n\r\n    /**\r\n     * 验证location值\r\n     * \r\n     * @param {Object} param 接口参数\r\n     */\r\n    checkLocation(param) {\r\n        var location = this.getLocationParam(param.location);\r\n        if (!location || !location.latitude || !location.longitude) {\r\n            var errconf = this.buildErrorConfig(ERROR_CONF.PARAM_ERR, ERROR_CONF.PARAM_ERR_MSG + ' location参数格式有误');\r\n            param.fail(errconf);\r\n            param.complete(errconf);\r\n            return false;\r\n        }\r\n        return true;\r\n    },\r\n\r\n    /**\r\n     * 构造错误数据结构\r\n     * @param {Number} errCode 错误码\r\n     * @param {Number} errMsg 错误描述\r\n     */\r\n    buildErrorConfig(errCode, errMsg) {\r\n        return {\r\n            status: errCode,\r\n            message: errMsg\r\n        };\r\n    },\r\n\r\n    /**\r\n     * \r\n     * 数据处理函数\r\n     * 根据传入参数不同处理不同数据\r\n     * @param {String} feature 功能名称\r\n     * search 地点搜索\r\n     * suggest关键词提示\r\n     * reverseGeocoder逆地址解析\r\n     * geocoder地址解析\r\n     * getCityList获取城市列表：父集\r\n     * getDistrictByCityId获取区县列表：子集\r\n     * calculateDistance距离计算\r\n     * @param {Object} param 接口参数\r\n     * @param {Object} data 数据\r\n     */\r\n    handleData(param,data,feature){\r\n      if (feature == 'search') {\r\n        var searchResult = data.data;\r\n        var searchSimplify = [];\r\n        for (var i = 0; i < searchResult.length; i++) {\r\n          searchSimplify.push({\r\n            id: searchResult[i].id || null,\r\n            title: searchResult[i].title || null,\r\n            latitude: searchResult[i].location && searchResult[i].location.lat || null,\r\n            longitude: searchResult[i].location && searchResult[i].location.lng || null,\r\n            address: searchResult[i].address || null,\r\n            category: searchResult[i].category || null,\r\n            tel: searchResult[i].tel || null,\r\n            adcode: searchResult[i].ad_info && searchResult[i].ad_info.adcode || null,\r\n            city: searchResult[i].ad_info && searchResult[i].ad_info.city || null,\r\n            district: searchResult[i].ad_info && searchResult[i].ad_info.district || null,\r\n            province: searchResult[i].ad_info && searchResult[i].ad_info.province || null\r\n          })\r\n        }\r\n        param.success(data, {\r\n          searchResult: searchResult,\r\n          searchSimplify: searchSimplify\r\n        })\r\n      } else if (feature == 'suggest') {\r\n        var suggestResult = data.data;\r\n        var suggestSimplify = [];\r\n        for (var i = 0; i < suggestResult.length; i++) {\r\n          suggestSimplify.push({\r\n            adcode: suggestResult[i].adcode || null,\r\n            address: suggestResult[i].address || null,\r\n            category: suggestResult[i].category || null,\r\n            city: suggestResult[i].city || null,\r\n            district: suggestResult[i].district || null,\r\n            id: suggestResult[i].id || null,\r\n            latitude: suggestResult[i].location && suggestResult[i].location.lat || null,\r\n            longitude: suggestResult[i].location && suggestResult[i].location.lng || null,\r\n            province: suggestResult[i].province || null,\r\n            title: suggestResult[i].title || null,\r\n            type: suggestResult[i].type || null\r\n          })\r\n        }\r\n        param.success(data, {\r\n          suggestResult: suggestResult,\r\n          suggestSimplify: suggestSimplify\r\n          })\r\n      } else if (feature == 'reverseGeocoder') {\r\n        var reverseGeocoderResult = data.result;\r\n        var reverseGeocoderSimplify = {\r\n          address: reverseGeocoderResult.address || null,\r\n          latitude: reverseGeocoderResult.location && reverseGeocoderResult.location.lat || null,\r\n          longitude: reverseGeocoderResult.location && reverseGeocoderResult.location.lng || null,\r\n          adcode: reverseGeocoderResult.ad_info && reverseGeocoderResult.ad_info.adcode || null,\r\n          city: reverseGeocoderResult.address_component && reverseGeocoderResult.address_component.city || null,\r\n          district: reverseGeocoderResult.address_component && reverseGeocoderResult.address_component.district || null,\r\n          nation: reverseGeocoderResult.address_component && reverseGeocoderResult.address_component.nation || null,\r\n          province: reverseGeocoderResult.address_component && reverseGeocoderResult.address_component.province || null,\r\n          street: reverseGeocoderResult.address_component && reverseGeocoderResult.address_component.street || null,\r\n          street_number: reverseGeocoderResult.address_component && reverseGeocoderResult.address_component.street_number || null,\r\n          recommend: reverseGeocoderResult.formatted_addresses && reverseGeocoderResult.formatted_addresses.recommend || null,\r\n          rough: reverseGeocoderResult.formatted_addresses && reverseGeocoderResult.formatted_addresses.rough || null\r\n        };\r\n        if (reverseGeocoderResult.pois) {//判断是否返回周边poi\r\n          var pois = reverseGeocoderResult.pois;\r\n          var poisSimplify = [];\r\n          for (var i = 0;i < pois.length;i++) {\r\n            poisSimplify.push({\r\n              id: pois[i].id || null,\r\n              title: pois[i].title || null,\r\n              latitude: pois[i].location && pois[i].location.lat || null,\r\n              longitude: pois[i].location && pois[i].location.lng || null,\r\n              address: pois[i].address || null,\r\n              category: pois[i].category || null,\r\n              adcode: pois[i].ad_info && pois[i].ad_info.adcode || null,\r\n              city: pois[i].ad_info && pois[i].ad_info.city || null,\r\n              district: pois[i].ad_info && pois[i].ad_info.district || null,\r\n              province: pois[i].ad_info && pois[i].ad_info.province || null\r\n            })\r\n          }\r\n          param.success(data,{\r\n            reverseGeocoderResult: reverseGeocoderResult,\r\n            reverseGeocoderSimplify: reverseGeocoderSimplify,\r\n            pois: pois,\r\n            poisSimplify: poisSimplify\r\n          })\r\n        } else {\r\n          param.success(data, {\r\n            reverseGeocoderResult: reverseGeocoderResult,\r\n            reverseGeocoderSimplify: reverseGeocoderSimplify\r\n          })\r\n        }\r\n      } else if (feature == 'geocoder') {\r\n        var geocoderResult = data.result;\r\n        var geocoderSimplify = {\r\n          title: geocoderResult.title || null,\r\n          latitude: geocoderResult.location && geocoderResult.location.lat || null,\r\n          longitude: geocoderResult.location && geocoderResult.location.lng || null,\r\n          adcode: geocoderResult.ad_info && geocoderResult.ad_info.adcode || null,\r\n          province: geocoderResult.address_components && geocoderResult.address_components.province || null,\r\n          city: geocoderResult.address_components && geocoderResult.address_components.city || null,\r\n          district: geocoderResult.address_components && geocoderResult.address_components.district || null,\r\n          street: geocoderResult.address_components && geocoderResult.address_components.street || null,\r\n          street_number: geocoderResult.address_components && geocoderResult.address_components.street_number || null,\r\n          level: geocoderResult.level || null\r\n        };\r\n        param.success(data,{\r\n          geocoderResult: geocoderResult,\r\n          geocoderSimplify: geocoderSimplify\r\n        });\r\n      } else if (feature == 'getCityList') {\r\n        var provinceResult = data.result[0];\r\n        var cityResult = data.result[1];\r\n        var districtResult = data.result[2];\r\n        param.success(data,{\r\n          provinceResult: provinceResult,\r\n          cityResult: cityResult,\r\n          districtResult: districtResult\r\n        });\r\n      } else if (feature == 'getDistrictByCityId') {\r\n        var districtByCity = data.result[0];\r\n        param.success(data, districtByCity);\r\n      } else if (feature == 'calculateDistance') {\r\n        var calculateDistanceResult = data.result.elements;  \r\n        var distance = [];\r\n        for (var i = 0; i < calculateDistanceResult.length; i++){\r\n          distance.push(calculateDistanceResult[i].distance);\r\n        }   \r\n        param.success(data, {\r\n          calculateDistanceResult: calculateDistanceResult,\r\n          distance: distance\r\n          });\r\n      } else if (feature == 'direction') {\r\n        var direction = data.result.routes;\r\n        param.success(data,direction);\r\n      } else {\r\n        param.success(data);\r\n      }\r\n    },\r\n\r\n    /**\r\n     * 构造微信请求参数，公共属性处理\r\n     * \r\n     * @param {Object} param 接口参数\r\n     * @param {Object} param 配置项\r\n     * @param {String} feature 方法名\r\n     */\r\n    buildWxRequestConfig(param, options, feature) {\r\n        var that = this;\r\n        options.header = { \"content-type\": \"application/json\" };\r\n        options.method = 'GET';\r\n        options.success = function (res) {\r\n            var data = res.data;\r\n            if (data.status === 0) {\r\n              that.handleData(param, data, feature);\r\n            } else {\r\n                param.fail(data);\r\n            }\r\n        };\r\n        options.fail = function (res) {\r\n            res.statusCode = ERROR_CONF.WX_ERR_CODE;\r\n            param.fail(that.buildErrorConfig(ERROR_CONF.WX_ERR_CODE, res.errMsg));\r\n        };\r\n        options.complete = function (res) {\r\n            var statusCode = +res.statusCode;\r\n            switch(statusCode) {\r\n                case ERROR_CONF.WX_ERR_CODE: {\r\n                    param.complete(that.buildErrorConfig(ERROR_CONF.WX_ERR_CODE, res.errMsg));\r\n                    break;\r\n                }\r\n                case ERROR_CONF.WX_OK_CODE: {\r\n                    var data = res.data;\r\n                    if (data.status === 0) {\r\n                        param.complete(data);\r\n                    } else {\r\n                        param.complete(that.buildErrorConfig(data.status, data.message));\r\n                    }\r\n                    break;\r\n                }\r\n                default:{\r\n                    param.complete(that.buildErrorConfig(ERROR_CONF.SYSTEM_ERR, ERROR_CONF.SYSTEM_ERR_MSG));\r\n                }\r\n\r\n            }\r\n        };\r\n        return options;\r\n    },\r\n\r\n    /**\r\n     * 处理用户参数是否传入坐标进行不同的处理\r\n     */\r\n    locationProcess(param, locationsuccess, locationfail, locationcomplete) {\r\n        var that = this;\r\n        locationfail = locationfail || function (res) {\r\n            res.statusCode = ERROR_CONF.WX_ERR_CODE;\r\n            param.fail(that.buildErrorConfig(ERROR_CONF.WX_ERR_CODE, res.errMsg));\r\n        };\r\n        locationcomplete = locationcomplete || function (res) {\r\n            if (res.statusCode == ERROR_CONF.WX_ERR_CODE) {\r\n                param.complete(that.buildErrorConfig(ERROR_CONF.WX_ERR_CODE, res.errMsg));\r\n            }\r\n        };\r\n        if (!param.location) {\r\n            that.getWXLocation(locationsuccess, locationfail, locationcomplete);\r\n        } else if (that.checkLocation(param)) {\r\n            var location = Utils.getLocationParam(param.location);\r\n            locationsuccess(location);\r\n        }\r\n    }\r\n};\r\n\r\n\r\nclass QQMapWX {\r\n\r\n    /**\r\n     * 构造函数\r\n     * \r\n     * @param {Object} options 接口参数,key 为必选参数\r\n     */\r\n    constructor(options) {\r\n        if (!options.key) {\r\n            throw Error('key值不能为空');\r\n        }\r\n        this.key = options.key;\r\n    };\r\n\r\n    /**\r\n     * POI周边检索\r\n     *\r\n     * @param {Object} options 接口参数对象\r\n     * \r\n     * 参数对象结构可以参考\r\n     * @see http://lbs.qq.com/webservice_v1/guide-search.html\r\n     */\r\n    search(options) {\r\n        var that = this;\r\n        options = options || {};\r\n\r\n        Utils.polyfillParam(options);\r\n\r\n        if (!Utils.checkKeyword(options)) {\r\n            return;\r\n        }\r\n\r\n        var requestParam = {\r\n            keyword: options.keyword,\r\n            orderby: options.orderby || '_distance',\r\n            page_size: options.page_size || 10,\r\n            page_index: options.page_index || 1,\r\n            output: 'json',\r\n            key: that.key\r\n        };\r\n\r\n        if (options.address_format) {\r\n            requestParam.address_format = options.address_format;\r\n        }\r\n\r\n        if (options.filter) {\r\n            requestParam.filter = options.filter;\r\n        }\r\n\r\n        var distance = options.distance || \"1000\";\r\n        var auto_extend = options.auto_extend || 1;\r\n        var region = null;\r\n        var rectangle = null;\r\n\r\n        //判断城市限定参数\r\n        if (options.region) {\r\n          region = options.region;\r\n        }\r\n\r\n        //矩形限定坐标(暂时只支持字符串格式)\r\n        if (options.rectangle) {\r\n          rectangle = options.rectangle;\r\n        }\r\n\r\n        var locationsuccess = function (result) {        \r\n          if (region && !rectangle) {\r\n            //城市限定参数拼接\r\n            requestParam.boundary = \"region(\" + region + \",\" + auto_extend + \",\" + result.latitude + \",\" + result.longitude + \")\";\r\n            if (options.sig) {\r\n              requestParam.sig = Utils.getSig(requestParam, options.sig, 'search');\r\n            }\r\n          } else if (rectangle && !region) {\r\n            //矩形搜索\r\n            requestParam.boundary = \"rectangle(\" + rectangle + \")\";\r\n            if (options.sig) {\r\n              requestParam.sig = Utils.getSig(requestParam, options.sig, 'search');\r\n            }\r\n            } else {\r\n              requestParam.boundary = \"nearby(\" + result.latitude + \",\" + result.longitude + \",\" + distance + \",\" + auto_extend + \")\";\r\n            if (options.sig) {\r\n              requestParam.sig = Utils.getSig(requestParam, options.sig, 'search');\r\n            }\r\n            }            \r\n            wx.request(Utils.buildWxRequestConfig(options, {\r\n                url: URL_SEARCH,\r\n                data: requestParam\r\n            }, 'search'));\r\n        };\r\n        Utils.locationProcess(options, locationsuccess);\r\n    };\r\n\r\n    /**\r\n     * sug模糊检索\r\n     *\r\n     * @param {Object} options 接口参数对象\r\n     * \r\n     * 参数对象结构可以参考\r\n     * http://lbs.qq.com/webservice_v1/guide-suggestion.html\r\n     */\r\n    getSuggestion(options) {\r\n        var that = this;\r\n        options = options || {};\r\n        Utils.polyfillParam(options);\r\n\r\n        if (!Utils.checkKeyword(options)) {\r\n            return;\r\n        }\r\n\r\n        var requestParam = {\r\n            keyword: options.keyword,\r\n            region: options.region || '全国',\r\n            region_fix: options.region_fix || 0,\r\n            policy: options.policy || 0,\r\n            page_size: options.page_size || 10,//控制显示条数\r\n            page_index: options.page_index || 1,//控制页数\r\n            get_subpois : options.get_subpois || 0,//返回子地点\r\n            output: 'json',\r\n            key: that.key\r\n        };\r\n        //长地址\r\n        if (options.address_format) {\r\n          requestParam.address_format = options.address_format;\r\n        }\r\n        //过滤\r\n        if (options.filter) {\r\n          requestParam.filter = options.filter;\r\n        }\r\n        //排序\r\n        if (options.location) {\r\n          var locationsuccess = function (result) {\r\n            requestParam.location = result.latitude + ',' + result.longitude;\r\n            if (options.sig) {\r\n              requestParam.sig = Utils.getSig(requestParam, options.sig, 'suggest');\r\n            }\r\n            wx.request(Utils.buildWxRequestConfig(options, {\r\n              url: URL_SUGGESTION,\r\n              data: requestParam\r\n            }, \"suggest\"));      \r\n          };\r\n          Utils.locationProcess(options, locationsuccess);\r\n        } else {\r\n          if (options.sig) {\r\n            requestParam.sig = Utils.getSig(requestParam, options.sig, 'suggest');\r\n          }\r\n          wx.request(Utils.buildWxRequestConfig(options, {\r\n            url: URL_SUGGESTION,\r\n            data: requestParam\r\n          }, \"suggest\"));      \r\n        }        \r\n    };\r\n\r\n    /**\r\n     * 逆地址解析\r\n     *\r\n     * @param {Object} options 接口参数对象\r\n     * \r\n     * 请求参数结构可以参考\r\n     * http://lbs.qq.com/webservice_v1/guide-gcoder.html\r\n     */\r\n    reverseGeocoder(options) {\r\n        var that = this;\r\n        options = options || {};\r\n        Utils.polyfillParam(options);\r\n        var requestParam = {\r\n            coord_type: options.coord_type || 5,\r\n            get_poi: options.get_poi || 0,\r\n            output: 'json',\r\n            key: that.key\r\n        };\r\n        if (options.poi_options) {\r\n            requestParam.poi_options = options.poi_options\r\n        }\r\n\r\n        var locationsuccess = function (result) {\r\n            requestParam.location = result.latitude + ',' + result.longitude;\r\n          if (options.sig) {\r\n            requestParam.sig = Utils.getSig(requestParam, options.sig, 'reverseGeocoder');\r\n          }\r\n            wx.request(Utils.buildWxRequestConfig(options, {\r\n                url: URL_GET_GEOCODER,\r\n                data: requestParam\r\n            }, 'reverseGeocoder'));\r\n        };\r\n        Utils.locationProcess(options, locationsuccess);\r\n    };\r\n\r\n    /**\r\n     * 地址解析\r\n     *\r\n     * @param {Object} options 接口参数对象\r\n     * \r\n     * 请求参数结构可以参考\r\n     * http://lbs.qq.com/webservice_v1/guide-geocoder.html\r\n     */\r\n    geocoder(options) {\r\n        var that = this;\r\n        options = options || {};\r\n        Utils.polyfillParam(options);\r\n\r\n        if (Utils.checkParamKeyEmpty(options, 'address')) {\r\n            return;\r\n        }\r\n\r\n        var requestParam = {\r\n            address: options.address,\r\n            output: 'json',\r\n            key: that.key\r\n        };\r\n\r\n        //城市限定\r\n        if (options.region) {\r\n          requestParam.region = options.region;\r\n        }\r\n\r\n        if (options.sig) {\r\n          requestParam.sig = Utils.getSig(requestParam, options.sig, 'geocoder');\r\n        }\r\n\r\n        wx.request(Utils.buildWxRequestConfig(options, {\r\n            url: URL_GET_GEOCODER,\r\n            data: requestParam\r\n        },'geocoder'));\r\n    };\r\n\r\n\r\n    /**\r\n     * 获取城市列表\r\n     *\r\n     * @param {Object} options 接口参数对象\r\n     * \r\n     * 请求参数结构可以参考\r\n     * http://lbs.qq.com/webservice_v1/guide-region.html\r\n     */\r\n    getCityList(options) {\r\n        var that = this;\r\n        options = options || {};\r\n        Utils.polyfillParam(options);\r\n        var requestParam = {\r\n            output: 'json',\r\n            key: that.key\r\n        };\r\n\r\n        if (options.sig) {\r\n          requestParam.sig = Utils.getSig(requestParam, options.sig, 'getCityList');\r\n        }\r\n\r\n        wx.request(Utils.buildWxRequestConfig(options, {\r\n            url: URL_CITY_LIST,\r\n            data: requestParam\r\n        },'getCityList'));\r\n    };\r\n\r\n    /**\r\n     * 获取对应城市ID的区县列表\r\n     *\r\n     * @param {Object} options 接口参数对象\r\n     * \r\n     * 请求参数结构可以参考\r\n     * http://lbs.qq.com/webservice_v1/guide-region.html\r\n     */\r\n    getDistrictByCityId(options) {\r\n        var that = this;\r\n        options = options || {};\r\n        Utils.polyfillParam(options);\r\n\r\n        if (Utils.checkParamKeyEmpty(options, 'id')) {\r\n            return;\r\n        }\r\n\r\n        var requestParam = {\r\n            id: options.id || '',\r\n            output: 'json',\r\n            key: that.key\r\n        };\r\n\r\n        if (options.sig) {\r\n          requestParam.sig = Utils.getSig(requestParam, options.sig, 'getDistrictByCityId');\r\n        }\r\n\r\n        wx.request(Utils.buildWxRequestConfig(options, {\r\n            url: URL_AREA_LIST,\r\n            data: requestParam\r\n        },'getDistrictByCityId'));\r\n    };\r\n\r\n    /**\r\n     * 用于单起点到多终点的路线距离(非直线距离)计算：\r\n     * 支持两种距离计算方式：步行和驾车。\r\n     * 起点到终点最大限制直线距离10公里。\r\n     *\r\n     * 新增直线距离计算。\r\n     * \r\n     * @param {Object} options 接口参数对象\r\n     * \r\n     * 请求参数结构可以参考\r\n     * http://lbs.qq.com/webservice_v1/guide-distance.html\r\n     */\r\n    calculateDistance(options) {\r\n        var that = this;\r\n        options = options || {};\r\n        Utils.polyfillParam(options);\r\n\r\n        if (Utils.checkParamKeyEmpty(options, 'to')) {\r\n            return;\r\n        }\r\n\r\n        var requestParam = {\r\n            mode: options.mode || 'walking',\r\n            to: Utils.location2query(options.to),\r\n            output: 'json',\r\n            key: that.key\r\n        };\r\n\r\n        if (options.from) {\r\n          options.location = options.from;\r\n        }\r\n\r\n        //计算直线距离\r\n        if(requestParam.mode == 'straight'){        \r\n          var locationsuccess = function (result) {\r\n            var locationTo = Utils.getEndLocation(requestParam.to);//处理终点坐标\r\n            var data = {\r\n              message:\"query ok\",\r\n              result:{\r\n                elements:[]\r\n              },\r\n              status:0\r\n            };\r\n            for (var i = 0; i < locationTo.length; i++) {\r\n              data.result.elements.push({//将坐标存入\r\n                distance: Utils.getDistance(result.latitude, result.longitude, locationTo[i].lat, locationTo[i].lng),\r\n                duration:0,\r\n                from:{\r\n                  lat: result.latitude,\r\n                  lng:result.longitude\r\n                },\r\n                to:{\r\n                  lat: locationTo[i].lat,\r\n                  lng: locationTo[i].lng\r\n                }\r\n              });            \r\n            }\r\n            var calculateResult = data.result.elements;\r\n            var distanceResult = [];\r\n            for (var i = 0; i < calculateResult.length; i++) {\r\n              distanceResult.push(calculateResult[i].distance);\r\n            }  \r\n            return options.success(data,{\r\n              calculateResult: calculateResult,\r\n              distanceResult: distanceResult\r\n            });\r\n          };\r\n          \r\n          Utils.locationProcess(options, locationsuccess);\r\n        } else {\r\n          var locationsuccess = function (result) {\r\n            requestParam.from = result.latitude + ',' + result.longitude;\r\n            if (options.sig) {\r\n              requestParam.sig = Utils.getSig(requestParam, options.sig, 'calculateDistance');\r\n            }\r\n            wx.request(Utils.buildWxRequestConfig(options, {\r\n              url: URL_DISTANCE,\r\n              data: requestParam\r\n            },'calculateDistance'));\r\n          };\r\n\r\n          Utils.locationProcess(options, locationsuccess);\r\n        }      \r\n    };\r\n\r\n  /**\r\n   * 路线规划：\r\n   * \r\n   * @param {Object} options 接口参数对象\r\n   * \r\n   * 请求参数结构可以参考\r\n   * https://lbs.qq.com/webservice_v1/guide-road.html\r\n   */\r\n  direction(options) {\r\n    var that = this;\r\n    options = options || {};\r\n    Utils.polyfillParam(options);\r\n\r\n    if (Utils.checkParamKeyEmpty(options, 'to')) {\r\n      return;\r\n    }\r\n\r\n    var requestParam = {\r\n      output: 'json',\r\n      key: that.key\r\n    };\r\n\r\n    //to格式处理\r\n    if (typeof options.to == 'string') {\r\n      requestParam.to = options.to;\r\n    } else {\r\n      requestParam.to = options.to.latitude + ',' + options.to.longitude;\r\n    }\r\n    //初始化局部请求域名\r\n    var SET_URL_DIRECTION = null;\r\n    //设置默认mode属性\r\n    options.mode = options.mode || MODE.driving;\r\n\r\n    //设置请求域名\r\n    SET_URL_DIRECTION = URL_DIRECTION + options.mode;\r\n\r\n    if (options.from) {\r\n      options.location = options.from;\r\n    }\r\n\r\n    if (options.mode == MODE.driving) {\r\n      if (options.from_poi) {\r\n        requestParam.from_poi = options.from_poi;\r\n      }\r\n      if (options.heading) {\r\n        requestParam.heading = options.heading;\r\n      }\r\n      if (options.speed) {\r\n        requestParam.speed = options.speed;\r\n      }\r\n      if (options.accuracy) {\r\n        requestParam.accuracy = options.accuracy;\r\n      }\r\n      if (options.road_type) {\r\n        requestParam.road_type = options.road_type;\r\n      }\r\n      if (options.to_poi) {\r\n        requestParam.to_poi = options.to_poi;\r\n      }\r\n      if (options.from_track) {\r\n        requestParam.from_track = options.from_track;\r\n      }\r\n      if (options.waypoints) {\r\n        requestParam.waypoints = options.waypoints;\r\n      }\r\n      if (options.policy) {\r\n        requestParam.policy = options.policy;\r\n      }\r\n      if (options.plate_number) {\r\n        requestParam.plate_number = options.plate_number;\r\n      }\r\n    }\r\n\r\n    if (options.mode == MODE.transit) {\r\n      if (options.departure_time) {\r\n        requestParam.departure_time = options.departure_time;\r\n      }\r\n      if (options.policy) {\r\n        requestParam.policy = options.policy;\r\n      }\r\n    } \r\n\r\n    var locationsuccess = function (result) {\r\n      requestParam.from = result.latitude + ',' + result.longitude;\r\n      if (options.sig) {\r\n        requestParam.sig = Utils.getSig(requestParam, options.sig, 'direction',options.mode);\r\n      }\r\n      wx.request(Utils.buildWxRequestConfig(options, {\r\n        url: SET_URL_DIRECTION,\r\n        data: requestParam\r\n      }, 'direction'));\r\n    };\r\n\r\n    Utils.locationProcess(options, locationsuccess);\r\n  }\r\n};\r\n\r\nmodule.exports = QQMapWX;"]}