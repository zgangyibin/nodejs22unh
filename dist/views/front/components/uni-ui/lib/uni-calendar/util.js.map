{"version":3,"sources":["../../../../../../../src/views/front/components/uni-ui/lib/uni-calendar/util.js"],"names":["Calendar","date","selected","startDate","endDate","range","getDate","multipleStatus","before","after","data","weeks","_getWeek","fullDate","AddDayCount","str","Date","replace","dd","setDate","setMonth","getMonth","setFullYear","getFullYear","y","m","d","year","month","day","getDay","firstDay","full","dateArr","i","beforeDate","push","lunar","getlunar","disable","dateData","isinfo","nowDate","isDay","info","find","item","dateEqual","disableBefore","disableAfter","dateCompBefore","dateCompare","dateCompAfter","multiples","checked","multiplesStatus","findIndex","multiple","extraInfo","surplus","Number","dateInfo","canlender","getTime","begin","end","arr","ab","split","ae","db","de","unixDb","unixDe","k","parseInt","CALENDAR","solar2lunar","value","geDateAll","currentDay","dates","lastMonthDays","_getLastMonthDays","currentMonthDys","_currentMonthDys","nextMonthDays","length","_getNextMonthDays","concat","Array"],"mappings":"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","file":"util.js","sourcesContent":["import CALENDAR from './calendar.js'\r\n\r\nclass Calendar {\r\n\tconstructor({\r\n\t\tdate,\r\n\t\tselected,\r\n\t\tstartDate,\r\n\t\tendDate,\r\n\t\trange\r\n\t} = {}) {\r\n\t\t// 当前日期\r\n\t\tthis.date = this.getDate(date) // 当前初入日期\r\n\t\t// 打点信息\r\n\t\tthis.selected = selected || [];\r\n\t\t// 范围开始\r\n\t\tthis.startDate = startDate\r\n\t\t// 范围结束\r\n\t\tthis.endDate = endDate\r\n\t\tthis.range = range\r\n\t\t// 多选状态\r\n\t\tthis.multipleStatus = {\r\n\t\t\tbefore: '',\r\n\t\t\tafter: '',\r\n\t\t\tdata: []\r\n\t\t}\r\n\t\t// 每周日期\r\n\t\tthis.weeks = {}\r\n\r\n\t\tthis._getWeek(this.date.fullDate)\r\n\t}\r\n\r\n\t/**\r\n\t * 获取任意时间\r\n\t */\r\n\tgetDate(date, AddDayCount = 0, str = 'day') {\r\n\t\tif (!date) {\r\n\t\t\tdate = new Date()\r\n\t\t}\r\n\t\tif (typeof date !== 'object') {\r\n\t\t\tdate = date.replace(/-/g, '/')\r\n\t\t}\r\n\t\tconst dd = new Date(date)\r\n\t\tswitch (str) {\r\n\t\t\tcase 'day':\r\n\t\t\t\tdd.setDate(dd.getDate() + AddDayCount) // 获取AddDayCount天后的日期\r\n\t\t\t\tbreak\r\n\t\t\tcase 'month':\r\n\t\t\t\tif (dd.getDate() === 31) {\r\n\t\t\t\t\tdd.setDate(dd.getDate() + AddDayCount)\r\n\t\t\t\t} else {\r\n\t\t\t\t\tdd.setMonth(dd.getMonth() + AddDayCount) // 获取AddDayCount天后的日期\r\n\t\t\t\t}\r\n\t\t\t\tbreak\r\n\t\t\tcase 'year':\r\n\t\t\t\tdd.setFullYear(dd.getFullYear() + AddDayCount) // 获取AddDayCount天后的日期\r\n\t\t\t\tbreak\r\n\t\t}\r\n\t\tconst y = dd.getFullYear()\r\n\t\tconst m = dd.getMonth() + 1 < 10 ? '0' + (dd.getMonth() + 1) : dd.getMonth() + 1 // 获取当前月份的日期，不足10补0\r\n\t\tconst d = dd.getDate() < 10 ? '0' + dd.getDate() : dd.getDate() // 获取当前几号，不足10补0\r\n\t\treturn {\r\n\t\t\tfullDate: y + '-' + m + '-' + d,\r\n\t\t\tyear: y,\r\n\t\t\tmonth: m,\r\n\t\t\tdate: d,\r\n\t\t\tday: dd.getDay()\r\n\t\t}\r\n\t}\r\n\r\n\r\n\t/**\r\n\t * 获取上月剩余天数\r\n\t */\r\n\t_getLastMonthDays(firstDay, full) {\r\n\t\tlet dateArr = []\r\n\t\tfor (let i = firstDay; i > 0; i--) {\r\n\t\t\tconst beforeDate = new Date(full.year, full.month - 1, -i + 1).getDate()\r\n\t\t\tdateArr.push({\r\n\t\t\t\tdate: beforeDate,\r\n\t\t\t\tmonth: full.month - 1,\r\n\t\t\t\tlunar: this.getlunar(full.year, full.month - 1, beforeDate),\r\n\t\t\t\tdisable: true\r\n\t\t\t})\r\n\t\t}\r\n\t\treturn dateArr\r\n\t}\r\n\t/**\r\n\t * 获取本月天数\r\n\t */\r\n\t_currentMonthDys(dateData, full) {\r\n\t\tlet dateArr = []\r\n\t\tlet fullDate = this.date.fullDate\r\n\t\tfor (let i = 1; i <= dateData; i++) {\r\n\t\t\tlet isinfo = false\r\n\t\t\tlet nowDate = full.year + '-' + (full.month < 10 ?\r\n\t\t\t\tfull.month : full.month) + '-' + (i < 10 ?\r\n\t\t\t\t'0' + i : i)\r\n\t\t\t// 是否今天\r\n\t\t\tlet isDay = fullDate === nowDate\r\n\t\t\t// 获取打点信息\r\n\t\t\tlet info = this.selected && this.selected.find((item) => {\r\n\t\t\t\tif (this.dateEqual(nowDate, item.date)) {\r\n\t\t\t\t\treturn item\r\n\t\t\t\t}\r\n\t\t\t})\r\n\r\n\t\t\t// 日期禁用\r\n\t\t\tlet disableBefore = true\r\n\t\t\tlet disableAfter = true\r\n\t\t\tif (this.startDate) {\r\n\t\t\t\tlet dateCompBefore = this.dateCompare(this.startDate, fullDate)\r\n\t\t\t\tdisableBefore = this.dateCompare(dateCompBefore ? this.startDate : fullDate, nowDate)\r\n\t\t\t}\r\n\r\n\t\t\tif (this.endDate) {\r\n\t\t\t\tlet dateCompAfter = this.dateCompare(fullDate, this.endDate)\r\n\t\t\t\tdisableAfter = this.dateCompare(nowDate, dateCompAfter ? this.endDate : fullDate)\r\n\t\t\t}\r\n\r\n\t\t\tlet multiples = this.multipleStatus.data\r\n\t\t\tlet checked = false\r\n\t\t\tlet multiplesStatus = -1\r\n\t\t\tif (this.range) {\r\n\t\t\t\tif (multiples) {\r\n\t\t\t\t\tmultiplesStatus = multiples.findIndex((item) => {\r\n\t\t\t\t\t\treturn this.dateEqual(item, nowDate)\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t\tif (multiplesStatus !== -1) {\r\n\t\t\t\t\tchecked = true\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tlet data = {\r\n\t\t\t\tfullDate: nowDate,\r\n\t\t\t\tyear: full.year,\r\n\t\t\t\tdate: i,\r\n\t\t\t\tmultiple: this.range ? checked : false,\r\n\t\t\t\tmonth: full.month,\r\n\t\t\t\tlunar: this.getlunar(full.year, full.month, i),\r\n\t\t\t\tdisable: !disableBefore || !disableAfter,\r\n\t\t\t\tisDay\r\n\t\t\t}\r\n\t\t\tif (info) {\r\n\t\t\t\tdata.extraInfo = info\r\n\t\t\t}\r\n\r\n\t\t\tdateArr.push(data)\r\n\t\t}\r\n\t\treturn dateArr\r\n\t}\r\n\t/**\r\n\t * 获取下月天数\r\n\t */\r\n\t_getNextMonthDays(surplus, full) {\r\n\t\tlet dateArr = []\r\n\t\tfor (let i = 1; i < surplus + 1; i++) {\r\n\t\t\tdateArr.push({\r\n\t\t\t\tdate: i,\r\n\t\t\t\tmonth: Number(full.month) + 1,\r\n\t\t\t\tlunar: this.getlunar(full.year, Number(full.month) + 1, i),\r\n\t\t\t\tdisable: true\r\n\t\t\t})\r\n\t\t}\r\n\t\treturn dateArr\r\n\t}\r\n\t/**\r\n\t * 设置日期\r\n\t * @param {Object} date\r\n\t */\r\n\tsetDate(date) {\r\n\t\tthis._getWeek(date)\r\n\t}\r\n\t/**\r\n\t * 获取当前日期详情\r\n\t * @param {Object} date\r\n\t */\r\n\tgetInfo(date) {\r\n\t\tif (!date) {\r\n\t\t\tdate = new Date()\r\n\t\t}\r\n\t\tconst dateInfo = this.canlender.find(item => item.fullDate === this.getDate(date).fullDate)\r\n\t\treturn dateInfo\r\n\t}\r\n\r\n\t/**\r\n\t * 比较时间大小\r\n\t */\r\n\tdateCompare(startDate, endDate) {\r\n\t\t// 计算截止时间\r\n\t\tstartDate = new Date(startDate.replace('-', '/').replace('-', '/'))\r\n\t\t// 计算详细项的截止时间\r\n\t\tendDate = new Date(endDate.replace('-', '/').replace('-', '/'))\r\n\t\tif (startDate <= endDate) {\r\n\t\t\treturn true\r\n\t\t} else {\r\n\t\t\treturn false\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * 比较时间是否相等\r\n\t */\r\n\tdateEqual(before, after) {\r\n\t\t// 计算截止时间\r\n\t\tbefore = new Date(before.replace('-', '/').replace('-', '/'))\r\n\t\t// 计算详细项的截止时间\r\n\t\tafter = new Date(after.replace('-', '/').replace('-', '/'))\r\n\t\tif (before.getTime() - after.getTime() === 0) {\r\n\t\t\treturn true\r\n\t\t} else {\r\n\t\t\treturn false\r\n\t\t}\r\n\t}\r\n\r\n\r\n\t/**\r\n\t * 获取日期范围内所有日期\r\n\t * @param {Object} begin\r\n\t * @param {Object} end\r\n\t */\r\n\tgeDateAll(begin, end) {\r\n\t\tvar arr = []\r\n\t\tvar ab = begin.split('-')\r\n\t\tvar ae = end.split('-')\r\n\t\tvar db = new Date()\r\n\t\tdb.setFullYear(ab[0], ab[1] - 1, ab[2])\r\n\t\tvar de = new Date()\r\n\t\tde.setFullYear(ae[0], ae[1] - 1, ae[2])\r\n\t\tvar unixDb = db.getTime() - 24 * 60 * 60 * 1000\r\n\t\tvar unixDe = de.getTime() - 24 * 60 * 60 * 1000\r\n\t\tfor (var k = unixDb; k <= unixDe;) {\r\n\t\t\tk = k + 24 * 60 * 60 * 1000\r\n\t\t\tarr.push(this.getDate(new Date(parseInt(k))).fullDate)\r\n\t\t}\r\n\t\treturn arr\r\n\t}\r\n\t/**\r\n\t * 计算阴历日期显示\r\n\t */\r\n\tgetlunar(year, month, date) {\r\n\t\treturn CALENDAR.solar2lunar(year, month, date)\r\n\t}\r\n\t/**\r\n\t * 设置打点\r\n\t */\r\n\tsetSelectInfo(data, value) {\r\n\t\tthis.selected = value\n\t\tthis._getWeek(data)\r\n\t}\r\n\r\n\t/**\r\n\t *  获取多选状态\r\n\t */\r\n\tsetMultiple(fullDate) {\r\n\t\tlet {\r\n\t\t\tbefore,\r\n\t\t\tafter\r\n\t\t} = this.multipleStatus\r\n\t\tif (!this.range) return\r\n\t\tif (before && after) {\r\n\t\t\tthis.multipleStatus.before = ''\r\n\t\t\tthis.multipleStatus.after = ''\r\n\t\t\tthis.multipleStatus.data = []\r\n\t\t\tthis._getWeek(fullDate)\r\n\t\t} else {\r\n\t\t\tif (!before) {\r\n\t\t\t\tthis.multipleStatus.before = fullDate\r\n\t\t\t} else {\r\n\t\t\t\tthis.multipleStatus.after = fullDate\r\n\t\t\t\tif (this.dateCompare(this.multipleStatus.before, this.multipleStatus.after)) {\r\n\t\t\t\t\tthis.multipleStatus.data = this.geDateAll(this.multipleStatus.before, this.multipleStatus.after);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.multipleStatus.data = this.geDateAll(this.multipleStatus.after, this.multipleStatus.before);\r\n\t\t\t\t}\r\n\t\t\t\tthis._getWeek(fullDate)\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * 获取每周数据\r\n\t * @param {Object} dateData\r\n\t */\r\n\t_getWeek(dateData) {\r\n\t\tconst {\r\n\t\t\tfullDate,\r\n\t\t\tyear,\r\n\t\t\tmonth,\r\n\t\t\tdate,\r\n\t\t\tday\r\n\t\t} = this.getDate(dateData)\r\n\t\tlet firstDay = new Date(year, month - 1, 1).getDay()\r\n\t\tlet currentDay = new Date(year, month, 0).getDate()\r\n\t\tlet dates = {\r\n\t\t\tlastMonthDays: this._getLastMonthDays(firstDay, this.getDate(dateData)), // 上个月末尾几天\r\n\t\t\tcurrentMonthDys: this._currentMonthDys(currentDay, this.getDate(dateData)), // 本月天数\r\n\t\t\tnextMonthDays: [], // 下个月开始几天\r\n\t\t\tweeks: []\r\n\t\t}\r\n\t\tlet canlender = []\r\n\t\tconst surplus = 42 - (dates.lastMonthDays.length + dates.currentMonthDys.length)\r\n\t\tdates.nextMonthDays = this._getNextMonthDays(surplus, this.getDate(dateData))\r\n\t\tcanlender = canlender.concat(dates.lastMonthDays, dates.currentMonthDys, dates.nextMonthDays)\r\n\t\tlet weeks = {}\r\n\t\t// 拼接数组  上个月开始几天 + 本月天数+ 下个月开始几天\r\n\t\tfor (let i = 0; i < canlender.length; i++) {\r\n\t\t\tif (i % 7 === 0) {\r\n\t\t\t\tweeks[parseInt(i / 7)] = new Array(7)\r\n\t\t\t}\r\n\t\t\tweeks[parseInt(i / 7)][i % 7] = canlender[i]\r\n\t\t}\r\n\t\tthis.canlender = canlender\r\n\t\tthis.weeks = weeks\r\n\t}\r\n\r\n\t//静态方法\r\n\t// static init(date) {\r\n\t// \tif (!this.instance) {\r\n\t// \t\tthis.instance = new Calendar(date);\r\n\t// \t}\r\n\t// \treturn this.instance;\r\n\t// }\r\n}\r\n\r\n\r\nexport default Calendar\n"]}