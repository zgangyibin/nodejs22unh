{"version":3,"sources":["../../../../../src/views/admin/src/utils/utils.js"],"names":["isAuth","getCurDateTime","getCurDate","tableName","key","role","storage","get","menus","menu","list","i","length","roleName","j","backMenu","k","child","buttons","join","indexOf","currentTime","Date","year","getFullYear","month","getMonth","day","getDate","hour","getHours","minute","getMinutes","second","getSeconds"],"mappings":";;;;;QAMgBA,M,GAAAA,M;QAkCAC,c,GAAAA,c;QAcAC,U,GAAAA,U;;AAtDhB;;;;AACA;;;;;;AACA;;;;AAIO,SAASF,MAAT,CAAgBG,SAAhB,EAA0BC,GAA1B,EAA+B;AAClC,QAAIC,OAAOC,kBAAQC,GAAR,CAAY,MAAZ,CAAX;AACA,QAAG,CAACF,IAAJ,EAAS;AACLA,eAAO,KAAP;AACH;AACD,QAAIG,QAAQC,eAAKC,IAAL,EAAZ;AACA,SAAI,IAAIC,IAAE,CAAV,EAAYA,IAAEH,MAAMI,MAApB,EAA2BD,GAA3B,EAA+B;AAC3B,YAAGH,MAAMG,CAAN,EAASE,QAAT,IAAmBR,IAAtB,EAA2B;AACvB,iBAAI,IAAIS,IAAE,CAAV,EAAYA,IAAEN,MAAMG,CAAN,EAASI,QAAT,CAAkBH,MAAhC,EAAuCE,GAAvC,EAA2C;AACvC,qBAAI,IAAIE,IAAE,CAAV,EAAYA,IAAER,MAAMG,CAAN,EAASI,QAAT,CAAkBD,CAAlB,EAAqBG,KAArB,CAA2BL,MAAzC,EAAgDI,GAAhD,EAAoD;AAChD,wBAAGb,aAAWK,MAAMG,CAAN,EAASI,QAAT,CAAkBD,CAAlB,EAAqBG,KAArB,CAA2BD,CAA3B,EAA8Bb,SAA5C,EAAsD;AAClD,4BAAIe,UAAUV,MAAMG,CAAN,EAASI,QAAT,CAAkBD,CAAlB,EAAqBG,KAArB,CAA2BD,CAA3B,EAA8BE,OAA9B,CAAsCC,IAAtC,CAA2C,GAA3C,CAAd;AACA,+BAAOD,QAAQE,OAAR,CAAgBhB,GAAhB,MAAyB,CAAC,CAA1B,IAA+B,KAAtC;AACH;AACJ;AACJ;AACJ;AACJ;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAO,KAAP;AACH;;AAED;;;AAGO,SAASH,cAAT,GAA0B;AAC7B,QAAIoB,cAAc,IAAIC,IAAJ,EAAlB;AAAA,QACAC,OAAOF,YAAYG,WAAZ,EADP;AAAA,QAEAC,QAAQJ,YAAYK,QAAZ,KAAyB,CAAzB,GAA6B,EAA7B,GAAkC,OAAOL,YAAYK,QAAZ,KAAyB,CAAhC,CAAlC,GAAuEL,YAAYK,QAAZ,KAAyB,CAFxG;AAAA,QAGAC,MAAMN,YAAYO,OAAZ,KAAwB,EAAxB,GAA6B,MAAMP,YAAYO,OAAZ,EAAnC,GAA2DP,YAAYO,OAAZ,EAHjE;AAAA,QAIAC,OAAOR,YAAYS,QAAZ,EAJP;AAAA,QAKAC,SAASV,YAAYW,UAAZ,EALT;AAAA,QAMAC,SAASZ,YAAYa,UAAZ,EANT;AAOA,WAAOX,OAAO,GAAP,GAAaE,KAAb,GAAqB,GAArB,GAA2BE,GAA3B,GAAiC,GAAjC,GAAsCE,IAAtC,GAA4C,GAA5C,GAAiDE,MAAjD,GAAwD,GAAxD,GAA4DE,MAAnE;AACH;;AAED;;;AAGO,SAAS/B,UAAT,GAAsB;AACzB,QAAImB,cAAc,IAAIC,IAAJ,EAAlB;AAAA,QACAC,OAAOF,YAAYG,WAAZ,EADP;AAAA,QAEAC,QAAQJ,YAAYK,QAAZ,KAAyB,CAAzB,GAA6B,EAA7B,GAAkC,OAAOL,YAAYK,QAAZ,KAAyB,CAAhC,CAAlC,GAAuEL,YAAYK,QAAZ,KAAyB,CAFxG;AAAA,QAGAC,MAAMN,YAAYO,OAAZ,KAAwB,EAAxB,GAA6B,MAAMP,YAAYO,OAAZ,EAAnC,GAA2DP,YAAYO,OAAZ,EAHjE;AAIA,WAAOL,OAAO,GAAP,GAAaE,KAAb,GAAqB,GAArB,GAA2BE,GAAlC;AACH","file":"utils.js","sourcesContent":["import storage from './storage';\r\nimport menu from './menu';\r\n/**\r\n * 是否有权限\r\n * @param {*} key\r\n */\r\nexport function isAuth(tableName,key) {\r\n    let role = storage.get(\"role\");\r\n    if(!role){\r\n        role = '管理员';\r\n    }\r\n    let menus = menu.list();\r\n    for(let i=0;i<menus.length;i++){\r\n        if(menus[i].roleName==role){\r\n            for(let j=0;j<menus[i].backMenu.length;j++){\r\n                for(let k=0;k<menus[i].backMenu[j].child.length;k++){\r\n                    if(tableName==menus[i].backMenu[j].child[k].tableName){\r\n                        let buttons = menus[i].backMenu[j].child[k].buttons.join(',');\r\n                        return buttons.indexOf(key) !== -1 || false\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    // for(let i=0;i<menus.length;i++){\r\n    //     if(menus[i].roleName==role){\r\n    //         for(let j=0;j<menus[i].backMenu.length;j++){\r\n    //             if(menus[i].backMenu[j].tableName==tableName){\r\n    //                 let buttons = menus[i].backMenu[j].child[0].buttons.join(',');\r\n    //                 return buttons.indexOf(key) !== -1 || false\r\n    //             }\r\n    //         }\r\n    //     }\r\n    // }\r\n    return false;\r\n}\r\n\r\n/**\r\n *  * 获取当前时间（yyyy-MM-dd hh:mm:ss）\r\n *   */\r\nexport function getCurDateTime() {\r\n    let currentTime = new Date(),\r\n    year = currentTime.getFullYear(),\r\n    month = currentTime.getMonth() + 1 < 10 ? '0' + (currentTime.getMonth() + 1) : currentTime.getMonth() + 1,\r\n    day = currentTime.getDate() < 10 ? '0' + currentTime.getDate() : currentTime.getDate(),\r\n    hour = currentTime.getHours(),\r\n    minute = currentTime.getMinutes(),\r\n    second = currentTime.getSeconds();\r\n    return year + \"-\" + month + \"-\" + day + \" \" +hour +\":\" +minute+\":\"+second;\r\n}\r\n\r\n/**\r\n *  * 获取当前日期（yyyy-MM-dd）\r\n *   */\r\nexport function getCurDate() {\r\n    let currentTime = new Date(),\r\n    year = currentTime.getFullYear(),\r\n    month = currentTime.getMonth() + 1 < 10 ? '0' + (currentTime.getMonth() + 1) : currentTime.getMonth() + 1,\r\n    day = currentTime.getDate() < 10 ? '0' + currentTime.getDate() : currentTime.getDate();\r\n    return year + \"-\" + month + \"-\" + day;\r\n}\r\n"]}