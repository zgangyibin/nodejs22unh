{"version":3,"sources":["../../src/api/Yingpinxinxi.js"],"names":["config","db","api","get","req","res","page","parseInt","query","limit","sort","order","where","gangweimingcheng","indexOf","Op","like","eq","tupian","zhiweileibie","gongzidaiyu","shangbanshijian","nianlingyaoqiu","xueliyaoqiu","qiyezhanghao","qiyemingcheng","gerenjianli","qiuzhishijian","beizhu","xuehao","xueshengxingming","shoujihaoma","crossuserid","crossrefid","sfsh","shhf","userid","tableName","session","userinfo","undefined","jwt","decode","headers","token","username","YingpinxinxiModel","findAndCountAll","offset","result","currPage","pageSize","toRes","post","Object","keys","body","forEach","item","id","create","update","destroy","in","all","findOne","params","record","sql","type","remindstart","columnName","remindend","remindStart","util","getDateTimeFormat","Number","remindEnd","sequelize","plain","raw","QueryTypes","SELECT","results","count","xColumnName","yColumnName","timeStatType","role","dbConnection","dbtype","toLowerCase"],"mappings":"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","file":"Yingpinxinxi.js","sourcesContent":["import { Router } from 'express'\r\nimport { Op, QueryTypes } from 'sequelize'\r\nimport sequelize from '../models/sequelize'\r\nimport toRes from '../lib/toRes'\r\nimport YingpinxinxiModel from '../models/YingpinxinxiModel'\r\nimport util from '../lib/util'\r\nimport jwt from 'jsonwebtoken'\r\n\r\nexport default ({ config, db }) => {\r\n\tlet api = Router()\r\n\r\n\r\n\t// 分页接口（后端）\r\n\tapi.get('/page', async (req, res) => {\r\n\r\n\t\ttry {\r\n\r\n\t\t\tlet page = parseInt(req.query.page) || 1\r\n\t\t\tlet limit = parseInt(req.query.limit) || 10\r\n\t\t\tlet sort = req.query.sort || 'id'\r\n\t\t\tlet order = req.query.order || 'asc'\r\n\r\n\t\t\tlet where = {}\r\n\t\t\tlet gangweimingcheng = req.query.gangweimingcheng\r\n\t\t\tif (gangweimingcheng) {//岗位名称\r\n\r\n\t\t\t\tif (gangweimingcheng.indexOf('%') != -1) {\r\n\t\t\t\t\twhere.gangweimingcheng = {\r\n\t\t\t\t\t\t[Op.like]: gangweimingcheng\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\twhere.gangweimingcheng = {\r\n\t\t\t\t\t\t[Op.eq]: gangweimingcheng\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tlet tupian = req.query.tupian\r\n\t\t\tif (tupian) {//图片\r\n\r\n\t\t\t\tif (tupian.indexOf('%') != -1) {\r\n\t\t\t\t\twhere.tupian = {\r\n\t\t\t\t\t\t[Op.like]: tupian\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\twhere.tupian = {\r\n\t\t\t\t\t\t[Op.eq]: tupian\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tlet zhiweileibie = req.query.zhiweileibie\r\n\t\t\tif (zhiweileibie) {//职位类别\r\n\r\n\t\t\t\tif (zhiweileibie.indexOf('%') != -1) {\r\n\t\t\t\t\twhere.zhiweileibie = {\r\n\t\t\t\t\t\t[Op.like]: zhiweileibie\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\twhere.zhiweileibie = {\r\n\t\t\t\t\t\t[Op.eq]: zhiweileibie\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tlet gongzidaiyu = req.query.gongzidaiyu\r\n\t\t\tif (gongzidaiyu) {//工资待遇\r\n\r\n\t\t\t\tif (gongzidaiyu.indexOf('%') != -1) {\r\n\t\t\t\t\twhere.gongzidaiyu = {\r\n\t\t\t\t\t\t[Op.like]: gongzidaiyu\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\twhere.gongzidaiyu = {\r\n\t\t\t\t\t\t[Op.eq]: gongzidaiyu\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tlet shangbanshijian = req.query.shangbanshijian\r\n\t\t\tif (shangbanshijian) {//上班时间\r\n\r\n\t\t\t\tif (shangbanshijian.indexOf('%') != -1) {\r\n\t\t\t\t\twhere.shangbanshijian = {\r\n\t\t\t\t\t\t[Op.like]: shangbanshijian\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\twhere.shangbanshijian = {\r\n\t\t\t\t\t\t[Op.eq]: shangbanshijian\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tlet nianlingyaoqiu = req.query.nianlingyaoqiu\r\n\t\t\tif (nianlingyaoqiu) {//年龄要求\r\n\r\n\t\t\t\tif (nianlingyaoqiu.indexOf('%') != -1) {\r\n\t\t\t\t\twhere.nianlingyaoqiu = {\r\n\t\t\t\t\t\t[Op.like]: nianlingyaoqiu\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\twhere.nianlingyaoqiu = {\r\n\t\t\t\t\t\t[Op.eq]: nianlingyaoqiu\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tlet xueliyaoqiu = req.query.xueliyaoqiu\r\n\t\t\tif (xueliyaoqiu) {//学历要求\r\n\r\n\t\t\t\tif (xueliyaoqiu.indexOf('%') != -1) {\r\n\t\t\t\t\twhere.xueliyaoqiu = {\r\n\t\t\t\t\t\t[Op.like]: xueliyaoqiu\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\twhere.xueliyaoqiu = {\r\n\t\t\t\t\t\t[Op.eq]: xueliyaoqiu\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tlet qiyezhanghao = req.query.qiyezhanghao\r\n\t\t\tif (qiyezhanghao) {//企业账号\r\n\r\n\t\t\t\tif (qiyezhanghao.indexOf('%') != -1) {\r\n\t\t\t\t\twhere.qiyezhanghao = {\r\n\t\t\t\t\t\t[Op.like]: qiyezhanghao\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\twhere.qiyezhanghao = {\r\n\t\t\t\t\t\t[Op.eq]: qiyezhanghao\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tlet qiyemingcheng = req.query.qiyemingcheng\r\n\t\t\tif (qiyemingcheng) {//企业名称\r\n\r\n\t\t\t\tif (qiyemingcheng.indexOf('%') != -1) {\r\n\t\t\t\t\twhere.qiyemingcheng = {\r\n\t\t\t\t\t\t[Op.like]: qiyemingcheng\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\twhere.qiyemingcheng = {\r\n\t\t\t\t\t\t[Op.eq]: qiyemingcheng\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tlet gerenjianli = req.query.gerenjianli\r\n\t\t\tif (gerenjianli) {//个人简历\r\n\r\n\t\t\t\tif (gerenjianli.indexOf('%') != -1) {\r\n\t\t\t\t\twhere.gerenjianli = {\r\n\t\t\t\t\t\t[Op.like]: gerenjianli\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\twhere.gerenjianli = {\r\n\t\t\t\t\t\t[Op.eq]: gerenjianli\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tlet qiuzhishijian = req.query.qiuzhishijian\r\n\t\t\tif (qiuzhishijian) {//求职时间\r\n\r\n\t\t\t\tif (qiuzhishijian.indexOf('%') != -1) {\r\n\t\t\t\t\twhere.qiuzhishijian = {\r\n\t\t\t\t\t\t[Op.like]: qiuzhishijian\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\twhere.qiuzhishijian = {\r\n\t\t\t\t\t\t[Op.eq]: qiuzhishijian\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tlet beizhu = req.query.beizhu\r\n\t\t\tif (beizhu) {//备注\r\n\r\n\t\t\t\tif (beizhu.indexOf('%') != -1) {\r\n\t\t\t\t\twhere.beizhu = {\r\n\t\t\t\t\t\t[Op.like]: beizhu\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\twhere.beizhu = {\r\n\t\t\t\t\t\t[Op.eq]: beizhu\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tlet xuehao = req.query.xuehao\r\n\t\t\tif (xuehao) {//学号\r\n\r\n\t\t\t\tif (xuehao.indexOf('%') != -1) {\r\n\t\t\t\t\twhere.xuehao = {\r\n\t\t\t\t\t\t[Op.like]: xuehao\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\twhere.xuehao = {\r\n\t\t\t\t\t\t[Op.eq]: xuehao\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tlet xueshengxingming = req.query.xueshengxingming\r\n\t\t\tif (xueshengxingming) {//学生姓名\r\n\r\n\t\t\t\tif (xueshengxingming.indexOf('%') != -1) {\r\n\t\t\t\t\twhere.xueshengxingming = {\r\n\t\t\t\t\t\t[Op.like]: xueshengxingming\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\twhere.xueshengxingming = {\r\n\t\t\t\t\t\t[Op.eq]: xueshengxingming\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tlet shoujihaoma = req.query.shoujihaoma\r\n\t\t\tif (shoujihaoma) {//学生手机号码\r\n\r\n\t\t\t\tif (shoujihaoma.indexOf('%') != -1) {\r\n\t\t\t\t\twhere.shoujihaoma = {\r\n\t\t\t\t\t\t[Op.like]: shoujihaoma\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\twhere.shoujihaoma = {\r\n\t\t\t\t\t\t[Op.eq]: shoujihaoma\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tlet crossuserid = req.query.crossuserid\r\n\t\t\tif (crossuserid) {//跨表用户id\r\n\r\n\t\t\t\tif (crossuserid.indexOf('%') != -1) {\r\n\t\t\t\t\twhere.crossuserid = {\r\n\t\t\t\t\t\t[Op.like]: crossuserid\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\twhere.crossuserid = {\r\n\t\t\t\t\t\t[Op.eq]: crossuserid\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tlet crossrefid = req.query.crossrefid\r\n\t\t\tif (crossrefid) {//跨表岗位id\r\n\r\n\t\t\t\tif (crossrefid.indexOf('%') != -1) {\r\n\t\t\t\t\twhere.crossrefid = {\r\n\t\t\t\t\t\t[Op.like]: crossrefid\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\twhere.crossrefid = {\r\n\t\t\t\t\t\t[Op.eq]: crossrefid\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tlet sfsh = req.query.sfsh\r\n\t\t\tif (sfsh) {//审核\r\n\r\n\t\t\t\tif (sfsh.indexOf('%') != -1) {\r\n\t\t\t\t\twhere.sfsh = {\r\n\t\t\t\t\t\t[Op.like]: sfsh\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\twhere.sfsh = {\r\n\t\t\t\t\t\t[Op.eq]: sfsh\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tlet shhf = req.query.shhf\r\n\t\t\tif (shhf) {//审核回复\r\n\r\n\t\t\t\tif (shhf.indexOf('%') != -1) {\r\n\t\t\t\t\twhere.shhf = {\r\n\t\t\t\t\t\t[Op.like]: shhf\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\twhere.shhf = {\r\n\t\t\t\t\t\t[Op.eq]: shhf\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tlet userid = req.query.userid\r\n\t\t\tif (userid) {//用户id\r\n\r\n\t\t\t\tif (userid.indexOf('%') != -1) {\r\n\t\t\t\t\twhere.userid = {\r\n\t\t\t\t\t\t[Op.like]: userid\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\twhere.userid = {\r\n\t\t\t\t\t\t[Op.eq]: userid\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tlet tableName = req.session.userinfo === undefined ? jwt.decode(req.headers.token).tableName : req.session.userinfo.tableName\r\n\t\t\tif(tableName == 'qiye') {\r\n\t\t\t\twhere.qiyezhanghao = {\r\n\t\t\t\t\t[Op.eq]: req.session.userinfo === undefined ? jwt.decode(req.headers.token).username : req.session.userinfo.qiyezhanghao\r\n\t\t\t\t}\r\n\t\t\t\tif (where['userid'] != undefined) {\r\n\t\t\t\t\tdelete where.userid\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif(tableName == 'xuesheng') {\r\n\t\t\t\twhere.xuehao = {\r\n\t\t\t\t\t[Op.eq]: req.session.userinfo === undefined ? jwt.decode(req.headers.token).username : req.session.userinfo.xuehao\r\n\t\t\t\t}\r\n\t\t\t\tif (where['userid'] != undefined) {\r\n\t\t\t\t\tdelete where.userid\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tlet result = await YingpinxinxiModel.findAndCountAll({\r\n\t\t\t\torder: [[sort, order]],\r\n\t\t\t\twhere,\r\n\t\t\t\toffset: (page - 1) * limit,\r\n\t\t\t\tlimit\r\n\t\t\t})\r\n\t\t\t\r\n\t\t\tresult.currPage = page\r\n\t\t\tresult.pageSize = limit\r\n\r\n\t\t\ttoRes.page(res, 0, result)\r\n\t\t} catch(err) {\r\n\r\n\t\t\ttoRes.session(res, 500, '服务器错误！', '', 500)\r\n\t\t}\r\n\t})\r\n\r\n    // 分页接口（前端）\r\n\tapi.get('/list', async (req, res) => {\r\n\r\n\t\ttry {\r\n\r\n\t\t\tlet page = parseInt(req.query.page) || 1\r\n\t\t\tlet limit = parseInt(req.query.limit) || 10\r\n\t\t\tlet sort = req.query.sort || 'id'\r\n\t\t\tlet order = req.query.order || 'asc'\r\n\r\n\t\t\tlet where = {}\r\n\t\t\tlet crossuserid = req.query.crossuserid\r\n\t\t\tif (crossuserid) {\r\n\t\t\t\twhere.crossuserid = {\r\n\t\t\t\t\t[Op.eq]: crossuserid\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tlet crossrefid = req.query.crossrefid\r\n\t\t\tif (crossrefid) {\r\n\t\t\t\twhere.crossrefid = {\r\n\t\t\t\t\t[Op.eq]: crossrefid\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tlet sfsh = req.query.sfsh\r\n\t\t\tif (sfsh) {\r\n\t\t\t\twhere.sfsh = {\r\n\t\t\t\t\t[Op.eq]: sfsh\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tlet gangweimingcheng = req.query.gangweimingcheng\r\n\t\t\tif (gangweimingcheng) {\r\n\r\n\t\t\t\tif (gangweimingcheng.indexOf('%') != -1) {\r\n\t\t\t\t\twhere.gangweimingcheng = {\r\n\t\t\t\t\t\t[Op.like]: gangweimingcheng\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\twhere.gangweimingcheng = {\r\n\t\t\t\t\t\t[Op.eq]: gangweimingcheng\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tlet zhiweileibie = req.query.zhiweileibie\r\n\t\t\tif (zhiweileibie) {\r\n\r\n\t\t\t\tif (zhiweileibie.indexOf('%') != -1) {\r\n\t\t\t\t\twhere.zhiweileibie = {\r\n\t\t\t\t\t\t[Op.like]: zhiweileibie\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\twhere.zhiweileibie = {\r\n\t\t\t\t\t\t[Op.eq]: zhiweileibie\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tlet qiyemingcheng = req.query.qiyemingcheng\r\n\t\t\tif (qiyemingcheng) {\r\n\r\n\t\t\t\tif (qiyemingcheng.indexOf('%') != -1) {\r\n\t\t\t\t\twhere.qiyemingcheng = {\r\n\t\t\t\t\t\t[Op.like]: qiyemingcheng\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\twhere.qiyemingcheng = {\r\n\t\t\t\t\t\t[Op.eq]: qiyemingcheng\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tlet xueshengxingming = req.query.xueshengxingming\r\n\t\t\tif (xueshengxingming) {\r\n\r\n\t\t\t\tif (xueshengxingming.indexOf('%') != -1) {\r\n\t\t\t\t\twhere.xueshengxingming = {\r\n\t\t\t\t\t\t[Op.like]: xueshengxingming\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\twhere.xueshengxingming = {\r\n\t\t\t\t\t\t[Op.eq]: xueshengxingming\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tlet tableName = req.session.userinfo === undefined ? jwt.decode(req.headers.token).tableName : req.session.userinfo.tableName\r\n\t\t\tif(tableName == 'qiye') {\r\n\t\t\t\twhere.qiyezhanghao = {\r\n\t\t\t\t\t[Op.eq]: req.session.userinfo === undefined ? jwt.decode(req.headers.token).username : req.session.userinfo.qiyezhanghao\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif(tableName == 'xuesheng') {\r\n\t\t\t\twhere.xuehao = {\r\n\t\t\t\t\t[Op.eq]: req.session.userinfo === undefined ? jwt.decode(req.headers.token).username : req.session.userinfo.xuehao\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tlet result = await YingpinxinxiModel.findAndCountAll({\r\n\t\t\t\torder: [[sort, order]],\r\n\t\t\t\twhere,\r\n\t\t\t\toffset: (page - 1) * limit,\r\n\t\t\t\tlimit\r\n\t\t\t})\r\n\t\t\t\r\n\t\t\tresult.currPage = page\r\n\t\t\tresult.pageSize = limit\r\n\r\n\t\t\ttoRes.page(res, 0, result)\r\n\t\t} catch(err) {\r\n\t\t\ttoRes.session(res, 401, '您的权限不够！', '', 200)\r\n\t\t}\r\n\t})\r\n\r\n\r\n\t// 保存接口（后端）\r\n\tapi.post('/save', async (req, res) => {\r\n\r\n\t\ttry {\r\n\r\n\t\t\tObject.keys(req.body).forEach(item=>{\r\n\t\t\t\tif(req.body[item] == '')  delete req.body[item]\r\n\t\t\t})\r\n\r\n\t\t\tif (!req.body.userid) {\r\n\t\t\t\treq.body.userid = req.session.userinfo === undefined ? jwt.decode(req.headers.token).id : req.session.userinfo.id\r\n\t\t\t}\r\n\r\n\t\t\tconst userinfo = await YingpinxinxiModel.create(req.body)\r\n\r\n\t\t\tif (userinfo === null) {\r\n\t\t\t\ttoRes.session(res, -1, '添加失败！')\r\n\t\t\t} else {\r\n\t\t\t\ttoRes.session(res, 0, '添加成功！')\r\n\t\t\t}\r\n\t\t} catch(err) {\r\n\t\t\ttoRes.session(res, 500, '服务器错误！', '', 500)\r\n\t\t}\r\n\t})\r\n\r\n    // 保存接口（前端）\r\n\tapi.post('/add', async (req, res) => {\r\n\r\n\t\ttry {\r\n\r\n\t\t\tObject.keys(req.body).forEach(item=>{\r\n\t\t\t\tif(req.body[item] == '')  delete req.body[item]\r\n\t\t\t})\r\n\r\n\t\t\tif (jwt.decode(req.headers.token) == null) {\r\n\t\t\t\ttoRes.session(res, 401, '请登录后再操作', '', 401)\r\n\t\t\t}\r\n\r\n\t\t\treq.body.userid = req.session.userinfo === undefined ? jwt.decode(req.headers.token).id : req.session.userinfo.id\r\n\r\n\t\t\tconst userinfo = await YingpinxinxiModel.create(req.body)\r\n\r\n\t\t\tif (userinfo === null) {\r\n\t\t\t\ttoRes.session(res, -1, '添加失败！')\r\n\t\t\t} else {\r\n\t\t\t\ttoRes.session(res, 0, '添加成功！')\r\n\t\t\t}\r\n\t\t} catch(err) {\r\n\t\t\ttoRes.session(res, 500, '服务器错误！', '', 500)\r\n\t\t}\r\n\t})\r\n\r\n\t// 更新接口\r\n\tapi.post('/update', async (req, res) => {\r\n\r\n\t\ttry {\r\n\r\n\t\t\tawait YingpinxinxiModel.update(req.body, {\r\n\t\t\t\twhere: {\r\n\t\t\t\t  id: req.body.id || 0\r\n\t\t\t\t}\r\n\t\t\t})\r\n\r\n\t\t\ttoRes.session(res, 0, '编辑成功！')\r\n\t\t} catch(err) {\r\n\t\t\ttoRes.session(res, 500, '服务器错误！', '', 500)\r\n\t\t}\r\n\t})\r\n\r\n\t// 删除接口\r\n\tapi.post('/delete', async (req, res) => {\r\n\r\n\t\ttry {\r\n\r\n\t\t\tawait YingpinxinxiModel.destroy({\r\n\t\t\t\twhere: {\r\n\t\t\t\t  id: {\r\n\t\t\t\t\t[Op.in]: req.body\r\n\t\t\t\t  }\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\ttoRes.session(res, 0, '删除成功！')\r\n\t\t} catch(err) {\r\n\t\t\ttoRes.session(res, 500, '服务器错误！', '', 500)\r\n\t\t}\r\n\t})\r\n\r\n\t// 详情接口（后端）\r\n\tapi.all('/info/:id', async (req, res) => {\r\n\r\n\t\ttry {\r\n\t\t\ttoRes.record(res, 0, await YingpinxinxiModel.findOne({ where: { id: req.params.id } }))\r\n\t\t} catch(err) {\r\n\t\t\ttoRes.session(res, 500, '服务器错误！', '', 500)\r\n\t\t}\r\n\t})\r\n\r\n    // 详情接口（前端）\r\n\tapi.all('/detail/:id', async (req, res) => {\r\n\r\n\t\ttry {\r\n\t\t\ttoRes.record(res, 0, await YingpinxinxiModel.findOne({ where: { id: req.params.id } }))\r\n\t\t} catch(err) {\r\n\t\t\ttoRes.session(res, 500, '服务器错误！', '', 500)\r\n\t\t}\r\n\t})\r\n\r\n\t// 获取需要提醒的记录数接口\r\n\tapi.get('/remind/:columnName/:type', async (req, res) => {\r\n\r\n\t\ttry {\r\n\r\n\t\t\tlet sql = 'SELECT 0 AS count'\r\n\t\t\t\r\n\t\t\tif (req.params.type == 1) {\r\n\t\t\t\tif (req.query.remindstart) sql = \"SELECT COUNT(*) AS count FROM yingpinxinxi WHERE \" + req.params.columnName + \" >= '\" + req.query.remindstart + \"'\"\r\n\t\t\t\tif (req.query.remindend) sql = \"SELECT COUNT(*) AS count FROM yingpinxinxi WHERE \" + req.params.columnName + \" <= '\" + req.query.remindend + \"'\"\r\n\r\n\t\t\t\tif (req.query.remindstart && req.query.remindend) {\r\n\t\t\t\t\tsql = \"SELECT COUNT(*) AS count FROM yingpinxinxi WHERE \" + req.params.columnName + \" >= '\" + req.query.remindstart + \"' AND \" + req.params.columnName + \" <= '\" + req.query.remindend + \"'\"\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (req.params.type == 2) {\r\n\t\t\t\tif (req.query.remindstart) {\r\n\t\t\t\t\tlet remindStart = util.getDateTimeFormat(0 + Number(req.query.remindstart), \"yyyy-MM-dd\")\r\n\t\t\t\t\tsql = \"SELECT COUNT(*) AS count FROM yingpinxinxi WHERE \" + req.params.columnName + \" >= '\" + remindStart + \"'\"\r\n\t\t\t\t}\r\n\t\t\t\tif (req.query.remindend) {\r\n\t\t\t\t\tlet remindEnd = util.getDateTimeFormat(req.query.remindend, \"yyyy-MM-dd\")\r\n\t\t\t\t\tsql = \"SELECT COUNT(*) AS count FROM yingpinxinxi WHERE \" + req.params.columnName + \" <= '\" + remindEnd + \"'\"\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (req.query.remindstart && req.query.remindend) {\r\n\t\t\t\t\tlet remindStart = util.getDateTimeFormat(0 + Number(req.query.remindstart), \"yyyy-MM-dd\")\r\n\t\t\t\t\tlet remindEnd = util.getDateTimeFormat(req.query.remindend, \"yyyy-MM-dd\")\r\n\t\t\t\t\tsql = \"SELECT COUNT(*) AS count FROM yingpinxinxi WHERE \" + req.params.columnName + \" >= '\" + remindStart + \"' AND \" + req.params.columnName + \" <= '\" + remindEnd + \"'\"\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tconst results = await sequelize.query(sql, {\r\n\t\t\t\tplain: true,\r\n\t\t\t\traw: true,\r\n\t\t\t\ttype: QueryTypes.SELECT\r\n\t\t\t})\r\n\r\n\t\t\ttoRes.count(res, 0, results.count)\r\n\t\t} catch(err) {\r\n\t\t\t\r\n\t\t\ttoRes.session(res, 500, '服务器错误！', '', 500)\r\n\t\t}\r\n\t})\r\n\r\n\r\n\t// 分组统计接口\r\n\tapi.get('/group/:columnName', async (req, res) => {\r\n\r\n\t\ttry {\r\n\r\n\t\t\tlet sql = \"\"\r\n\t\t\tlet columnName = req.params.columnName\r\n\t\t\tlet where = \" WHERE 1 = 1 \"\r\n\t\t\tlet tableName = req.session.userinfo === undefined ? jwt.decode(req.headers.token).tableName : req.session.userinfo.tableName\r\n\t\t\tif(tableName == 'qiye') {\r\n\t\t\t\twhere += \" AND qiyezhanghao = '\" + jwt.decode(req.headers.token).username + \"' \";\r\n\t\t\t}\r\n\t\t\tif(tableName == 'xuesheng') {\r\n\t\t\t\twhere += \" AND xuehao = '\" + jwt.decode(req.headers.token).username + \"' \";\r\n\t\t\t}\r\n\t\t\tsql = \"SELECT COUNT(*) AS total, \" + columnName + \" FROM yingpinxinxi \" + where + \" GROUP BY \" + columnName + \" LIMIT 10\" \r\n\t\t\ttoRes.record(res, 0, await sequelize.query(sql, {\r\n\t\t\t\tplain: false,\r\n\t\t\t\traw: true,\r\n\t\t\t\ttype: QueryTypes.SELECT\r\n\t\t\t}))\r\n\t\t} catch(err) {\r\n\r\n\t\t\ttoRes.session(res, 500, '服务器错误！', '', 500)\r\n\t\t}\r\n\t})\r\n\r\n\t// 统计指定字段\r\n\tapi.get('/value/:xColumnName/:yColumnName', async (req, res) => {\r\n\r\n\t\ttry {\r\n\r\n\t\t\tlet sql = \"\"\r\n\t\t\tlet xColumnName = req.params.xColumnName\r\n\t\t\tlet yColumnName = req.params.yColumnName\r\n\t\t\tlet where = \" WHERE 1 = 1 \"\r\n\t\t\tlet tableName = req.session.userinfo === undefined ? jwt.decode(req.headers.token).tableName : req.session.userinfo.tableName\r\n\t\t\tif(tableName == 'qiye') {\r\n\t\t\t\twhere += \" AND qiyezhanghao = '\" + jwt.decode(req.headers.token).username + \"' \";\r\n\t\t\t}\r\n\t\t\tif(tableName == 'xuesheng') {\r\n\t\t\t\twhere += \" AND xuehao = '\" + jwt.decode(req.headers.token).username + \"' \";\r\n\t\t\t}\r\n\t\t\tsql = \"SELECT \" + xColumnName + \", SUM(\" + yColumnName + \") AS total FROM yingpinxinxi \" + where + \" GROUP BY \" + xColumnName + \" DESC LIMIT 10\"\r\n\t\t\t\r\n\t\t\ttoRes.record(res, 0, await sequelize.query(sql, {\r\n\t\t\t\tplain: false,\r\n\t\t\t\traw: true,\r\n\t\t\t\ttype: QueryTypes.SELECT\r\n\t\t\t}))\r\n\t\t} catch(err) {\r\n\r\n\t\t\ttoRes.session(res, 500, '服务器错误！', '', 500)\r\n\t\t}\r\n\t})\r\n\r\n\t// 按日期统计\r\n\tapi.get('/value/:xColumnName/:yColumnName/:timeStatType', async (req, res) => {\r\n\r\n\t\ttry {\r\n\t\t\t\r\n\t\t\tlet sql = \"\"\r\n\t\t\tlet xColumnName = req.params.xColumnName\r\n\t\t\tlet yColumnName = req.params.yColumnName\r\n\t\t\tlet timeStatType = req.params.timeStatType\r\n\t\t\tlet tableName = \"yingpinxinxi\"\r\n\t\t\tlet where = \" WHERE 1 = 1 \"\r\n\t\t\tif (jwt.decode(req.headers.token).role != '管理员') {\r\n\t\t\t\twhere += \" AND qiyezhanghao = '\" + jwt.decode(req.headers.token).username + \"' \";\r\n\t\t\t}\r\n\t\t\tif (jwt.decode(req.headers.token).role != '管理员') {\r\n\t\t\t\twhere += \" AND xuehao = '\" + jwt.decode(req.headers.token).username + \"' \";\r\n\t\t\t}\r\n\r\n            if (config.dbConnection.dbtype.toLowerCase() == \"mysql\") {\r\n                if (timeStatType == \"日\")\r\n                    sql = \"SELECT DATE_FORMAT(\" + xColumnName + \", '%Y-%m-%d') \" + xColumnName + \", sum(\" + yColumnName + \") total FROM \" + tableName + where + \" GROUP BY DATE_FORMAT(\" + xColumnName + \", '%Y-%m-%d') LIMIT 10\";\r\n                if (timeStatType == \"月\")\r\n                    sql = \"SELECT DATE_FORMAT(\" + xColumnName + \", '%Y-%m') \" + xColumnName + \", sum(\" + yColumnName + \") total FROM \" + tableName + where + \" GROUP BY DATE_FORMAT(\" + xColumnName + \", '%Y-%m')  LIMIT 10\";\r\n                if (timeStatType == \"年\")\r\n                    sql = \"SELECT DATE_FORMAT(\" + xColumnName + \", '%Y') \" + xColumnName + \", sum(\" + yColumnName + \") total FROM \" + tableName + where + \" GROUP BY DATE_FORMAT(\" + xColumnName + \", '%Y')  LIMIT 10\";\r\n            } else {\r\n                if (timeStatType == \"日\")\r\n                    sql = \"SELECT DATE_FORMAT(VARCHAR(10),\" + xColumnName + \", 120) \" + xColumnName + \", sum(\" + yColumnName + \") total FROM \" + tableName + where + \" GROUP BY DATE_FORMAT(VARCHAR(10),\" + xColumnName + \", 120)  LIMIT 10\";\r\n                if (timeStatType == \"月\")\r\n                    sql = \"SELECT DATE_FORMAT(VARCHAR(7),\" + xColumnName + \", 120) \" + xColumnName + \", sum(\" + yColumnName + \") total FROM \" + tableName + where + \" GROUP BY DATE_FORMAT(VARCHAR(7),\" + xColumnName + \", 120)  LIMIT 10\";\r\n                if (timeStatType == \"年\")\r\n                    sql = \"SELECT DATE_FORMAT(VARCHAR(4),\" + xColumnName + \", 120) \" + xColumnName + \", sum(\" + yColumnName + \") total FROM \" + tableName + where + \" GROUP BY DATE_FORMAT(VARCHAR(4),\" + xColumnName + \", 120)  LIMIT 10\";\r\n            }\r\n\t\t\ttoRes.record(res, 0, await sequelize.query(sql, {\r\n\t\t\t\tplain: false,\r\n\t\t\t\traw: true,\r\n\t\t\t\ttype: QueryTypes.SELECT\r\n\t\t\t}))\r\n\t\t} catch(err) {\r\n\r\n\t\t\ttoRes.session(res, 500, '服务器错误！', '', 500)\r\n\t\t}\r\n\t})\r\n\r\n\treturn api\r\n}\r\n"]}