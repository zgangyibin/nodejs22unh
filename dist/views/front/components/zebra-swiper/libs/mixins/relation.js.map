{"version":3,"sources":["../../../../../../../src/views/front/components/zebra-swiper/libs/mixins/relation.js"],"names":["ChildrenMixin","ParentMixin","parent","options","indexKey","inject","default","mounted","bindRelation","beforeDestroy","children","filter","item","uni","$emit","_uid","beforeUnmount","methods","indexOf","index","provide","created","$off"],"mappings":";;;;;;;;;;;;;;QAAgBA,a,GAAAA,a;QA8CAC,W,GAAAA,W;;;;AA9CT,SAASD,aAAT,CAAuBE,MAAvB,EAA6C;AAAA,KAAdC,OAAc,uEAAJ,EAAI;;AACnD,KAAMC,WAAWD,QAAQC,QAAR,IAAoB,OAArC;AACA,QAAO;AACNC,4CACEH,MADF,EACW;AACTI,YAAS;AADA,GADX,CADM;AAMNC,SANM,qBAMI;AACT,QAAKL,MAAL,GAAc,KAAKA,MAAL,CAAd;AACA,QAAKM,YAAL;AACA,GATK;;AAUN;AACAC,eAXM,2BAWU;AAAA;;AACf,OAAI,KAAKP,MAAT,EAAiB;AAChB,SAAKA,MAAL,CAAYQ,QAAZ,GAAuB,KAAKR,MAAL,CAAYQ,QAAZ,CAAqBC,MAArB,CACtB,UAACC,IAAD;AAAA,YAAUA,SAAS,KAAnB;AAAA,KADsB,CAAvB;AAGAC,QAAIC,KAAJ,CAAU,kBAAkB,KAAKZ,MAAL,CAAYa,IAAxC,EAA8C,IAA9C;AACA;AACD,GAlBK;;AAmBN;AACA;AACAC,eArBM,2BAqBU;AAAA;;AACf,OAAI,KAAKd,MAAT,EAAiB;AAChB,SAAKA,MAAL,CAAYQ,QAAZ,GAAuB,KAAKR,MAAL,CAAYQ,QAAZ,CAAqBC,MAArB,CACtB,UAACC,IAAD;AAAA,YAAUA,SAAS,MAAnB;AAAA,KADsB,CAAvB;AAGAC,QAAIC,KAAJ,CAAU,kBAAkB,KAAKZ,MAAL,CAAYa,IAAxC,EAA8C,IAA9C;AACA;AACD,GA5BK;;AA6BN;AACAE,WAAS;AACRT,eADQ,0BACO;AACd,QAAI,CAAC,KAAKN,MAAN,IAAgB,KAAKA,MAAL,CAAYQ,QAAZ,CAAqBQ,OAArB,CAA6B,IAA7B,MAAuC,CAAC,CAA5D,EAA+D;AAC9D;AACA;AACD,QAAMR,sDAAe,KAAKR,MAAL,CAAYQ,QAA3B,IAAqC,IAArC,EAAN;AACA,SAAKR,MAAL,CAAYQ,QAAZ,GAAuBA,QAAvB;AACA,SAAKS,KAAL,GAAa,KAAKjB,MAAL,CAAYQ,QAAZ,CAAqBQ,OAArB,CAA6B,IAA7B,CAAb;AACAL,QAAIC,KAAJ,CAAU,kBAAkB,KAAKZ,MAAL,CAAYa,IAAxC,EAA8C,IAA9C;AACA;AATO;AA9BH,EAAP;AA0CA;;AAEM,SAASd,WAAT,CAAqBC,MAArB,EAA6B;AACnC,QAAO;AACNkB,SADM,qBACI;AACT,4CACElB,MADF,EACW,IADX;AAGA,GALK;AAMNmB,SANM,qBAMI;AACT,QAAKX,QAAL,GAAgB,EAAhB;AACA,GARK;;AASN;AACAD,eAVM,2BAUU;AACfI,OAAIS,IAAJ,CAAS,kBAAkB,KAAKP,IAAhC;AACA,GAZK;;AAaN;AACA;AACAC,eAfM,2BAeU;AACfH,OAAIS,IAAJ,CAAS,kBAAkB,KAAKP,IAAhC;AACA;AAjBK,EAAP;AAoBA","file":"relation.js","sourcesContent":["export function ChildrenMixin(parent, options = {}) {\r\n\tconst indexKey = options.indexKey || 'index';\r\n\treturn {\r\n\t\tinject: {\r\n\t\t\t[parent]: {\r\n\t\t\t\tdefault: null,\r\n\t\t\t},\r\n\t\t},\r\n\t\tmounted() {\r\n\t\t\tthis.parent = this[parent];\r\n\t\t\tthis.bindRelation();\r\n\t\t},\r\n\t\t// #ifdef VUE2\r\n\t\tbeforeDestroy() {\r\n\t\t\tif (this.parent) {\r\n\t\t\t\tthis.parent.children = this.parent.children.filter(\r\n\t\t\t\t\t(item) => item !== this\r\n\t\t\t\t);\r\n\t\t\t\tuni.$emit(\"childrenReady\" + this.parent._uid, this);\r\n\t\t\t}\r\n\t\t},\r\n\t\t// #endif\r\n\t\t// #ifdef VUE3\r\n\t\tbeforeUnmount() {\r\n\t\t\tif (this.parent) {\r\n\t\t\t\tthis.parent.children = this.parent.children.filter(\r\n\t\t\t\t\t(item) => item !== this\r\n\t\t\t\t);\r\n\t\t\t\tuni.$emit(\"childrenReady\" + this.parent._uid, this);\r\n\t\t\t}\r\n\t\t},\r\n\t\t// #endif\r\n\t\tmethods: {\r\n\t\t\tbindRelation() {\r\n\t\t\t\tif (!this.parent || this.parent.children.indexOf(this) !== -1) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tconst children = [...this.parent.children, this];\r\n\t\t\t\tthis.parent.children = children;\r\n\t\t\t\tthis.index = this.parent.children.indexOf(this);\r\n\t\t\t\tuni.$emit(\"childrenReady\" + this.parent._uid, this);\r\n\t\t\t},\r\n\t\t},\r\n\t};\r\n}\r\n\r\nexport function ParentMixin(parent) {\r\n\treturn {\r\n\t\tprovide() {\r\n\t\t\treturn {\r\n\t\t\t\t[parent]: this,\r\n\t\t\t};\r\n\t\t},\r\n\t\tcreated() {\r\n\t\t\tthis.children = [];\r\n\t\t},\r\n\t\t// #ifdef VUE2\r\n\t\tbeforeDestroy() {\r\n\t\t\tuni.$off(\"childrenReady\" + this._uid)\r\n\t\t},\r\n\t\t// #endif\r\n\t\t// #ifdef VUE3\r\n\t\tbeforeUnmount() {\r\n\t\t\tuni.$off(\"childrenReady\" + this._uid)\r\n\t\t},\r\n\t\t// #endif\r\n\t};\r\n}\n"]}