{"version":3,"sources":["../../src/api/Zhaopinxinxi.js"],"names":["config","db","api","get","req","res","page","parseInt","query","limit","sort","order","where","gangweimingcheng","indexOf","Op","like","eq","tupian","zhiweileibie","zhaopinrenshu","gongzidaiyu","shangbanshijian","xueliyaoqiu","nianlingyaoqiu","gongzuoxiangqing","fabushijian","qiyezhanghao","qiyemingcheng","lianxiren","lianxidianhua","qiyedizhi","clicktime","tableName","session","userinfo","undefined","jwt","decode","headers","token","username","userid","ZhaopinxinxiModel","findAndCountAll","offset","result","currPage","pageSize","toRes","post","Object","keys","body","forEach","item","Date","now","format","create","update","id","destroy","in","all","params","findOne","record","sql","type","remindstart","columnName","remindend","remindStart","util","getDateTimeFormat","Number","remindEnd","sequelize","plain","raw","QueryTypes","SELECT","results","count","whereStoreup","tablename","StoreupModel","attributes","storeupList","arr","rows","push","dataValues","inteltype","notIn","result1","concat","total","xColumnName","yColumnName","timeStatType","role","dbConnection","dbtype","toLowerCase"],"mappings":"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","file":"Zhaopinxinxi.js","sourcesContent":["import { Router } from 'express'\r\nimport { Op, QueryTypes } from 'sequelize'\r\nimport sequelize from '../models/sequelize'\r\nimport toRes from '../lib/toRes'\r\nimport ZhaopinxinxiModel from '../models/ZhaopinxinxiModel'\r\nimport util from '../lib/util'\r\nimport StoreupModel from '../models/StoreupModel'\r\nimport jwt from 'jsonwebtoken'\r\nimport moment from 'moment'\r\n\r\nexport default ({ config, db }) => {\r\n\tlet api = Router()\r\n\r\n\r\n\t// 分页接口（后端）\r\n\tapi.get('/page', async (req, res) => {\r\n\r\n\t\ttry {\r\n\r\n\t\t\tlet page = parseInt(req.query.page) || 1\r\n\t\t\tlet limit = parseInt(req.query.limit) || 10\r\n\t\t\tlet sort = req.query.sort || 'id'\r\n\t\t\tlet order = req.query.order || 'asc'\r\n\r\n\t\t\tlet where = {}\r\n\t\t\tlet gangweimingcheng = req.query.gangweimingcheng\r\n\t\t\tif (gangweimingcheng) {//岗位名称\r\n\r\n\t\t\t\tif (gangweimingcheng.indexOf('%') != -1) {\r\n\t\t\t\t\twhere.gangweimingcheng = {\r\n\t\t\t\t\t\t[Op.like]: gangweimingcheng\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\twhere.gangweimingcheng = {\r\n\t\t\t\t\t\t[Op.eq]: gangweimingcheng\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tlet tupian = req.query.tupian\r\n\t\t\tif (tupian) {//图片\r\n\r\n\t\t\t\tif (tupian.indexOf('%') != -1) {\r\n\t\t\t\t\twhere.tupian = {\r\n\t\t\t\t\t\t[Op.like]: tupian\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\twhere.tupian = {\r\n\t\t\t\t\t\t[Op.eq]: tupian\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tlet zhiweileibie = req.query.zhiweileibie\r\n\t\t\tif (zhiweileibie) {//职位类别\r\n\r\n\t\t\t\tif (zhiweileibie.indexOf('%') != -1) {\r\n\t\t\t\t\twhere.zhiweileibie = {\r\n\t\t\t\t\t\t[Op.like]: zhiweileibie\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\twhere.zhiweileibie = {\r\n\t\t\t\t\t\t[Op.eq]: zhiweileibie\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tlet zhaopinrenshu = req.query.zhaopinrenshu\r\n\t\t\tif (zhaopinrenshu) {//招聘人数\r\n\r\n\t\t\t\tif (zhaopinrenshu.indexOf('%') != -1) {\r\n\t\t\t\t\twhere.zhaopinrenshu = {\r\n\t\t\t\t\t\t[Op.like]: zhaopinrenshu\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\twhere.zhaopinrenshu = {\r\n\t\t\t\t\t\t[Op.eq]: zhaopinrenshu\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tlet gongzidaiyu = req.query.gongzidaiyu\r\n\t\t\tif (gongzidaiyu) {//工资待遇\r\n\r\n\t\t\t\tif (gongzidaiyu.indexOf('%') != -1) {\r\n\t\t\t\t\twhere.gongzidaiyu = {\r\n\t\t\t\t\t\t[Op.like]: gongzidaiyu\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\twhere.gongzidaiyu = {\r\n\t\t\t\t\t\t[Op.eq]: gongzidaiyu\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tlet shangbanshijian = req.query.shangbanshijian\r\n\t\t\tif (shangbanshijian) {//上班时间\r\n\r\n\t\t\t\tif (shangbanshijian.indexOf('%') != -1) {\r\n\t\t\t\t\twhere.shangbanshijian = {\r\n\t\t\t\t\t\t[Op.like]: shangbanshijian\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\twhere.shangbanshijian = {\r\n\t\t\t\t\t\t[Op.eq]: shangbanshijian\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tlet xueliyaoqiu = req.query.xueliyaoqiu\r\n\t\t\tif (xueliyaoqiu) {//学历要求\r\n\r\n\t\t\t\tif (xueliyaoqiu.indexOf('%') != -1) {\r\n\t\t\t\t\twhere.xueliyaoqiu = {\r\n\t\t\t\t\t\t[Op.like]: xueliyaoqiu\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\twhere.xueliyaoqiu = {\r\n\t\t\t\t\t\t[Op.eq]: xueliyaoqiu\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tlet nianlingyaoqiu = req.query.nianlingyaoqiu\r\n\t\t\tif (nianlingyaoqiu) {//年龄要求\r\n\r\n\t\t\t\tif (nianlingyaoqiu.indexOf('%') != -1) {\r\n\t\t\t\t\twhere.nianlingyaoqiu = {\r\n\t\t\t\t\t\t[Op.like]: nianlingyaoqiu\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\twhere.nianlingyaoqiu = {\r\n\t\t\t\t\t\t[Op.eq]: nianlingyaoqiu\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tlet gongzuoxiangqing = req.query.gongzuoxiangqing\r\n\t\t\tif (gongzuoxiangqing) {//工作详情\r\n\r\n\t\t\t\tif (gongzuoxiangqing.indexOf('%') != -1) {\r\n\t\t\t\t\twhere.gongzuoxiangqing = {\r\n\t\t\t\t\t\t[Op.like]: gongzuoxiangqing\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\twhere.gongzuoxiangqing = {\r\n\t\t\t\t\t\t[Op.eq]: gongzuoxiangqing\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tlet fabushijian = req.query.fabushijian\r\n\t\t\tif (fabushijian) {//发布时间\r\n\r\n\t\t\t\tif (fabushijian.indexOf('%') != -1) {\r\n\t\t\t\t\twhere.fabushijian = {\r\n\t\t\t\t\t\t[Op.like]: fabushijian\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\twhere.fabushijian = {\r\n\t\t\t\t\t\t[Op.eq]: fabushijian\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tlet qiyezhanghao = req.query.qiyezhanghao\r\n\t\t\tif (qiyezhanghao) {//企业账号\r\n\r\n\t\t\t\tif (qiyezhanghao.indexOf('%') != -1) {\r\n\t\t\t\t\twhere.qiyezhanghao = {\r\n\t\t\t\t\t\t[Op.like]: qiyezhanghao\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\twhere.qiyezhanghao = {\r\n\t\t\t\t\t\t[Op.eq]: qiyezhanghao\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tlet qiyemingcheng = req.query.qiyemingcheng\r\n\t\t\tif (qiyemingcheng) {//企业名称\r\n\r\n\t\t\t\tif (qiyemingcheng.indexOf('%') != -1) {\r\n\t\t\t\t\twhere.qiyemingcheng = {\r\n\t\t\t\t\t\t[Op.like]: qiyemingcheng\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\twhere.qiyemingcheng = {\r\n\t\t\t\t\t\t[Op.eq]: qiyemingcheng\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tlet lianxiren = req.query.lianxiren\r\n\t\t\tif (lianxiren) {//联系人\r\n\r\n\t\t\t\tif (lianxiren.indexOf('%') != -1) {\r\n\t\t\t\t\twhere.lianxiren = {\r\n\t\t\t\t\t\t[Op.like]: lianxiren\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\twhere.lianxiren = {\r\n\t\t\t\t\t\t[Op.eq]: lianxiren\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tlet lianxidianhua = req.query.lianxidianhua\r\n\t\t\tif (lianxidianhua) {//联系电话\r\n\r\n\t\t\t\tif (lianxidianhua.indexOf('%') != -1) {\r\n\t\t\t\t\twhere.lianxidianhua = {\r\n\t\t\t\t\t\t[Op.like]: lianxidianhua\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\twhere.lianxidianhua = {\r\n\t\t\t\t\t\t[Op.eq]: lianxidianhua\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tlet qiyedizhi = req.query.qiyedizhi\r\n\t\t\tif (qiyedizhi) {//企业地址\r\n\r\n\t\t\t\tif (qiyedizhi.indexOf('%') != -1) {\r\n\t\t\t\t\twhere.qiyedizhi = {\r\n\t\t\t\t\t\t[Op.like]: qiyedizhi\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\twhere.qiyedizhi = {\r\n\t\t\t\t\t\t[Op.eq]: qiyedizhi\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tlet clicktime = req.query.clicktime\r\n\t\t\tif (clicktime) {//最近点击时间\r\n\r\n\t\t\t\tif (clicktime.indexOf('%') != -1) {\r\n\t\t\t\t\twhere.clicktime = {\r\n\t\t\t\t\t\t[Op.like]: clicktime\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\twhere.clicktime = {\r\n\t\t\t\t\t\t[Op.eq]: clicktime\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tlet tableName = req.session.userinfo === undefined ? jwt.decode(req.headers.token).tableName : req.session.userinfo.tableName\r\n\t\t\tif(tableName == 'qiye') {\r\n\t\t\t\twhere.qiyezhanghao = {\r\n\t\t\t\t\t[Op.eq]: req.session.userinfo === undefined ? jwt.decode(req.headers.token).username : req.session.userinfo.qiyezhanghao\r\n\t\t\t\t}\r\n\t\t\t\tif (where['userid'] != undefined) {\r\n\t\t\t\t\tdelete where.userid\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tlet result = await ZhaopinxinxiModel.findAndCountAll({\r\n\t\t\t\torder: [[sort, order]],\r\n\t\t\t\twhere,\r\n\t\t\t\toffset: (page - 1) * limit,\r\n\t\t\t\tlimit\r\n\t\t\t})\r\n\t\t\t\r\n\t\t\tresult.currPage = page\r\n\t\t\tresult.pageSize = limit\r\n\r\n\t\t\ttoRes.page(res, 0, result)\r\n\t\t} catch(err) {\r\n\t\t\ttoRes.session(res, 500, '服务器错误！', '', 500)\r\n\t\t}\r\n\t})\r\n\r\n    // 分页接口（前端）\r\n\tapi.get('/list', async (req, res) => {\r\n\r\n\t\ttry {\r\n\r\n\t\t\tlet page = parseInt(req.query.page) || 1\r\n\t\t\tlet limit = parseInt(req.query.limit) || 10\r\n\t\t\tlet sort = req.query.sort || 'id'\r\n\t\t\tlet order = req.query.order || 'asc'\r\n\t\t\tlet where = {}\r\n\t\t\tlet gangweimingcheng = req.query.gangweimingcheng\r\n\t\t\tif (gangweimingcheng) {\r\n\r\n\t\t\t\tif (gangweimingcheng.indexOf('%') != -1) {\r\n\t\t\t\t\twhere.gangweimingcheng = {\r\n\t\t\t\t\t\t[Op.like]: gangweimingcheng\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\twhere.gangweimingcheng = {\r\n\t\t\t\t\t\t[Op.eq]: gangweimingcheng\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tlet zhiweileibie = req.query.zhiweileibie\r\n\t\t\tif (zhiweileibie) {\r\n\t\t\t\tif (zhiweileibie.indexOf('%') != -1) {\r\n\t\t\t\t\twhere.zhiweileibie = {\r\n\t\t\t\t\t\t[Op.like]: zhiweileibie\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\twhere.zhiweileibie = {\r\n\t\t\t\t\t\t[Op.eq]: zhiweileibie\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tlet qiyemingcheng = req.query.qiyemingcheng\r\n\t\t\tif (qiyemingcheng) {\r\n\t\t\t\tif (qiyemingcheng.indexOf('%') != -1) {\r\n\t\t\t\t\twhere.qiyemingcheng = {\r\n\t\t\t\t\t\t[Op.like]: qiyemingcheng\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\twhere.qiyemingcheng = {\r\n\t\t\t\t\t\t[Op.eq]: qiyemingcheng\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tlet result = await ZhaopinxinxiModel.findAndCountAll({\r\n\t\t\t\torder: [[sort, order]],\r\n\t\t\t\twhere,\r\n\t\t\t\toffset: (page - 1) * limit,\r\n\t\t\t\tlimit\r\n\t\t\t})\r\n\t\t\t\r\n\t\t\tresult.currPage = page\r\n\t\t\tresult.pageSize = limit\r\n\t\t\ttoRes.page(res, 0, result)\r\n\t\t} catch(err) {\t\r\n\t\t\ttoRes.session(res, 401, '您的权限不够！', '', 200)\r\n\t\t}\r\n\t})\r\n\r\n\t// 保存接口（后端）\r\n\tapi.post('/save', async (req, res) => {\r\n\r\n\t\ttry {\r\n\r\n\t\t\tObject.keys(req.body).forEach(item=>{\r\n\t\t\t\tif(req.body[item] == '')  delete req.body[item]\r\n\t\t\t})\r\n\r\n\t\t\treq.body.clicktime = moment(Date.now()).format('YYYY-MM-DD HH:mm:ss')//最近点击时间\r\n\r\n\t\t\tconst userinfo = await ZhaopinxinxiModel.create(req.body)\r\n\r\n\t\t\tif (userinfo === null) {\r\n\t\t\t\ttoRes.session(res, -1, '添加失败！')\r\n\t\t\t} else {\r\n\t\t\t\ttoRes.session(res, 0, '添加成功！')\r\n\t\t\t}\r\n\t\t} catch(err) {\r\n\t\t\ttoRes.session(res, 500, '服务器错误！', '', 500)\r\n\t\t}\r\n\t})\r\n\r\n    // 保存接口（前端）\r\n\tapi.post('/add', async (req, res) => {\r\n\r\n\t\ttry {\r\n\r\n\t\t\tObject.keys(req.body).forEach(item=>{\r\n\t\t\t\tif(req.body[item] == '')  delete req.body[item]\r\n\t\t\t})\r\n\r\n\t\t\tif (jwt.decode(req.headers.token) == null) {\r\n\t\t\t\ttoRes.session(res, 401, '请登录后再操作', '', 401)\r\n\t\t\t}\r\n\t\t\treq.body.clicktime = moment(Date.now()).format('YYYY-MM-DD HH:mm:ss')\r\n\r\n\t\t\tconst userinfo = await ZhaopinxinxiModel.create(req.body)\r\n\t\t\tif (userinfo === null) {\r\n\t\t\t\ttoRes.session(res, -1, '添加失败！')\r\n\t\t\t} else {\r\n\t\t\t\ttoRes.session(res, 0, '添加成功！')\r\n\t\t\t}\r\n\t\t} catch(err) {\r\n\t\t\ttoRes.session(res, 500, '服务器错误！', '', 500)\r\n\t\t}\r\n\t})\r\n\r\n\t// 更新接口\r\n\tapi.post('/update', async (req, res) => {\r\n\r\n\t\ttry {\r\n\r\n\t\t\tawait ZhaopinxinxiModel.update(req.body, {\r\n\t\t\t\twhere: {\r\n\t\t\t\t  id: req.body.id || 0\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\ttoRes.session(res, 0, '编辑成功！')\r\n\t\t} catch(err) {\r\n\t\t\ttoRes.session(res, 500, '服务器错误！', '', 500)\r\n\t\t}\r\n\t})\r\n\r\n\t// 删除接口\r\n\tapi.post('/delete', async (req, res) => {\r\n\r\n\t\ttry {\r\n\r\n\t\t\tawait ZhaopinxinxiModel.destroy({\r\n\t\t\t\twhere: {\r\n\t\t\t\t  id: {\r\n\t\t\t\t\t[Op.in]: req.body\r\n\t\t\t\t  }\r\n\t\t\t\t}\r\n\t\t\t})\r\n\r\n\t\t\ttoRes.session(res, 0, '删除成功！')\r\n\t\t} catch(err) {\r\n\r\n\t\t\ttoRes.session(res, 500, '服务器错误！', '', 500)\r\n\t\t}\r\n\t})\r\n\r\n\t// 详情接口（后端）\r\n\tapi.all('/info/:id', async (req, res) => {\r\n\r\n\t\ttry {\r\n\r\n            await ZhaopinxinxiModel.update({\r\n\t\t\t\tclicktime: moment(Date.now()).format('YYYY-MM-DD HH:mm:ss')\r\n\t\t\t}, {\r\n\t\t\t\twhere: {\r\n\t\t\t\t  id: req.params.id\r\n\t\t\t\t}\r\n\t\t\t})\r\n\r\n\t\t\ttoRes.record(res, 0, await ZhaopinxinxiModel.findOne({ where: { id: req.params.id } }))\r\n\t\t} catch(err) {\r\n\r\n\t\t\ttoRes.session(res, 500, '服务器错误！', '', 500)\r\n\t\t}\r\n\t})\r\n\r\n    // 详情接口（前端）\r\n\tapi.all('/detail/:id', async (req, res) => {\r\n\r\n\t\ttry {\r\n\r\n            await ZhaopinxinxiModel.update({\r\n\t\t\t\tclicktime: moment(Date.now()).format('YYYY-MM-DD HH:mm:ss')\r\n\t\t\t}, {\r\n\t\t\t\twhere: {\r\n\t\t\t\t  id: req.params.id\r\n\t\t\t\t}\r\n\t\t\t})\r\n\r\n\t\t\ttoRes.record(res, 0, await ZhaopinxinxiModel.findOne({ where: { id: req.params.id } }))\r\n\t\t} catch(err) {\r\n\r\n\t\t\ttoRes.session(res, 500, '服务器错误！', '', 500)\r\n\t\t}\r\n\t})\r\n\r\n\t// 获取需要提醒的记录数接口\r\n\tapi.get('/remind/:columnName/:type', async (req, res) => {\r\n\r\n\t\ttry {\r\n\r\n\t\t\tlet sql = 'SELECT 0 AS count'\r\n\t\t\t\r\n\t\t\tif (req.params.type == 1) {\r\n\t\t\t\tif (req.query.remindstart) sql = \"SELECT COUNT(*) AS count FROM zhaopinxinxi WHERE \" + req.params.columnName + \" >= '\" + req.query.remindstart + \"'\"\r\n\t\t\t\tif (req.query.remindend) sql = \"SELECT COUNT(*) AS count FROM zhaopinxinxi WHERE \" + req.params.columnName + \" <= '\" + req.query.remindend + \"'\"\r\n\r\n\t\t\t\tif (req.query.remindstart && req.query.remindend) {\r\n\t\t\t\t\tsql = \"SELECT COUNT(*) AS count FROM zhaopinxinxi WHERE \" + req.params.columnName + \" >= '\" + req.query.remindstart + \"' AND \" + req.params.columnName + \" <= '\" + req.query.remindend + \"'\"\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (req.params.type == 2) {\r\n\t\t\t\tif (req.query.remindstart) {\r\n\t\t\t\t\tlet remindStart = util.getDateTimeFormat(0 + Number(req.query.remindstart), \"yyyy-MM-dd\")\r\n\t\t\t\t\tsql = \"SELECT COUNT(*) AS count FROM zhaopinxinxi WHERE \" + req.params.columnName + \" >= '\" + remindStart + \"'\"\r\n\t\t\t\t}\r\n\t\t\t\tif (req.query.remindend) {\r\n\t\t\t\t\tlet remindEnd = util.getDateTimeFormat(req.query.remindend, \"yyyy-MM-dd\")\r\n\t\t\t\t\tsql = \"SELECT COUNT(*) AS count FROM zhaopinxinxi WHERE \" + req.params.columnName + \" <= '\" + remindEnd + \"'\"\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (req.query.remindstart && req.query.remindend) {\r\n\t\t\t\t\tlet remindStart = util.getDateTimeFormat(0 + Number(req.query.remindstart), \"yyyy-MM-dd\")\r\n\t\t\t\t\tlet remindEnd = util.getDateTimeFormat(req.query.remindend, \"yyyy-MM-dd\")\r\n\t\t\t\t\tsql = \"SELECT COUNT(*) AS count FROM zhaopinxinxi WHERE \" + req.params.columnName + \" >= '\" + remindStart + \"' AND \" + req.params.columnName + \" <= '\" + remindEnd + \"'\"\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tconst results = await sequelize.query(sql, {\r\n\t\t\t\tplain: true,\r\n\t\t\t\traw: true,\r\n\t\t\t\ttype: QueryTypes.SELECT\r\n\t\t\t})\r\n\r\n\t\t\ttoRes.count(res, 0, results.count)\r\n\t\t} catch(err) {\r\n\t\t\t\r\n\t\t\ttoRes.session(res, 500, '服务器错误！', '', 500)\r\n\t\t}\r\n\t})\r\n\r\n\t// 智能推荐接口\r\n\tapi.get('/autoSort', async (req, res) => {\r\n\r\n\t\ttry {\r\n\r\n\t\t\tlet page = parseInt(req.query.page) || 1\r\n\t\t\tlet limit = parseInt(req.query.limit) || 5\r\n\t\t\tlet sort = req.query.sort || 'clicktime'\r\n\t\t\tlet order = req.query.order || 'desc'\r\n\r\n\r\n\t\t\tlet result = await ZhaopinxinxiModel.findAndCountAll({\r\n\t\t\t\torder: [[sort, order]],\r\n\t\t\t\toffset: (page - 1) * limit,\r\n\t\t\t\tlimit\r\n\t\t\t})\r\n\t\t\t\r\n\t\t\tresult.currPage = page\r\n\t\t\tresult.pageSize = limit\r\n\r\n\t\t\ttoRes.page(res, 0, result)\r\n\t\t} catch(err) {\r\n\t\t\t\r\n\t\t\ttoRes.session(res, 500, '服务器错误！', '', 500)\r\n\t\t}\r\n\t})\r\n\r\n\t// 智能推荐接口\r\n\tapi.get('/autoSort2', async (req, res) => {\r\n\r\n\t\ttry {\r\n\r\n\t\t\tlet page = parseInt(req.query.page) || 1\r\n\t\t\tlet limit = parseInt(req.query.limit) || 5\r\n\r\n\t\t\tlet whereStoreup = {}\r\n\t\t\twhereStoreup.userid = {\r\n\t\t\t\t[Op.eq]: jwt.decode(req.headers.token).id\r\n\t\t\t}\r\n\t\t\twhereStoreup.tablename = {\r\n\t\t\t\t[Op.eq]: 'zhaopinxinxi'\r\n\t\t\t}\r\n\t\t\tlet storeupList = await StoreupModel.findAndCountAll({\r\n\t\t\t\tattributes: ['inteltype'],\r\n\t\t\t\torder: [['addtime', 'desc']],\r\n\t\t\t\twhere: whereStoreup,\r\n\t\t\t\toffset: (page - 1) * limit,\r\n\t\t\t\tlimit\r\n\t\t\t})\r\n\t\t\t\r\n\t\t\tlet arr = []\r\n\t\t\tstoreupList.rows.forEach(item => {\r\n\t\t\t\tarr.push(item.dataValues.inteltype)\r\n\t\t\t})\r\n\t\t\t\r\n\t\t\tlet where = {}\r\n\t\t\twhere.zhiweileibie = {\r\n\t\t\t\t[Op.in]: arr,\r\n\t\t\t}\r\n\r\n\t\t\tlet result = await ZhaopinxinxiModel.findAndCountAll({\r\n\t\t\t\twhere,\r\n\t\t\t\toffset: (page - 1) * limit,\r\n\t\t\t\tlimit\r\n\t\t\t})\r\n\t\t\t\r\n\t\t\twhere = {}\r\n\t\t\twhere.zhiweileibie = {\r\n\t\t\t\t[Op.notIn]: arr,\r\n\t\t\t}\r\n\r\n\t\t\tlet result1 = await ZhaopinxinxiModel.findAndCountAll({\r\n\t\t\t\twhere,\r\n\t\t\t\toffset: (page - 1) * limit,\r\n\t\t\t\tlimit: limit - result.count\r\n\t\t\t})\r\n\t\t\t\r\n\t\t\tresult.rows = result.rows.concat(result1.rows)\r\n\t\t\t\r\n\t\t\tresult.currPage = page\r\n\t\t\tresult.pageSize = limit\r\n\t\t\tresult.total = result.count + result1.count\r\n\t\t\tresult.count = result.total \r\n\r\n\t\t\ttoRes.page(res, 0, result)\r\n\t\t} catch(err) {\r\n\t\t\t\r\n\t\t\ttoRes.session(res, 500, '服务器错误！', '', 500)\r\n\t\t}\r\n\t})\r\n\r\n\t// 分组统计接口\r\n\tapi.get('/group/:columnName', async (req, res) => {\r\n\r\n\t\ttry {\r\n\r\n\t\t\tlet sql = \"\"\r\n\t\t\tlet columnName = req.params.columnName\r\n\t\t\tlet where = \" WHERE 1 = 1 \"\r\n\t\t\tlet tableName = req.session.userinfo === undefined ? jwt.decode(req.headers.token).tableName : req.session.userinfo.tableName\r\n\t\t\tif(tableName == 'qiye') {\r\n\t\t\t\twhere += \" AND qiyezhanghao = '\" + jwt.decode(req.headers.token).username + \"' \";\r\n\t\t\t}\r\n\t\t\tsql = \"SELECT COUNT(*) AS total, \" + columnName + \" FROM zhaopinxinxi \" + where + \" GROUP BY \" + columnName + \" LIMIT 10\" \r\n\t\t\ttoRes.record(res, 0, await sequelize.query(sql, {\r\n\t\t\t\tplain: false,\r\n\t\t\t\traw: true,\r\n\t\t\t\ttype: QueryTypes.SELECT\r\n\t\t\t}))\r\n\t\t} catch(err) {\r\n\t\t\ttoRes.session(res, 500, '服务器错误！', '', 500)\r\n\t\t}\r\n\t})\r\n\r\n\t// 统计指定字段\r\n\tapi.get('/value/:xColumnName/:yColumnName', async (req, res) => {\r\n\r\n\t\ttry {\r\n\r\n\t\t\tlet sql = \"\"\r\n\t\t\tlet xColumnName = req.params.xColumnName\r\n\t\t\tlet yColumnName = req.params.yColumnName\r\n\t\t\tlet where = \" WHERE 1 = 1 \"\r\n\t\t\tlet tableName = req.session.userinfo === undefined ? jwt.decode(req.headers.token).tableName : req.session.userinfo.tableName\r\n\t\t\tif(tableName == 'qiye') {\r\n\t\t\t\twhere += \" AND qiyezhanghao = '\" + jwt.decode(req.headers.token).username + \"' \";\r\n\t\t\t}\r\n\r\n\t\t\tsql = \"SELECT \" + xColumnName + \", SUM(\" + yColumnName + \") AS total FROM zhaopinxinxi \" + where + \" GROUP BY \" + xColumnName + \" DESC LIMIT 10\"\r\n\t\t\t\r\n\t\t\ttoRes.record(res, 0, await sequelize.query(sql, {\r\n\t\t\t\tplain: false,\r\n\t\t\t\traw: true,\r\n\t\t\t\ttype: QueryTypes.SELECT\r\n\t\t\t}))\r\n\t\t} catch(err) {\r\n\t\t\ttoRes.session(res, 500, '服务器错误！', '', 500)\r\n\t\t}\r\n\t})\r\n\r\n\t// 按日期统计\r\n\tapi.get('/value/:xColumnName/:yColumnName/:timeStatType', async (req, res) => {\r\n\r\n\t\ttry {\r\n\t\t\t\r\n\t\t\tlet sql = \"\"\r\n\t\t\tlet xColumnName = req.params.xColumnName\r\n\t\t\tlet yColumnName = req.params.yColumnName\r\n\t\t\tlet timeStatType = req.params.timeStatType\r\n\t\t\tlet tableName = \"zhaopinxinxi\"\r\n\t\t\tlet where = \" WHERE 1 = 1 \"\r\n\t\t\tif (jwt.decode(req.headers.token).role != '管理员') {\r\n\t\t\t\twhere += \" AND qiyezhanghao = '\" + jwt.decode(req.headers.token).username + \"' \";\r\n\t\t\t}\r\n            if (config.dbConnection.dbtype.toLowerCase() == \"mysql\") {\r\n                if (timeStatType == \"日\")\r\n                    sql = \"SELECT DATE_FORMAT(\" + xColumnName + \", '%Y-%m-%d') \" + xColumnName + \", sum(\" + yColumnName + \") total FROM \" + tableName + where + \" GROUP BY DATE_FORMAT(\" + xColumnName + \", '%Y-%m-%d') LIMIT 10\";\r\n                if (timeStatType == \"月\")\r\n                    sql = \"SELECT DATE_FORMAT(\" + xColumnName + \", '%Y-%m') \" + xColumnName + \", sum(\" + yColumnName + \") total FROM \" + tableName + where + \" GROUP BY DATE_FORMAT(\" + xColumnName + \", '%Y-%m')  LIMIT 10\";\r\n                if (timeStatType == \"年\")\r\n                    sql = \"SELECT DATE_FORMAT(\" + xColumnName + \", '%Y') \" + xColumnName + \", sum(\" + yColumnName + \") total FROM \" + tableName + where + \" GROUP BY DATE_FORMAT(\" + xColumnName + \", '%Y')  LIMIT 10\";\r\n            } else {\r\n                if (timeStatType == \"日\")\r\n                    sql = \"SELECT DATE_FORMAT(VARCHAR(10),\" + xColumnName + \", 120) \" + xColumnName + \", sum(\" + yColumnName + \") total FROM \" + tableName + where + \" GROUP BY DATE_FORMAT(VARCHAR(10),\" + xColumnName + \", 120)  LIMIT 10\";\r\n                if (timeStatType == \"月\")\r\n                    sql = \"SELECT DATE_FORMAT(VARCHAR(7),\" + xColumnName + \", 120) \" + xColumnName + \", sum(\" + yColumnName + \") total FROM \" + tableName + where + \" GROUP BY DATE_FORMAT(VARCHAR(7),\" + xColumnName + \", 120)  LIMIT 10\";\r\n                if (timeStatType == \"年\")\r\n                    sql = \"SELECT DATE_FORMAT(VARCHAR(4),\" + xColumnName + \", 120) \" + xColumnName + \", sum(\" + yColumnName + \") total FROM \" + tableName + where + \" GROUP BY DATE_FORMAT(VARCHAR(4),\" + xColumnName + \", 120)  LIMIT 10\";\r\n            }\r\n\t\t\ttoRes.record(res, 0, await sequelize.query(sql, {\r\n\t\t\t\tplain: false,\r\n\t\t\t\traw: true,\r\n\t\t\t\ttype: QueryTypes.SELECT\r\n\t\t\t}))\r\n\t\t} catch(err) {\r\n\r\n\t\t\ttoRes.session(res, 500, '服务器错误！', '', 500)\r\n\t\t}\r\n\t})\r\n\r\n\treturn api\r\n}\r\n"]}