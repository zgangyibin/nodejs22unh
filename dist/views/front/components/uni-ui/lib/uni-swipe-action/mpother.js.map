{"version":3,"sources":["../../../../../../../src/views/front/components/uni-ui/lib/uni-swipe-action/mpother.js"],"names":["dom","weex","requireModule","data","uniShow","left","computed","moveLeft","watch","show","newVal","position","JSON","stringify","autoClose","$emit","open","close","uni","mounted","init","setTimeout","getSelectorQuery","beforeDestoy","$off","methods","$on","res","onClick","index","item","content","touchstart","e","pageX","touches","disabled","width","isopen","openleft","button","touchmove","setPosition","touchend","move","x","y","setValue","value","Math","max","min","parseInt","views","createSelectorQuery","in","selectAll","boundingClientRect","exec","getComponentRect","$refs","size"],"mappings":"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","file":"mpother.js","sourcesContent":["// #ifdef APP-NVUE\r\nconst dom = weex.requireModule('dom');\r\n// #endif\r\nexport default {\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tuniShow: false,\r\n\t\t\tleft: 0\r\n\t\t}\r\n\t},\r\n\tcomputed: {\r\n\t\tmoveLeft() {\r\n\t\t\treturn `translateX(${this.left}px)`\r\n\t\t}\r\n\t},\r\n\twatch: {\r\n\t\tshow(newVal) {\r\n\t\t\tif (!this.position || JSON.stringify(this.position) === '{}') return;\r\n\t\t\tif (this.autoClose) return\r\n\t\t\tif (newVal) {\r\n\t\t\t\tthis.$emit('change', true)\r\n\t\t\t\tthis.open()\r\n\t\t\t} else {\r\n\t\t\t\tthis.$emit('change', false)\r\n\t\t\t\tthis.close()\r\n\t\t\t}\r\n\t\t\tuni.$emit('__uni__swipe__event', this)\r\n\t\t}\r\n\t},\r\n\tmounted() {\r\n\t\tthis.position = {}\r\n\t\tthis.init()\r\n\n\t\tsetTimeout(()=>{\n\t\t\tthis.getSelectorQuery()\n\t\t},100)\r\n\t},\r\n\tbeforeDestoy() {\r\n\t\tuni.$off('__uni__swipe__event')\r\n\t},\r\n\tmethods: {\r\n\t\tinit() {\r\n\t\t\tuni.$on('__uni__swipe__event', (res) => {\r\n\t\t\t\tif (res !== this && this.autoClose) {\r\n\t\t\t\t\tif (this.left !== 0) {\r\n\t\t\t\t\t\tthis.close()\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t},\r\n\t\tonClick(index, item) {\r\n\t\t\tthis.$emit('click', {\r\n\t\t\t\tcontent: item,\r\n\t\t\t\tindex\r\n\t\t\t})\r\n\t\t},\r\n\t\ttouchstart(e) {\r\n\t\t\tconst {\r\n\t\t\t\tpageX\r\n\t\t\t} = e.touches[0]\r\n\t\t\tif (this.disabled) return\r\n\t\t\tconst left = this.position.content.left\r\n\t\t\tuni.$emit('__uni__swipe__event', this)\r\n\t\t\tthis.width = pageX - left\r\n\t\t\tif (this.isopen) return\r\n\t\t\tif (this.uniShow) {\r\n\t\t\t\tthis.uniShow = false\r\n\t\t\t\tthis.isopen = true\r\n\t\t\t\tthis.openleft = this.left + this.position.button.width\r\n\t\t\t}\r\n\t\t},\r\n\t\ttouchmove(e, index) {\r\n\t\t\tif (this.disabled) return\r\n\t\t\tconst {\r\n\t\t\t\tpageX\r\n\t\t\t} = e.touches[0]\r\n\t\t\tthis.setPosition(pageX)\r\n\t\t},\r\n\t\ttouchend() {\r\n\t\t\tif (this.disabled) return\r\n\t\t\tif (this.isopen) {\r\n\t\t\t\tthis.move(this.openleft, 0)\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t\tthis.move(this.left, -40)\r\n\t\t},\r\n\t\tsetPosition(x, y) {\r\n\t\t\tif (!this.position.button.width) {\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t\t// this.left = x - this.width\r\n\t\t\tthis.setValue(x - this.width)\r\n\t\t},\r\n\t\tsetValue(value) {\r\n\t\t\t// 设置最大最小值\r\n\t\t\tthis.left = Math.max(-this.position.button.width, Math.min(parseInt(value), 0))\r\n\t\t\tthis.position.content.left = this.left\r\n\t\t\tif (this.isopen) {\r\n\t\t\t\tthis.openleft = this.left + this.position.button.width\r\n\t\t\t}\r\n\t\t},\r\n\t\tmove(left, value) {\r\n\t\t\tif (left >= value) {\r\n\t\t\t\tthis.$emit('change', false)\r\n\t\t\t\tthis.close()\r\n\t\t\t} else {\r\n\t\t\t\tthis.$emit('change', true)\r\n\t\t\t\tthis.open()\r\n\t\t\t}\r\n\t\t},\r\n\t\topen() {\r\n\t\t\tthis.uniShow = true\r\n\t\t\tthis.left = -this.position.button.width\r\n\t\t\tthis.setValue(-this.position.button.width)\r\n\t\t},\r\n\t\tclose() {\r\n\t\t\tthis.uniShow = true\r\n\t\t\tthis.setValue(0)\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tthis.uniShow = false\r\n\t\t\t\tthis.isopen = false\r\n\t\t\t}, 300)\r\n\t\t},\r\n\t\tgetSelectorQuery() {\r\n\t\t\t// #ifndef APP-NVUE\r\n\t\t\tconst views = uni.createSelectorQuery()\r\n\t\t\t\t.in(this)\r\n\t\t\tviews\r\n\t\t\t\t.selectAll('.selector-query-hock')\r\n\t\t\t\t.boundingClientRect(data => {\r\n\t\t\t\t\tthis.position.content = data[1]\r\n\t\t\t\t\tthis.position.button = data[0]\r\n\t\t\t\t\tif (this.autoClose) return\r\n\t\t\t\t\tif (this.show) {\r\n\t\t\t\t\t\tthis.open()\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.close()\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.exec()\r\n\t\t\t// #endif\r\n\t\t\t// #ifdef APP-NVUE\r\n\t\t\tdom.getComponentRect(this.$refs['selector-content-hock'], (data) => {\r\n\t\t\t\tif (this.position.content) return\r\n\t\t\t\tthis.position.content = data.size\r\n\t\t\t})\r\n\t\t\tdom.getComponentRect(this.$refs['selector-button-hock'], (data) => {\r\n\t\t\t\tif (this.position.button) return\r\n\t\t\t\tthis.position.button = data.size\r\n\t\t\t\tif (this.autoClose) return\r\n\t\t\t\tif (this.show) {\r\n\t\t\t\t\tthis.open()\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.close()\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t// #endif\r\n\t\t}\r\n\t}\r\n}\n"]}