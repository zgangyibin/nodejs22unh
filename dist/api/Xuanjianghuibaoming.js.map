{"version":3,"sources":["../../src/api/Xuanjianghuibaoming.js"],"names":["config","db","api","get","req","res","page","parseInt","query","limit","sort","order","where","biaoti","indexOf","Op","like","eq","fengmian","jubanhuichang","jubanshijian","qiyezhanghao","qiyemingcheng","baomingshijian","xuehao","xueshengxingming","shoujihaoma","crossuserid","crossrefid","sfsh","shhf","userid","tableName","session","userinfo","undefined","jwt","decode","headers","token","username","XuanjianghuibaomingModel","findAndCountAll","offset","result","currPage","pageSize","toRes","post","Object","keys","body","forEach","item","id","create","update","destroy","in","all","findOne","params","record","sql","type","remindstart","columnName","remindend","remindStart","util","getDateTimeFormat","Number","remindEnd","sequelize","plain","raw","QueryTypes","SELECT","results","count","xColumnName","yColumnName","timeStatType","role","dbConnection","dbtype","toLowerCase"],"mappings":"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","file":"Xuanjianghuibaoming.js","sourcesContent":["import { Router } from 'express'\r\nimport { Op, QueryTypes } from 'sequelize'\r\nimport sequelize from '../models/sequelize'\r\nimport toRes from '../lib/toRes'\r\nimport XuanjianghuibaomingModel from '../models/XuanjianghuibaomingModel'\r\nimport util from '../lib/util'\r\nimport jwt from 'jsonwebtoken'\r\n\r\nexport default ({ config, db }) => {\r\n\tlet api = Router()\r\n\r\n\t// 分页接口（后端）\r\n\tapi.get('/page', async (req, res) => {\r\n\r\n\t\ttry {\r\n\r\n\t\t\tlet page = parseInt(req.query.page) || 1\r\n\t\t\tlet limit = parseInt(req.query.limit) || 10\r\n\t\t\tlet sort = req.query.sort || 'id'\r\n\t\t\tlet order = req.query.order || 'asc'\r\n\r\n\t\t\tlet where = {}\r\n\t\t\tlet biaoti = req.query.biaoti\r\n\t\t\tif (biaoti) {//标题\r\n\r\n\t\t\t\tif (biaoti.indexOf('%') != -1) {\r\n\t\t\t\t\twhere.biaoti = {\r\n\t\t\t\t\t\t[Op.like]: biaoti\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\twhere.biaoti = {\r\n\t\t\t\t\t\t[Op.eq]: biaoti\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tlet fengmian = req.query.fengmian\r\n\t\t\tif (fengmian) {//封面\r\n\r\n\t\t\t\tif (fengmian.indexOf('%') != -1) {\r\n\t\t\t\t\twhere.fengmian = {\r\n\t\t\t\t\t\t[Op.like]: fengmian\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\twhere.fengmian = {\r\n\t\t\t\t\t\t[Op.eq]: fengmian\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tlet jubanhuichang = req.query.jubanhuichang\r\n\t\t\tif (jubanhuichang) {//举办会场\r\n\r\n\t\t\t\tif (jubanhuichang.indexOf('%') != -1) {\r\n\t\t\t\t\twhere.jubanhuichang = {\r\n\t\t\t\t\t\t[Op.like]: jubanhuichang\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\twhere.jubanhuichang = {\r\n\t\t\t\t\t\t[Op.eq]: jubanhuichang\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tlet jubanshijian = req.query.jubanshijian\r\n\t\t\tif (jubanshijian) {//举办时间\r\n\r\n\t\t\t\tif (jubanshijian.indexOf('%') != -1) {\r\n\t\t\t\t\twhere.jubanshijian = {\r\n\t\t\t\t\t\t[Op.like]: jubanshijian\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\twhere.jubanshijian = {\r\n\t\t\t\t\t\t[Op.eq]: jubanshijian\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tlet qiyezhanghao = req.query.qiyezhanghao\r\n\t\t\tif (qiyezhanghao) {//企业账号\r\n\r\n\t\t\t\tif (qiyezhanghao.indexOf('%') != -1) {\r\n\t\t\t\t\twhere.qiyezhanghao = {\r\n\t\t\t\t\t\t[Op.like]: qiyezhanghao\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\twhere.qiyezhanghao = {\r\n\t\t\t\t\t\t[Op.eq]: qiyezhanghao\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tlet qiyemingcheng = req.query.qiyemingcheng\r\n\t\t\tif (qiyemingcheng) {//企业名称\r\n\r\n\t\t\t\tif (qiyemingcheng.indexOf('%') != -1) {\r\n\t\t\t\t\twhere.qiyemingcheng = {\r\n\t\t\t\t\t\t[Op.like]: qiyemingcheng\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\twhere.qiyemingcheng = {\r\n\t\t\t\t\t\t[Op.eq]: qiyemingcheng\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tlet baomingshijian = req.query.baomingshijian\r\n\t\t\tif (baomingshijian) {//报名时间\r\n\r\n\t\t\t\tif (baomingshijian.indexOf('%') != -1) {\r\n\t\t\t\t\twhere.baomingshijian = {\r\n\t\t\t\t\t\t[Op.like]: baomingshijian\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\twhere.baomingshijian = {\r\n\t\t\t\t\t\t[Op.eq]: baomingshijian\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tlet xuehao = req.query.xuehao\r\n\t\t\tif (xuehao) {//学号\r\n\r\n\t\t\t\tif (xuehao.indexOf('%') != -1) {\r\n\t\t\t\t\twhere.xuehao = {\r\n\t\t\t\t\t\t[Op.like]: xuehao\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\twhere.xuehao = {\r\n\t\t\t\t\t\t[Op.eq]: xuehao\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tlet xueshengxingming = req.query.xueshengxingming\r\n\t\t\tif (xueshengxingming) {//学生姓名\r\n\r\n\t\t\t\tif (xueshengxingming.indexOf('%') != -1) {\r\n\t\t\t\t\twhere.xueshengxingming = {\r\n\t\t\t\t\t\t[Op.like]: xueshengxingming\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\twhere.xueshengxingming = {\r\n\t\t\t\t\t\t[Op.eq]: xueshengxingming\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tlet shoujihaoma = req.query.shoujihaoma\r\n\t\t\tif (shoujihaoma) {//学生手机号码\r\n\r\n\t\t\t\tif (shoujihaoma.indexOf('%') != -1) {\r\n\t\t\t\t\twhere.shoujihaoma = {\r\n\t\t\t\t\t\t[Op.like]: shoujihaoma\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\twhere.shoujihaoma = {\r\n\t\t\t\t\t\t[Op.eq]: shoujihaoma\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tlet crossuserid = req.query.crossuserid\r\n\t\t\tif (crossuserid) {//跨表用户id\r\n\r\n\t\t\t\tif (crossuserid.indexOf('%') != -1) {\r\n\t\t\t\t\twhere.crossuserid = {\r\n\t\t\t\t\t\t[Op.like]: crossuserid\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\twhere.crossuserid = {\r\n\t\t\t\t\t\t[Op.eq]: crossuserid\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tlet crossrefid = req.query.crossrefid\r\n\t\t\tif (crossrefid) {//跨表岗id\r\n\r\n\t\t\t\tif (crossrefid.indexOf('%') != -1) {\r\n\t\t\t\t\twhere.crossrefid = {\r\n\t\t\t\t\t\t[Op.like]: crossrefid\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\twhere.crossrefid = {\r\n\t\t\t\t\t\t[Op.eq]: crossrefid\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tlet sfsh = req.query.sfsh\r\n\t\t\tif (sfsh) {//审核\r\n\r\n\t\t\t\tif (sfsh.indexOf('%') != -1) {\r\n\t\t\t\t\twhere.sfsh = {\r\n\t\t\t\t\t\t[Op.like]: sfsh\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\twhere.sfsh = {\r\n\t\t\t\t\t\t[Op.eq]: sfsh\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tlet shhf = req.query.shhf\r\n\t\t\tif (shhf) {//审核回复\r\n\r\n\t\t\t\tif (shhf.indexOf('%') != -1) {\r\n\t\t\t\t\twhere.shhf = {\r\n\t\t\t\t\t\t[Op.like]: shhf\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\twhere.shhf = {\r\n\t\t\t\t\t\t[Op.eq]: shhf\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tlet userid = req.query.userid\r\n\t\t\tif (userid) {//学生id\r\n\r\n\t\t\t\tif (userid.indexOf('%') != -1) {\r\n\t\t\t\t\twhere.userid = {\r\n\t\t\t\t\t\t[Op.like]: userid\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\twhere.userid = {\r\n\t\t\t\t\t\t[Op.eq]: userid\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tlet tableName = req.session.userinfo === undefined ? jwt.decode(req.headers.token).tableName : req.session.userinfo.tableName\r\n\t\t\tif(tableName == 'qiye') {\r\n\t\t\t\twhere.qiyezhanghao = {\r\n\t\t\t\t\t[Op.eq]: req.session.userinfo === undefined ? jwt.decode(req.headers.token).username : req.session.userinfo.qiyezhanghao\r\n\t\t\t\t}\r\n\t\t\t\tif (where['userid'] != undefined) {\r\n\t\t\t\t\tdelete where.userid\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif(tableName == 'xuesheng') {\r\n\t\t\t\twhere.xuehao = {\r\n\t\t\t\t\t[Op.eq]: req.session.userinfo === undefined ? jwt.decode(req.headers.token).username : req.session.userinfo.xuehao\r\n\t\t\t\t}\r\n\t\t\t\tif (where['userid'] != undefined) {\r\n\t\t\t\t\tdelete where.userid\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tlet result = await XuanjianghuibaomingModel.findAndCountAll({\r\n\t\t\t\torder: [[sort, order]],\r\n\t\t\t\twhere,\r\n\t\t\t\toffset: (page - 1) * limit,\r\n\t\t\t\tlimit\r\n\t\t\t})\r\n\t\t\t\r\n\t\t\tresult.currPage = page\r\n\t\t\tresult.pageSize = limit\r\n\r\n\t\t\ttoRes.page(res, 0, result)\r\n\t\t} catch(err) {\r\n\t\t\ttoRes.session(res, 500, '服务器错误！', '', 500)\r\n\t\t}\r\n\t})\r\n\r\n    // 分页接口（前端）\r\n\tapi.get('/list', async (req, res) => {\r\n\r\n\t\ttry {\r\n\r\n\t\t\tlet page = parseInt(req.query.page) || 1\r\n\t\t\tlet limit = parseInt(req.query.limit) || 10\r\n\t\t\tlet sort = req.query.sort || 'id'\r\n\t\t\tlet order = req.query.order || 'asc'\r\n\r\n\t\t\tlet where = {}\r\n\t\t\tlet crossuserid = req.query.crossuserid\r\n\t\t\tif (crossuserid) {\r\n\t\t\t\twhere.crossuserid = {\r\n\t\t\t\t\t[Op.eq]: crossuserid\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tlet crossrefid = req.query.crossrefid\r\n\t\t\tif (crossrefid) {\r\n\t\t\t\twhere.crossrefid = {\r\n\t\t\t\t\t[Op.eq]: crossrefid\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tlet sfsh = req.query.sfsh\r\n\t\t\tif (sfsh) {\r\n\t\t\t\twhere.sfsh = {\r\n\t\t\t\t\t[Op.eq]: sfsh\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tlet biaoti = req.query.biaoti\r\n\t\t\tif (biaoti) {\r\n\r\n\t\t\t\tif (biaoti.indexOf('%') != -1) {\r\n\t\t\t\t\twhere.biaoti = {\r\n\t\t\t\t\t\t[Op.like]: biaoti\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\twhere.biaoti = {\r\n\t\t\t\t\t\t[Op.eq]: biaoti\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tlet qiyemingcheng = req.query.qiyemingcheng\r\n\t\t\tif (qiyemingcheng) {\r\n\r\n\t\t\t\tif (qiyemingcheng.indexOf('%') != -1) {\r\n\t\t\t\t\twhere.qiyemingcheng = {\r\n\t\t\t\t\t\t[Op.like]: qiyemingcheng\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\twhere.qiyemingcheng = {\r\n\t\t\t\t\t\t[Op.eq]: qiyemingcheng\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tlet tableName = req.session.userinfo === undefined ? jwt.decode(req.headers.token).tableName : req.session.userinfo.tableName\r\n\t\t\tif(tableName == 'qiye') {\r\n\t\t\t\twhere.qiyezhanghao = {\r\n\t\t\t\t\t[Op.eq]: req.session.userinfo === undefined ? jwt.decode(req.headers.token).username : req.session.userinfo.qiyezhanghao\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif(tableName == 'xuesheng') {\r\n\t\t\t\twhere.xuehao = {\r\n\t\t\t\t\t[Op.eq]: req.session.userinfo === undefined ? jwt.decode(req.headers.token).username : req.session.userinfo.xuehao\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\r\n\t\t\tlet result = await XuanjianghuibaomingModel.findAndCountAll({\r\n\t\t\t\torder: [[sort, order]],\r\n\t\t\t\twhere,\r\n\t\t\t\toffset: (page - 1) * limit,\r\n\t\t\t\tlimit\r\n\t\t\t})\r\n\t\t\t\r\n\t\t\tresult.currPage = page\r\n\t\t\tresult.pageSize = limit\r\n\r\n\t\t\ttoRes.page(res, 0, result)\r\n\t\t} catch(err) {\r\n\t\t\ttoRes.session(res, 401, '您的权限不够！', '', 200)\r\n\t\t}\r\n\t})\r\n\r\n\r\n\t// 保存接口（后端）\r\n\tapi.post('/save', async (req, res) => {\r\n\r\n\t\ttry {\r\n\r\n\t\t\tObject.keys(req.body).forEach(item=>{\r\n\t\t\t\tif(req.body[item] == '')  delete req.body[item]\r\n\t\t\t})\r\n\r\n\t\t\tif (!req.body.userid) {\r\n\t\t\t\treq.body.userid = req.session.userinfo === undefined ? jwt.decode(req.headers.token).id : req.session.userinfo.id\r\n\t\t\t}\r\n\r\n\t\t\tconst userinfo = await XuanjianghuibaomingModel.create(req.body)\r\n\r\n\t\t\tif (userinfo === null) {\r\n\t\t\t\ttoRes.session(res, -1, '添加失败！')\r\n\t\t\t} else {\r\n\t\t\t\ttoRes.session(res, 0, '添加成功！')\r\n\t\t\t}\r\n\t\t} catch(err) {\r\n\t\t\ttoRes.session(res, 500, '服务器错误！', '', 500)\r\n\t\t}\r\n\t})\r\n\r\n    // 保存接口（前端）\r\n\tapi.post('/add', async (req, res) => {\r\n\r\n\t\ttry {\r\n\r\n\t\t\tObject.keys(req.body).forEach(item=>{\r\n\t\t\t\tif(req.body[item] == '')  delete req.body[item]\r\n\t\t\t})\r\n\r\n\t\t\tif (jwt.decode(req.headers.token) == null) {\r\n\t\t\t\ttoRes.session(res, 401, '请登录后再操作', '', 401)\r\n\t\t\t}\r\n\r\n\t\t\treq.body.userid = req.session.userinfo === undefined ? jwt.decode(req.headers.token).id : req.session.userinfo.id\r\n\r\n\t\t\tconst userinfo = await XuanjianghuibaomingModel.create(req.body)\r\n\r\n\t\t\tif (userinfo === null) {\r\n\t\t\t\ttoRes.session(res, -1, '添加失败！')\r\n\t\t\t} else {\r\n\t\t\t\ttoRes.session(res, 0, '添加成功！')\r\n\t\t\t}\r\n\t\t} catch(err) {\r\n\t\t\ttoRes.session(res, 500, '服务器错误！', '', 500)\r\n\t\t}\r\n\t})\r\n\r\n\t// 更新接口\r\n\tapi.post('/update', async (req, res) => {\r\n\r\n\t\ttry {\r\n\r\n\t\t\tawait XuanjianghuibaomingModel.update(req.body, {\r\n\t\t\t\twhere: {\r\n\t\t\t\t  id: req.body.id || 0\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\ttoRes.session(res, 0, '编辑成功！')\r\n\t\t} catch(err) {\r\n\t\t\ttoRes.session(res, 500, '服务器错误！', '', 500)\r\n\t\t}\r\n\t})\r\n\r\n\t// 删除接口\r\n\tapi.post('/delete', async (req, res) => {\r\n\r\n\t\ttry {\r\n\r\n\t\t\tawait XuanjianghuibaomingModel.destroy({\r\n\t\t\t\twhere: {\r\n\t\t\t\t  id: {\r\n\t\t\t\t\t[Op.in]: req.body\r\n\t\t\t\t  }\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\ttoRes.session(res, 0, '删除成功！')\r\n\t\t} catch(err) {\r\n\t\t\ttoRes.session(res, 500, '服务器错误！', '', 500)\r\n\t\t}\r\n\t})\r\n\r\n\t// 详情接口（后端）\r\n\tapi.all('/info/:id', async (req, res) => {\r\n\r\n\t\ttry {\r\n\t\t\ttoRes.record(res, 0, await XuanjianghuibaomingModel.findOne({ where: { id: req.params.id } }))\r\n\t\t} catch(err) {\r\n\t\t\ttoRes.session(res, 500, '服务器错误！', '', 500)\r\n\t\t}\r\n\t})\r\n\r\n    // 详情接口（前端）\r\n\tapi.all('/detail/:id', async (req, res) => {\r\n\r\n\t\ttry {\r\n\t\t\ttoRes.record(res, 0, await XuanjianghuibaomingModel.findOne({ where: { id: req.params.id } }))\r\n\t\t} catch(err) {\r\n\t\t\ttoRes.session(res, 500, '服务器错误！', '', 500)\r\n\t\t}\r\n\t})\r\n\r\n\t// 获取需要提醒的记录数接口\r\n\tapi.get('/remind/:columnName/:type', async (req, res) => {\r\n\r\n\t\ttry {\r\n\r\n\t\t\tlet sql = 'SELECT 0 AS count'\r\n\t\t\t\r\n\t\t\tif (req.params.type == 1) {\r\n\t\t\t\tif (req.query.remindstart) sql = \"SELECT COUNT(*) AS count FROM xuanjianghuibaoming WHERE \" + req.params.columnName + \" >= '\" + req.query.remindstart + \"'\"\r\n\t\t\t\tif (req.query.remindend) sql = \"SELECT COUNT(*) AS count FROM xuanjianghuibaoming WHERE \" + req.params.columnName + \" <= '\" + req.query.remindend + \"'\"\r\n\r\n\t\t\t\tif (req.query.remindstart && req.query.remindend) {\r\n\t\t\t\t\tsql = \"SELECT COUNT(*) AS count FROM xuanjianghuibaoming WHERE \" + req.params.columnName + \" >= '\" + req.query.remindstart + \"' AND \" + req.params.columnName + \" <= '\" + req.query.remindend + \"'\"\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (req.params.type == 2) {\r\n\t\t\t\tif (req.query.remindstart) {\r\n\t\t\t\t\tlet remindStart = util.getDateTimeFormat(0 + Number(req.query.remindstart), \"yyyy-MM-dd\")\r\n\t\t\t\t\tsql = \"SELECT COUNT(*) AS count FROM xuanjianghuibaoming WHERE \" + req.params.columnName + \" >= '\" + remindStart + \"'\"\r\n\t\t\t\t}\r\n\t\t\t\tif (req.query.remindend) {\r\n\t\t\t\t\tlet remindEnd = util.getDateTimeFormat(req.query.remindend, \"yyyy-MM-dd\")\r\n\t\t\t\t\tsql = \"SELECT COUNT(*) AS count FROM xuanjianghuibaoming WHERE \" + req.params.columnName + \" <= '\" + remindEnd + \"'\"\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (req.query.remindstart && req.query.remindend) {\r\n\t\t\t\t\tlet remindStart = util.getDateTimeFormat(0 + Number(req.query.remindstart), \"yyyy-MM-dd\")\r\n\t\t\t\t\tlet remindEnd = util.getDateTimeFormat(req.query.remindend, \"yyyy-MM-dd\")\r\n\t\t\t\t\tsql = \"SELECT COUNT(*) AS count FROM xuanjianghuibaoming WHERE \" + req.params.columnName + \" >= '\" + remindStart + \"' AND \" + req.params.columnName + \" <= '\" + remindEnd + \"'\"\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tconst results = await sequelize.query(sql, {\r\n\t\t\t\tplain: true,\r\n\t\t\t\traw: true,\r\n\t\t\t\ttype: QueryTypes.SELECT\r\n\t\t\t})\r\n\r\n\t\t\ttoRes.count(res, 0, results.count)\r\n\t\t} catch(err) {\r\n\t\t\t\r\n\t\t\ttoRes.session(res, 500, '服务器错误！', '', 500)\r\n\t\t}\r\n\t})\r\n\r\n\t// 分组统计接口\r\n\tapi.get('/group/:columnName', async (req, res) => {\r\n\r\n\t\ttry {\r\n\r\n\t\t\tlet sql = \"\"\r\n\t\t\tlet columnName = req.params.columnName\r\n\t\t\tlet where = \" WHERE 1 = 1 \"\r\n\t\t\tlet tableName = req.session.userinfo === undefined ? jwt.decode(req.headers.token).tableName : req.session.userinfo.tableName\r\n\t\t\tif(tableName == 'qiye') {\r\n\t\t\t\twhere += \" AND qiyezhanghao = '\" + jwt.decode(req.headers.token).username + \"' \";\r\n\t\t\t}\r\n\t\t\tif(tableName == 'xuesheng') {\r\n\t\t\t\twhere += \" AND xuehao = '\" + jwt.decode(req.headers.token).username + \"' \";\r\n\t\t\t}\r\n\t\t\tsql = \"SELECT COUNT(*) AS total, \" + columnName + \" FROM xuanjianghuibaoming \" + where + \" GROUP BY \" + columnName + \" LIMIT 10\" \r\n\t\t\ttoRes.record(res, 0, await sequelize.query(sql, {\r\n\t\t\t\tplain: false,\r\n\t\t\t\traw: true,\r\n\t\t\t\ttype: QueryTypes.SELECT\r\n\t\t\t}))\r\n\t\t} catch(err) {\r\n\r\n\t\t\ttoRes.session(res, 500, '服务器错误！', '', 500)\r\n\t\t}\r\n\t})\r\n\r\n\t// 统计指定字段\r\n\tapi.get('/value/:xColumnName/:yColumnName', async (req, res) => {\r\n\r\n\t\ttry {\r\n\r\n\t\t\tlet sql = \"\"\r\n\t\t\tlet xColumnName = req.params.xColumnName\r\n\t\t\tlet yColumnName = req.params.yColumnName\r\n\t\t\tlet where = \" WHERE 1 = 1 \"\r\n\t\t\tlet tableName = req.session.userinfo === undefined ? jwt.decode(req.headers.token).tableName : req.session.userinfo.tableName\r\n\t\t\tif(tableName == 'qiye') {\r\n\t\t\t\twhere += \" AND qiyezhanghao = '\" + jwt.decode(req.headers.token).username + \"' \";\r\n\t\t\t}\r\n\t\t\tif(tableName == 'xuesheng') {\r\n\t\t\t\twhere += \" AND xuehao = '\" + jwt.decode(req.headers.token).username + \"' \";\r\n\t\t\t}\r\n\t\t\r\n\t\t\tsql = \"SELECT \" + xColumnName + \", SUM(\" + yColumnName + \") AS total FROM xuanjianghuibaoming \" + where + \" GROUP BY \" + xColumnName + \" DESC LIMIT 10\"\r\n\t\t\t\r\n\t\t\ttoRes.record(res, 0, await sequelize.query(sql, {\r\n\t\t\t\tplain: false,\r\n\t\t\t\traw: true,\r\n\t\t\t\ttype: QueryTypes.SELECT\r\n\t\t\t}))\r\n\t\t} catch(err) {\r\n\t\t\ttoRes.session(res, 500, '服务器错误！', '', 500)\r\n\t\t}\r\n\t})\r\n\r\n\t// 按日期统计\r\n\tapi.get('/value/:xColumnName/:yColumnName/:timeStatType', async (req, res) => {\r\n\r\n\t\ttry {\r\n\t\t\t\r\n\t\t\tlet sql = \"\"\r\n\t\t\tlet xColumnName = req.params.xColumnName\r\n\t\t\tlet yColumnName = req.params.yColumnName\r\n\t\t\tlet timeStatType = req.params.timeStatType\r\n\t\t\tlet tableName = \"xuanjianghuibaoming\"\r\n\t\t\tlet where = \" WHERE 1 = 1 \"\r\n\t\t\tif (jwt.decode(req.headers.token).role != '管理员') {\r\n\t\t\t\twhere += \" AND qiyezhanghao = '\" + jwt.decode(req.headers.token).username + \"' \";\r\n\t\t\t}\r\n\t\t\tif (jwt.decode(req.headers.token).role != '管理员') {\r\n\t\t\t\twhere += \" AND xuehao = '\" + jwt.decode(req.headers.token).username + \"' \";\r\n\t\t\t}\r\n            if (config.dbConnection.dbtype.toLowerCase() == \"mysql\") {\r\n                if (timeStatType == \"日\")\r\n                    sql = \"SELECT DATE_FORMAT(\" + xColumnName + \", '%Y-%m-%d') \" + xColumnName + \", sum(\" + yColumnName + \") total FROM \" + tableName + where + \" GROUP BY DATE_FORMAT(\" + xColumnName + \", '%Y-%m-%d') LIMIT 10\";\r\n                if (timeStatType == \"月\")\r\n                    sql = \"SELECT DATE_FORMAT(\" + xColumnName + \", '%Y-%m') \" + xColumnName + \", sum(\" + yColumnName + \") total FROM \" + tableName + where + \" GROUP BY DATE_FORMAT(\" + xColumnName + \", '%Y-%m')  LIMIT 10\";\r\n                if (timeStatType == \"年\")\r\n                    sql = \"SELECT DATE_FORMAT(\" + xColumnName + \", '%Y') \" + xColumnName + \", sum(\" + yColumnName + \") total FROM \" + tableName + where + \" GROUP BY DATE_FORMAT(\" + xColumnName + \", '%Y')  LIMIT 10\";\r\n            } else {\r\n                if (timeStatType == \"日\")\r\n                    sql = \"SELECT DATE_FORMAT(VARCHAR(10),\" + xColumnName + \", 120) \" + xColumnName + \", sum(\" + yColumnName + \") total FROM \" + tableName + where + \" GROUP BY DATE_FORMAT(VARCHAR(10),\" + xColumnName + \", 120)  LIMIT 10\";\r\n                if (timeStatType == \"月\")\r\n                    sql = \"SELECT DATE_FORMAT(VARCHAR(7),\" + xColumnName + \", 120) \" + xColumnName + \", sum(\" + yColumnName + \") total FROM \" + tableName + where + \" GROUP BY DATE_FORMAT(VARCHAR(7),\" + xColumnName + \", 120)  LIMIT 10\";\r\n                if (timeStatType == \"年\")\r\n                    sql = \"SELECT DATE_FORMAT(VARCHAR(4),\" + xColumnName + \", 120) \" + xColumnName + \", sum(\" + yColumnName + \") total FROM \" + tableName + where + \" GROUP BY DATE_FORMAT(VARCHAR(4),\" + xColumnName + \", 120)  LIMIT 10\";\r\n            }\r\n\t\t\ttoRes.record(res, 0, await sequelize.query(sql, {\r\n\t\t\t\tplain: false,\r\n\t\t\t\traw: true,\r\n\t\t\t\ttype: QueryTypes.SELECT\r\n\t\t\t}))\r\n\t\t} catch(err) {\r\n\t\t\ttoRes.session(res, 500, '服务器错误！', '', 500)\r\n\t\t}\r\n\t})\r\n\r\n\treturn api\r\n}\r\n"]}