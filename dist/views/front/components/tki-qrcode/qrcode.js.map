{"version":3,"sources":["../../../../../src/views/front/components/tki-qrcode/qrcode.js"],"names":["QRCode","unicodeFormat8","code","c0","c1","c2","getUTF8Bytes","string","utf8codes","i","length","charCodeAt","utf8","j","push","QRCodeAlg","data","errorCorrectLevel","typeNumber","modules","moduleCount","dataCache","rsBlocks","totalDataCount","utf8bytes","make","prototype","constructor","getModuleCount","getRightType","createData","createQrcode","makeImpl","maskPattern","Array","row","setupPositionProbePattern","setupPositionAdjustPattern","setupTimingPattern","setupTypeInfo","setupTypeNumber","mapData","col","r","c","minLostPoint","pattern","bestModules","lostPoint","QRUtil","getLostPoint","pos","getPatternPosition","test","bits","getBCHTypeNumber","mod","Math","floor","QRErrorCorrectLevel","getBCHTypeInfo","buffer","QRBitBuffer","lengthBits","put","l","putBit","PAD0","PAD1","createBytes","offset","maxDcCount","maxEcCount","rsBlock","count","totalCount","dataCount","dcdata","ecdata","dcCount","ecCount","max","rsPoly","getErrorCorrectPolynomial","rawPoly","QRPolynomial","getLength","modPoly","modIndex","get","index","inc","bitIndex","byteIndex","dark","mask","getMask","QRMaskPattern","PATTERN000","PATTERN001","PATTERN010","PATTERN011","PATTERN100","PATTERN101","PATTERN110","PATTERN111","PATTERN_POSITION_TABLE","G15","G18","G15_MASK","d","getBCHDigit","digit","Error","errorCorrectLength","a","multiply","QRMath","gexp","qrCode","darkCount","sameCount","head","current","ratio","abs","glog","n","LOG_TABLE","EXP_TABLE","num","shift","undefined","e","tl","el","RS_BLOCK_TABLE","lengthBytes","bufIndex","bit","qrcodeAlgObjCache","opt","options","text","size","correctLevel","background","foreground","pdground","image","imageSize","canvasId","context","usingComponents","showLoading","loadingText","qrCodeAlg","obj","getForeGround","config","createCanvas","uni","title","ctx","createCanvasContext","ratioSize","ratioImgSize","tileW","toPrecision","tileH","w","ceil","h","setFillStyle","fillRect","round","drawRoundedRect","ctxi","x","y","width","height","lineWidth","fill","stroke","setLineWidth","setStrokeStyle","beginPath","moveTo","arcTo","closePath","Number","toFixed","drawImage","setTimeout","draw","canvasToTempFilePath","destWidth","destHeight","quality","success","res","cbResult","tempFilePath","fail","complete","hideLoading","empty","v","tp","rt","String","JSON","stringify","clear","fn","clearRect"],"mappings":"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","file":"qrcode.js","sourcesContent":["let QRCode = {};\r\n(function () {\r\n    /**\r\n     * 获取单个字符的utf8编码\r\n     * unicode BMP平面约65535个字符\r\n     * @param {num} code\r\n     * return {array}\r\n     */\r\n    function unicodeFormat8(code) {\r\n        // 1 byte\r\n        var c0, c1, c2;\r\n        if (code < 128) {\r\n            return [code];\r\n            // 2 bytes\r\n        } else if (code < 2048) {\r\n            c0 = 192 + (code >> 6);\r\n            c1 = 128 + (code & 63);\r\n            return [c0, c1];\r\n            // 3 bytes\r\n        } else {\r\n            c0 = 224 + (code >> 12);\r\n            c1 = 128 + (code >> 6 & 63);\r\n            c2 = 128 + (code & 63);\r\n            return [c0, c1, c2];\r\n        }\r\n    }\r\n    /**\r\n     * 获取字符串的utf8编码字节串\r\n     * @param {string} string\r\n     * @return {array}\r\n     */\r\n    function getUTF8Bytes(string) {\r\n        var utf8codes = [];\r\n        for (var i = 0; i < string.length; i++) {\r\n            var code = string.charCodeAt(i);\r\n            var utf8 = unicodeFormat8(code);\r\n            for (var j = 0; j < utf8.length; j++) {\r\n                utf8codes.push(utf8[j]);\r\n            }\r\n        }\r\n        return utf8codes;\r\n    }\r\n    /**\r\n     * 二维码算法实现\r\n     * @param {string} data              要编码的信息字符串\r\n     * @param {num} errorCorrectLevel 纠错等级\r\n     */\r\n    function QRCodeAlg(data, errorCorrectLevel) {\r\n        this.typeNumber = -1; //版本\r\n        this.errorCorrectLevel = errorCorrectLevel;\r\n        this.modules = null; //二维矩阵，存放最终结果\r\n        this.moduleCount = 0; //矩阵大小\r\n        this.dataCache = null; //数据缓存\r\n        this.rsBlocks = null; //版本数据信息\r\n        this.totalDataCount = -1; //可使用的数据量\r\n        this.data = data;\r\n        this.utf8bytes = getUTF8Bytes(data);\r\n        this.make();\r\n    }\r\n    QRCodeAlg.prototype = {\r\n        constructor: QRCodeAlg,\r\n        /**\r\n         * 获取二维码矩阵大小\r\n         * @return {num} 矩阵大小\r\n         */\r\n        getModuleCount: function () {\r\n            return this.moduleCount;\r\n        },\r\n        /**\r\n         * 编码\r\n         */\r\n        make: function () {\r\n            this.getRightType();\r\n            this.dataCache = this.createData();\r\n            this.createQrcode();\r\n        },\r\n        /**\r\n         * 设置二位矩阵功能图形\r\n         * @param  {bool} test 表示是否在寻找最好掩膜阶段\r\n         * @param  {num} maskPattern 掩膜的版本\r\n         */\r\n        makeImpl: function (maskPattern) {\r\n            this.moduleCount = this.typeNumber * 4 + 17;\r\n            this.modules = new Array(this.moduleCount);\r\n            for (var row = 0; row < this.moduleCount; row++) {\r\n                this.modules[row] = new Array(this.moduleCount);\r\n            }\r\n            this.setupPositionProbePattern(0, 0);\r\n            this.setupPositionProbePattern(this.moduleCount - 7, 0);\r\n            this.setupPositionProbePattern(0, this.moduleCount - 7);\r\n            this.setupPositionAdjustPattern();\r\n            this.setupTimingPattern();\r\n            this.setupTypeInfo(true, maskPattern);\r\n            if (this.typeNumber >= 7) {\r\n                this.setupTypeNumber(true);\r\n            }\r\n            this.mapData(this.dataCache, maskPattern);\r\n        },\r\n        /**\r\n         * 设置二维码的位置探测图形\r\n         * @param  {num} row 探测图形的中心横坐标\r\n         * @param  {num} col 探测图形的中心纵坐标\r\n         */\r\n        setupPositionProbePattern: function (row, col) {\r\n            for (var r = -1; r <= 7; r++) {\r\n                if (row + r <= -1 || this.moduleCount <= row + r) continue;\r\n                for (var c = -1; c <= 7; c++) {\r\n                    if (col + c <= -1 || this.moduleCount <= col + c) continue;\r\n                    if ((0 <= r && r <= 6 && (c == 0 || c == 6)) || (0 <= c && c <= 6 && (r == 0 || r == 6)) || (2 <= r && r <= 4 && 2 <= c && c <= 4)) {\r\n                        this.modules[row + r][col + c] = true;\r\n                    } else {\r\n                        this.modules[row + r][col + c] = false;\r\n                    }\r\n                }\r\n            }\r\n        },\r\n        /**\r\n         * 创建二维码\r\n         * @return {[type]} [description]\r\n         */\r\n        createQrcode: function () {\r\n            var minLostPoint = 0;\r\n            var pattern = 0;\r\n            var bestModules = null;\r\n            for (var i = 0; i < 8; i++) {\r\n                this.makeImpl(i);\r\n                var lostPoint = QRUtil.getLostPoint(this);\r\n                if (i == 0 || minLostPoint > lostPoint) {\r\n                    minLostPoint = lostPoint;\r\n                    pattern = i;\r\n                    bestModules = this.modules;\r\n                }\r\n            }\r\n            this.modules = bestModules;\r\n            this.setupTypeInfo(false, pattern);\r\n            if (this.typeNumber >= 7) {\r\n                this.setupTypeNumber(false);\r\n            }\r\n        },\r\n        /**\r\n         * 设置定位图形\r\n         * @return {[type]} [description]\r\n         */\r\n        setupTimingPattern: function () {\r\n            for (var r = 8; r < this.moduleCount - 8; r++) {\r\n                if (this.modules[r][6] != null) {\r\n                    continue;\r\n                }\r\n                this.modules[r][6] = (r % 2 == 0);\r\n                if (this.modules[6][r] != null) {\r\n                    continue;\r\n                }\r\n                this.modules[6][r] = (r % 2 == 0);\r\n            }\r\n        },\r\n        /**\r\n         * 设置矫正图形\r\n         * @return {[type]} [description]\r\n         */\r\n        setupPositionAdjustPattern: function () {\r\n            var pos = QRUtil.getPatternPosition(this.typeNumber);\r\n            for (var i = 0; i < pos.length; i++) {\r\n                for (var j = 0; j < pos.length; j++) {\r\n                    var row = pos[i];\r\n                    var col = pos[j];\r\n                    if (this.modules[row][col] != null) {\r\n                        continue;\r\n                    }\r\n                    for (var r = -2; r <= 2; r++) {\r\n                        for (var c = -2; c <= 2; c++) {\r\n                            if (r == -2 || r == 2 || c == -2 || c == 2 || (r == 0 && c == 0)) {\r\n                                this.modules[row + r][col + c] = true;\r\n                            } else {\r\n                                this.modules[row + r][col + c] = false;\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        },\r\n        /**\r\n         * 设置版本信息（7以上版本才有）\r\n         * @param  {bool} test 是否处于判断最佳掩膜阶段\r\n         * @return {[type]}      [description]\r\n         */\r\n        setupTypeNumber: function (test) {\r\n            var bits = QRUtil.getBCHTypeNumber(this.typeNumber);\r\n            for (var i = 0; i < 18; i++) {\r\n                var mod = (!test && ((bits >> i) & 1) == 1);\r\n                this.modules[Math.floor(i / 3)][i % 3 + this.moduleCount - 8 - 3] = mod;\r\n                this.modules[i % 3 + this.moduleCount - 8 - 3][Math.floor(i / 3)] = mod;\r\n            }\r\n        },\r\n        /**\r\n         * 设置格式信息（纠错等级和掩膜版本）\r\n         * @param  {bool} test\r\n         * @param  {num} maskPattern 掩膜版本\r\n         * @return {}\r\n         */\r\n        setupTypeInfo: function (test, maskPattern) {\r\n            var data = (QRErrorCorrectLevel[this.errorCorrectLevel] << 3) | maskPattern;\r\n            var bits = QRUtil.getBCHTypeInfo(data);\r\n            // vertical\r\n            for (var i = 0; i < 15; i++) {\r\n                var mod = (!test && ((bits >> i) & 1) == 1);\r\n                if (i < 6) {\r\n                    this.modules[i][8] = mod;\r\n                } else if (i < 8) {\r\n                    this.modules[i + 1][8] = mod;\r\n                } else {\r\n                    this.modules[this.moduleCount - 15 + i][8] = mod;\r\n                }\r\n                // horizontal\r\n                var mod = (!test && ((bits >> i) & 1) == 1);\r\n                if (i < 8) {\r\n                    this.modules[8][this.moduleCount - i - 1] = mod;\r\n                } else if (i < 9) {\r\n                    this.modules[8][15 - i - 1 + 1] = mod;\r\n                } else {\r\n                    this.modules[8][15 - i - 1] = mod;\r\n                }\r\n            }\r\n            // fixed module\r\n            this.modules[this.moduleCount - 8][8] = (!test);\r\n        },\r\n        /**\r\n         * 数据编码\r\n         * @return {[type]} [description]\r\n         */\r\n        createData: function () {\r\n            var buffer = new QRBitBuffer();\r\n            var lengthBits = this.typeNumber > 9 ? 16 : 8;\r\n            buffer.put(4, 4); //添加模式\r\n            buffer.put(this.utf8bytes.length, lengthBits);\r\n            for (var i = 0, l = this.utf8bytes.length; i < l; i++) {\r\n                buffer.put(this.utf8bytes[i], 8);\r\n            }\r\n            if (buffer.length + 4 <= this.totalDataCount * 8) {\r\n                buffer.put(0, 4);\r\n            }\r\n            // padding\r\n            while (buffer.length % 8 != 0) {\r\n                buffer.putBit(false);\r\n            }\r\n            // padding\r\n            while (true) {\r\n                if (buffer.length >= this.totalDataCount * 8) {\r\n                    break;\r\n                }\r\n                buffer.put(QRCodeAlg.PAD0, 8);\r\n                if (buffer.length >= this.totalDataCount * 8) {\r\n                    break;\r\n                }\r\n                buffer.put(QRCodeAlg.PAD1, 8);\r\n            }\r\n            return this.createBytes(buffer);\r\n        },\r\n        /**\r\n         * 纠错码编码\r\n         * @param  {buffer} buffer 数据编码\r\n         * @return {[type]}\r\n         */\r\n        createBytes: function (buffer) {\r\n            var offset = 0;\r\n            var maxDcCount = 0;\r\n            var maxEcCount = 0;\r\n            var length = this.rsBlock.length / 3;\r\n            var rsBlocks = new Array();\r\n            for (var i = 0; i < length; i++) {\r\n                var count = this.rsBlock[i * 3 + 0];\r\n                var totalCount = this.rsBlock[i * 3 + 1];\r\n                var dataCount = this.rsBlock[i * 3 + 2];\r\n                for (var j = 0; j < count; j++) {\r\n                    rsBlocks.push([dataCount, totalCount]);\r\n                }\r\n            }\r\n            var dcdata = new Array(rsBlocks.length);\r\n            var ecdata = new Array(rsBlocks.length);\r\n            for (var r = 0; r < rsBlocks.length; r++) {\r\n                var dcCount = rsBlocks[r][0];\r\n                var ecCount = rsBlocks[r][1] - dcCount;\r\n                maxDcCount = Math.max(maxDcCount, dcCount);\r\n                maxEcCount = Math.max(maxEcCount, ecCount);\r\n                dcdata[r] = new Array(dcCount);\r\n                for (var i = 0; i < dcdata[r].length; i++) {\r\n                    dcdata[r][i] = 0xff & buffer.buffer[i + offset];\r\n                }\r\n                offset += dcCount;\r\n                var rsPoly = QRUtil.getErrorCorrectPolynomial(ecCount);\r\n                var rawPoly = new QRPolynomial(dcdata[r], rsPoly.getLength() - 1);\r\n                var modPoly = rawPoly.mod(rsPoly);\r\n                ecdata[r] = new Array(rsPoly.getLength() - 1);\r\n                for (var i = 0; i < ecdata[r].length; i++) {\r\n                    var modIndex = i + modPoly.getLength() - ecdata[r].length;\r\n                    ecdata[r][i] = (modIndex >= 0) ? modPoly.get(modIndex) : 0;\r\n                }\r\n            }\r\n            var data = new Array(this.totalDataCount);\r\n            var index = 0;\r\n            for (var i = 0; i < maxDcCount; i++) {\r\n                for (var r = 0; r < rsBlocks.length; r++) {\r\n                    if (i < dcdata[r].length) {\r\n                        data[index++] = dcdata[r][i];\r\n                    }\r\n                }\r\n            }\r\n            for (var i = 0; i < maxEcCount; i++) {\r\n                for (var r = 0; r < rsBlocks.length; r++) {\r\n                    if (i < ecdata[r].length) {\r\n                        data[index++] = ecdata[r][i];\r\n                    }\r\n                }\r\n            }\r\n            return data;\r\n\r\n        },\r\n        /**\r\n         * 布置模块，构建最终信息\r\n         * @param  {} data\r\n         * @param  {} maskPattern\r\n         * @return {}\r\n         */\r\n        mapData: function (data, maskPattern) {\r\n            var inc = -1;\r\n            var row = this.moduleCount - 1;\r\n            var bitIndex = 7;\r\n            var byteIndex = 0;\r\n            for (var col = this.moduleCount - 1; col > 0; col -= 2) {\r\n                if (col == 6) col--;\r\n                while (true) {\r\n                    for (var c = 0; c < 2; c++) {\r\n                        if (this.modules[row][col - c] == null) {\r\n                            var dark = false;\r\n                            if (byteIndex < data.length) {\r\n                                dark = (((data[byteIndex] >>> bitIndex) & 1) == 1);\r\n                            }\r\n                            var mask = QRUtil.getMask(maskPattern, row, col - c);\r\n                            if (mask) {\r\n                                dark = !dark;\r\n                            }\r\n                            this.modules[row][col - c] = dark;\r\n                            bitIndex--;\r\n                            if (bitIndex == -1) {\r\n                                byteIndex++;\r\n                                bitIndex = 7;\r\n                            }\r\n                        }\r\n                    }\r\n                    row += inc;\r\n                    if (row < 0 || this.moduleCount <= row) {\r\n                        row -= inc;\r\n                        inc = -inc;\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     * 填充字段\r\n     */\r\n    QRCodeAlg.PAD0 = 0xEC;\r\n    QRCodeAlg.PAD1 = 0x11;\r\n    //---------------------------------------------------------------------\r\n    // 纠错等级对应的编码\r\n    //---------------------------------------------------------------------\r\n    var QRErrorCorrectLevel = [1, 0, 3, 2];\r\n    //---------------------------------------------------------------------\r\n    // 掩膜版本\r\n    //---------------------------------------------------------------------\r\n    var QRMaskPattern = {\r\n        PATTERN000: 0,\r\n        PATTERN001: 1,\r\n        PATTERN010: 2,\r\n        PATTERN011: 3,\r\n        PATTERN100: 4,\r\n        PATTERN101: 5,\r\n        PATTERN110: 6,\r\n        PATTERN111: 7\r\n    };\r\n    //---------------------------------------------------------------------\r\n    // 工具类\r\n    //---------------------------------------------------------------------\r\n    var QRUtil = {\r\n        /*\r\n        每个版本矫正图形的位置\r\n         */\r\n        PATTERN_POSITION_TABLE: [\r\n            [],\r\n            [6, 18],\r\n            [6, 22],\r\n            [6, 26],\r\n            [6, 30],\r\n            [6, 34],\r\n            [6, 22, 38],\r\n            [6, 24, 42],\r\n            [6, 26, 46],\r\n            [6, 28, 50],\r\n            [6, 30, 54],\r\n            [6, 32, 58],\r\n            [6, 34, 62],\r\n            [6, 26, 46, 66],\r\n            [6, 26, 48, 70],\r\n            [6, 26, 50, 74],\r\n            [6, 30, 54, 78],\r\n            [6, 30, 56, 82],\r\n            [6, 30, 58, 86],\r\n            [6, 34, 62, 90],\r\n            [6, 28, 50, 72, 94],\r\n            [6, 26, 50, 74, 98],\r\n            [6, 30, 54, 78, 102],\r\n            [6, 28, 54, 80, 106],\r\n            [6, 32, 58, 84, 110],\r\n            [6, 30, 58, 86, 114],\r\n            [6, 34, 62, 90, 118],\r\n            [6, 26, 50, 74, 98, 122],\r\n            [6, 30, 54, 78, 102, 126],\r\n            [6, 26, 52, 78, 104, 130],\r\n            [6, 30, 56, 82, 108, 134],\r\n            [6, 34, 60, 86, 112, 138],\r\n            [6, 30, 58, 86, 114, 142],\r\n            [6, 34, 62, 90, 118, 146],\r\n            [6, 30, 54, 78, 102, 126, 150],\r\n            [6, 24, 50, 76, 102, 128, 154],\r\n            [6, 28, 54, 80, 106, 132, 158],\r\n            [6, 32, 58, 84, 110, 136, 162],\r\n            [6, 26, 54, 82, 110, 138, 166],\r\n            [6, 30, 58, 86, 114, 142, 170]\r\n        ],\r\n        G15: (1 << 10) | (1 << 8) | (1 << 5) | (1 << 4) | (1 << 2) | (1 << 1) | (1 << 0),\r\n        G18: (1 << 12) | (1 << 11) | (1 << 10) | (1 << 9) | (1 << 8) | (1 << 5) | (1 << 2) | (1 << 0),\r\n        G15_MASK: (1 << 14) | (1 << 12) | (1 << 10) | (1 << 4) | (1 << 1),\r\n        /*\r\n        BCH编码格式信息\r\n         */\r\n        getBCHTypeInfo: function (data) {\r\n            var d = data << 10;\r\n            while (QRUtil.getBCHDigit(d) - QRUtil.getBCHDigit(QRUtil.G15) >= 0) {\r\n                d ^= (QRUtil.G15 << (QRUtil.getBCHDigit(d) - QRUtil.getBCHDigit(QRUtil.G15)));\r\n            }\r\n            return ((data << 10) | d) ^ QRUtil.G15_MASK;\r\n        },\r\n        /*\r\n        BCH编码版本信息\r\n         */\r\n        getBCHTypeNumber: function (data) {\r\n            var d = data << 12;\r\n            while (QRUtil.getBCHDigit(d) - QRUtil.getBCHDigit(QRUtil.G18) >= 0) {\r\n                d ^= (QRUtil.G18 << (QRUtil.getBCHDigit(d) - QRUtil.getBCHDigit(QRUtil.G18)));\r\n            }\r\n            return (data << 12) | d;\r\n        },\r\n        /*\r\n        获取BCH位信息\r\n         */\r\n        getBCHDigit: function (data) {\r\n            var digit = 0;\r\n            while (data != 0) {\r\n                digit++;\r\n                data >>>= 1;\r\n            }\r\n            return digit;\r\n        },\r\n        /*\r\n        获取版本对应的矫正图形位置\r\n         */\r\n        getPatternPosition: function (typeNumber) {\r\n            return QRUtil.PATTERN_POSITION_TABLE[typeNumber - 1];\r\n        },\r\n        /*\r\n        掩膜算法\r\n         */\r\n        getMask: function (maskPattern, i, j) {\r\n            switch (maskPattern) {\r\n                case QRMaskPattern.PATTERN000:\r\n                    return (i + j) % 2 == 0;\r\n                case QRMaskPattern.PATTERN001:\r\n                    return i % 2 == 0;\r\n                case QRMaskPattern.PATTERN010:\r\n                    return j % 3 == 0;\r\n                case QRMaskPattern.PATTERN011:\r\n                    return (i + j) % 3 == 0;\r\n                case QRMaskPattern.PATTERN100:\r\n                    return (Math.floor(i / 2) + Math.floor(j / 3)) % 2 == 0;\r\n                case QRMaskPattern.PATTERN101:\r\n                    return (i * j) % 2 + (i * j) % 3 == 0;\r\n                case QRMaskPattern.PATTERN110:\r\n                    return ((i * j) % 2 + (i * j) % 3) % 2 == 0;\r\n                case QRMaskPattern.PATTERN111:\r\n                    return ((i * j) % 3 + (i + j) % 2) % 2 == 0;\r\n                default:\r\n                    throw new Error(\"bad maskPattern:\" + maskPattern);\r\n            }\r\n        },\r\n        /*\r\n        获取RS的纠错多项式\r\n         */\r\n        getErrorCorrectPolynomial: function (errorCorrectLength) {\r\n            var a = new QRPolynomial([1], 0);\r\n            for (var i = 0; i < errorCorrectLength; i++) {\r\n                a = a.multiply(new QRPolynomial([1, QRMath.gexp(i)], 0));\r\n            }\r\n            return a;\r\n        },\r\n        /*\r\n        获取评价\r\n         */\r\n        getLostPoint: function (qrCode) {\r\n            var moduleCount = qrCode.getModuleCount(),\r\n                lostPoint = 0,\r\n                darkCount = 0;\r\n            for (var row = 0; row < moduleCount; row++) {\r\n                var sameCount = 0;\r\n                var head = qrCode.modules[row][0];\r\n                for (var col = 0; col < moduleCount; col++) {\r\n                    var current = qrCode.modules[row][col];\r\n                    //level 3 评价\r\n                    if (col < moduleCount - 6) {\r\n                        if (current && !qrCode.modules[row][col + 1] && qrCode.modules[row][col + 2] && qrCode.modules[row][col + 3] && qrCode.modules[row][col + 4] && !qrCode.modules[row][col + 5] && qrCode.modules[row][col + 6]) {\r\n                            if (col < moduleCount - 10) {\r\n                                if (qrCode.modules[row][col + 7] && qrCode.modules[row][col + 8] && qrCode.modules[row][col + 9] && qrCode.modules[row][col + 10]) {\r\n                                    lostPoint += 40;\r\n                                }\r\n                            } else if (col > 3) {\r\n                                if (qrCode.modules[row][col - 1] && qrCode.modules[row][col - 2] && qrCode.modules[row][col - 3] && qrCode.modules[row][col - 4]) {\r\n                                    lostPoint += 40;\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                    //level 2 评价\r\n                    if ((row < moduleCount - 1) && (col < moduleCount - 1)) {\r\n                        var count = 0;\r\n                        if (current) count++;\r\n                        if (qrCode.modules[row + 1][col]) count++;\r\n                        if (qrCode.modules[row][col + 1]) count++;\r\n                        if (qrCode.modules[row + 1][col + 1]) count++;\r\n                        if (count == 0 || count == 4) {\r\n                            lostPoint += 3;\r\n                        }\r\n                    }\r\n                    //level 1 评价\r\n                    if (head ^ current) {\r\n                        sameCount++;\r\n                    } else {\r\n                        head = current;\r\n                        if (sameCount >= 5) {\r\n                            lostPoint += (3 + sameCount - 5);\r\n                        }\r\n                        sameCount = 1;\r\n                    }\r\n                    //level 4 评价\r\n                    if (current) {\r\n                        darkCount++;\r\n                    }\r\n                }\r\n            }\r\n            for (var col = 0; col < moduleCount; col++) {\r\n                var sameCount = 0;\r\n                var head = qrCode.modules[0][col];\r\n                for (var row = 0; row < moduleCount; row++) {\r\n                    var current = qrCode.modules[row][col];\r\n                    //level 3 评价\r\n                    if (row < moduleCount - 6) {\r\n                        if (current && !qrCode.modules[row + 1][col] && qrCode.modules[row + 2][col] && qrCode.modules[row + 3][col] && qrCode.modules[row + 4][col] && !qrCode.modules[row + 5][col] && qrCode.modules[row + 6][col]) {\r\n                            if (row < moduleCount - 10) {\r\n                                if (qrCode.modules[row + 7][col] && qrCode.modules[row + 8][col] && qrCode.modules[row + 9][col] && qrCode.modules[row + 10][col]) {\r\n                                    lostPoint += 40;\r\n                                }\r\n                            } else if (row > 3) {\r\n                                if (qrCode.modules[row - 1][col] && qrCode.modules[row - 2][col] && qrCode.modules[row - 3][col] && qrCode.modules[row - 4][col]) {\r\n                                    lostPoint += 40;\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                    //level 1 评价\r\n                    if (head ^ current) {\r\n                        sameCount++;\r\n                    } else {\r\n                        head = current;\r\n                        if (sameCount >= 5) {\r\n                            lostPoint += (3 + sameCount - 5);\r\n                        }\r\n                        sameCount = 1;\r\n                    }\r\n                }\r\n            }\r\n            // LEVEL4\r\n            var ratio = Math.abs(100 * darkCount / moduleCount / moduleCount - 50) / 5;\r\n            lostPoint += ratio * 10;\r\n            return lostPoint;\r\n        }\r\n\r\n    };\r\n    //---------------------------------------------------------------------\r\n    // QRMath使用的数学工具\r\n    //---------------------------------------------------------------------\r\n    var QRMath = {\r\n        /*\r\n        将n转化为a^m\r\n         */\r\n        glog: function (n) {\r\n            if (n < 1) {\r\n                throw new Error(\"glog(\" + n + \")\");\r\n            }\r\n            return QRMath.LOG_TABLE[n];\r\n        },\r\n        /*\r\n        将a^m转化为n\r\n         */\r\n        gexp: function (n) {\r\n            while (n < 0) {\r\n                n += 255;\r\n            }\r\n            while (n >= 256) {\r\n                n -= 255;\r\n            }\r\n            return QRMath.EXP_TABLE[n];\r\n        },\r\n        EXP_TABLE: new Array(256),\r\n        LOG_TABLE: new Array(256)\r\n\r\n    };\r\n    for (var i = 0; i < 8; i++) {\r\n        QRMath.EXP_TABLE[i] = 1 << i;\r\n    }\r\n    for (var i = 8; i < 256; i++) {\r\n        QRMath.EXP_TABLE[i] = QRMath.EXP_TABLE[i - 4] ^ QRMath.EXP_TABLE[i - 5] ^ QRMath.EXP_TABLE[i - 6] ^ QRMath.EXP_TABLE[i - 8];\r\n    }\r\n    for (var i = 0; i < 255; i++) {\r\n        QRMath.LOG_TABLE[QRMath.EXP_TABLE[i]] = i;\r\n    }\r\n    //---------------------------------------------------------------------\r\n    // QRPolynomial 多项式\r\n    //---------------------------------------------------------------------\r\n    /**\r\n     * 多项式类\r\n     * @param {Array} num   系数\r\n     * @param {num} shift a^shift\r\n     */\r\n    function QRPolynomial(num, shift) {\r\n        if (num.length == undefined) {\r\n            throw new Error(num.length + \"/\" + shift);\r\n        }\r\n        var offset = 0;\r\n        while (offset < num.length && num[offset] == 0) {\r\n            offset++;\r\n        }\r\n        this.num = new Array(num.length - offset + shift);\r\n        for (var i = 0; i < num.length - offset; i++) {\r\n            this.num[i] = num[i + offset];\r\n        }\r\n    }\r\n    QRPolynomial.prototype = {\r\n        get: function (index) {\r\n            return this.num[index];\r\n        },\r\n        getLength: function () {\r\n            return this.num.length;\r\n        },\r\n        /**\r\n         * 多项式乘法\r\n         * @param  {QRPolynomial} e 被乘多项式\r\n         * @return {[type]}   [description]\r\n         */\r\n        multiply: function (e) {\r\n            var num = new Array(this.getLength() + e.getLength() - 1);\r\n            for (var i = 0; i < this.getLength(); i++) {\r\n                for (var j = 0; j < e.getLength(); j++) {\r\n                    num[i + j] ^= QRMath.gexp(QRMath.glog(this.get(i)) + QRMath.glog(e.get(j)));\r\n                }\r\n            }\r\n            return new QRPolynomial(num, 0);\r\n        },\r\n        /**\r\n         * 多项式模运算\r\n         * @param  {QRPolynomial} e 模多项式\r\n         * @return {}\r\n         */\r\n        mod: function (e) {\r\n            var tl = this.getLength(),\r\n                el = e.getLength();\r\n            if (tl - el < 0) {\r\n                return this;\r\n            }\r\n            var num = new Array(tl);\r\n            for (var i = 0; i < tl; i++) {\r\n                num[i] = this.get(i);\r\n            }\r\n            while (num.length >= el) {\r\n                var ratio = QRMath.glog(num[0]) - QRMath.glog(e.get(0));\r\n\r\n                for (var i = 0; i < e.getLength(); i++) {\r\n                    num[i] ^= QRMath.gexp(QRMath.glog(e.get(i)) + ratio);\r\n                }\r\n                while (num[0] == 0) {\r\n                    num.shift();\r\n                }\r\n            }\r\n            return new QRPolynomial(num, 0);\r\n        }\r\n    };\r\n\r\n    //---------------------------------------------------------------------\r\n    // RS_BLOCK_TABLE\r\n    //---------------------------------------------------------------------\r\n    /*\r\n    二维码各个版本信息[块数, 每块中的数据块数, 每块中的信息块数]\r\n     */\r\n    var RS_BLOCK_TABLE = [\r\n        // L\r\n        // M\r\n        // Q\r\n        // H\r\n        // 1\r\n        [1, 26, 19],\r\n        [1, 26, 16],\r\n        [1, 26, 13],\r\n        [1, 26, 9],\r\n\r\n        // 2\r\n        [1, 44, 34],\r\n        [1, 44, 28],\r\n        [1, 44, 22],\r\n        [1, 44, 16],\r\n\r\n        // 3\r\n        [1, 70, 55],\r\n        [1, 70, 44],\r\n        [2, 35, 17],\r\n        [2, 35, 13],\r\n\r\n        // 4\r\n        [1, 100, 80],\r\n        [2, 50, 32],\r\n        [2, 50, 24],\r\n        [4, 25, 9],\r\n\r\n        // 5\r\n        [1, 134, 108],\r\n        [2, 67, 43],\r\n        [2, 33, 15, 2, 34, 16],\r\n        [2, 33, 11, 2, 34, 12],\r\n\r\n        // 6\r\n        [2, 86, 68],\r\n        [4, 43, 27],\r\n        [4, 43, 19],\r\n        [4, 43, 15],\r\n\r\n        // 7\r\n        [2, 98, 78],\r\n        [4, 49, 31],\r\n        [2, 32, 14, 4, 33, 15],\r\n        [4, 39, 13, 1, 40, 14],\r\n\r\n        // 8\r\n        [2, 121, 97],\r\n        [2, 60, 38, 2, 61, 39],\r\n        [4, 40, 18, 2, 41, 19],\r\n        [4, 40, 14, 2, 41, 15],\r\n\r\n        // 9\r\n        [2, 146, 116],\r\n        [3, 58, 36, 2, 59, 37],\r\n        [4, 36, 16, 4, 37, 17],\r\n        [4, 36, 12, 4, 37, 13],\r\n\r\n        // 10\r\n        [2, 86, 68, 2, 87, 69],\r\n        [4, 69, 43, 1, 70, 44],\r\n        [6, 43, 19, 2, 44, 20],\r\n        [6, 43, 15, 2, 44, 16],\r\n\r\n        // 11\r\n        [4, 101, 81],\r\n        [1, 80, 50, 4, 81, 51],\r\n        [4, 50, 22, 4, 51, 23],\r\n        [3, 36, 12, 8, 37, 13],\r\n\r\n        // 12\r\n        [2, 116, 92, 2, 117, 93],\r\n        [6, 58, 36, 2, 59, 37],\r\n        [4, 46, 20, 6, 47, 21],\r\n        [7, 42, 14, 4, 43, 15],\r\n\r\n        // 13\r\n        [4, 133, 107],\r\n        [8, 59, 37, 1, 60, 38],\r\n        [8, 44, 20, 4, 45, 21],\r\n        [12, 33, 11, 4, 34, 12],\r\n\r\n        // 14\r\n        [3, 145, 115, 1, 146, 116],\r\n        [4, 64, 40, 5, 65, 41],\r\n        [11, 36, 16, 5, 37, 17],\r\n        [11, 36, 12, 5, 37, 13],\r\n\r\n        // 15\r\n        [5, 109, 87, 1, 110, 88],\r\n        [5, 65, 41, 5, 66, 42],\r\n        [5, 54, 24, 7, 55, 25],\r\n        [11, 36, 12],\r\n\r\n        // 16\r\n        [5, 122, 98, 1, 123, 99],\r\n        [7, 73, 45, 3, 74, 46],\r\n        [15, 43, 19, 2, 44, 20],\r\n        [3, 45, 15, 13, 46, 16],\r\n\r\n        // 17\r\n        [1, 135, 107, 5, 136, 108],\r\n        [10, 74, 46, 1, 75, 47],\r\n        [1, 50, 22, 15, 51, 23],\r\n        [2, 42, 14, 17, 43, 15],\r\n\r\n        // 18\r\n        [5, 150, 120, 1, 151, 121],\r\n        [9, 69, 43, 4, 70, 44],\r\n        [17, 50, 22, 1, 51, 23],\r\n        [2, 42, 14, 19, 43, 15],\r\n\r\n        // 19\r\n        [3, 141, 113, 4, 142, 114],\r\n        [3, 70, 44, 11, 71, 45],\r\n        [17, 47, 21, 4, 48, 22],\r\n        [9, 39, 13, 16, 40, 14],\r\n\r\n        // 20\r\n        [3, 135, 107, 5, 136, 108],\r\n        [3, 67, 41, 13, 68, 42],\r\n        [15, 54, 24, 5, 55, 25],\r\n        [15, 43, 15, 10, 44, 16],\r\n\r\n        // 21\r\n        [4, 144, 116, 4, 145, 117],\r\n        [17, 68, 42],\r\n        [17, 50, 22, 6, 51, 23],\r\n        [19, 46, 16, 6, 47, 17],\r\n\r\n        // 22\r\n        [2, 139, 111, 7, 140, 112],\r\n        [17, 74, 46],\r\n        [7, 54, 24, 16, 55, 25],\r\n        [34, 37, 13],\r\n\r\n        // 23\r\n        [4, 151, 121, 5, 152, 122],\r\n        [4, 75, 47, 14, 76, 48],\r\n        [11, 54, 24, 14, 55, 25],\r\n        [16, 45, 15, 14, 46, 16],\r\n\r\n        // 24\r\n        [6, 147, 117, 4, 148, 118],\r\n        [6, 73, 45, 14, 74, 46],\r\n        [11, 54, 24, 16, 55, 25],\r\n        [30, 46, 16, 2, 47, 17],\r\n\r\n        // 25\r\n        [8, 132, 106, 4, 133, 107],\r\n        [8, 75, 47, 13, 76, 48],\r\n        [7, 54, 24, 22, 55, 25],\r\n        [22, 45, 15, 13, 46, 16],\r\n\r\n        // 26\r\n        [10, 142, 114, 2, 143, 115],\r\n        [19, 74, 46, 4, 75, 47],\r\n        [28, 50, 22, 6, 51, 23],\r\n        [33, 46, 16, 4, 47, 17],\r\n\r\n        // 27\r\n        [8, 152, 122, 4, 153, 123],\r\n        [22, 73, 45, 3, 74, 46],\r\n        [8, 53, 23, 26, 54, 24],\r\n        [12, 45, 15, 28, 46, 16],\r\n\r\n        // 28\r\n        [3, 147, 117, 10, 148, 118],\r\n        [3, 73, 45, 23, 74, 46],\r\n        [4, 54, 24, 31, 55, 25],\r\n        [11, 45, 15, 31, 46, 16],\r\n\r\n        // 29\r\n        [7, 146, 116, 7, 147, 117],\r\n        [21, 73, 45, 7, 74, 46],\r\n        [1, 53, 23, 37, 54, 24],\r\n        [19, 45, 15, 26, 46, 16],\r\n\r\n        // 30\r\n        [5, 145, 115, 10, 146, 116],\r\n        [19, 75, 47, 10, 76, 48],\r\n        [15, 54, 24, 25, 55, 25],\r\n        [23, 45, 15, 25, 46, 16],\r\n\r\n        // 31\r\n        [13, 145, 115, 3, 146, 116],\r\n        [2, 74, 46, 29, 75, 47],\r\n        [42, 54, 24, 1, 55, 25],\r\n        [23, 45, 15, 28, 46, 16],\r\n\r\n        // 32\r\n        [17, 145, 115],\r\n        [10, 74, 46, 23, 75, 47],\r\n        [10, 54, 24, 35, 55, 25],\r\n        [19, 45, 15, 35, 46, 16],\r\n\r\n        // 33\r\n        [17, 145, 115, 1, 146, 116],\r\n        [14, 74, 46, 21, 75, 47],\r\n        [29, 54, 24, 19, 55, 25],\r\n        [11, 45, 15, 46, 46, 16],\r\n\r\n        // 34\r\n        [13, 145, 115, 6, 146, 116],\r\n        [14, 74, 46, 23, 75, 47],\r\n        [44, 54, 24, 7, 55, 25],\r\n        [59, 46, 16, 1, 47, 17],\r\n\r\n        // 35\r\n        [12, 151, 121, 7, 152, 122],\r\n        [12, 75, 47, 26, 76, 48],\r\n        [39, 54, 24, 14, 55, 25],\r\n        [22, 45, 15, 41, 46, 16],\r\n\r\n        // 36\r\n        [6, 151, 121, 14, 152, 122],\r\n        [6, 75, 47, 34, 76, 48],\r\n        [46, 54, 24, 10, 55, 25],\r\n        [2, 45, 15, 64, 46, 16],\r\n\r\n        // 37\r\n        [17, 152, 122, 4, 153, 123],\r\n        [29, 74, 46, 14, 75, 47],\r\n        [49, 54, 24, 10, 55, 25],\r\n        [24, 45, 15, 46, 46, 16],\r\n\r\n        // 38\r\n        [4, 152, 122, 18, 153, 123],\r\n        [13, 74, 46, 32, 75, 47],\r\n        [48, 54, 24, 14, 55, 25],\r\n        [42, 45, 15, 32, 46, 16],\r\n\r\n        // 39\r\n        [20, 147, 117, 4, 148, 118],\r\n        [40, 75, 47, 7, 76, 48],\r\n        [43, 54, 24, 22, 55, 25],\r\n        [10, 45, 15, 67, 46, 16],\r\n\r\n        // 40\r\n        [19, 148, 118, 6, 149, 119],\r\n        [18, 75, 47, 31, 76, 48],\r\n        [34, 54, 24, 34, 55, 25],\r\n        [20, 45, 15, 61, 46, 16]\r\n    ];\r\n\r\n    /**\r\n     * 根据数据获取对应版本\r\n     * @return {[type]} [description]\r\n     */\r\n    QRCodeAlg.prototype.getRightType = function () {\r\n        for (var typeNumber = 1; typeNumber < 41; typeNumber++) {\r\n            var rsBlock = RS_BLOCK_TABLE[(typeNumber - 1) * 4 + this.errorCorrectLevel];\r\n            if (rsBlock == undefined) {\r\n                throw new Error(\"bad rs block @ typeNumber:\" + typeNumber + \"/errorCorrectLevel:\" + this.errorCorrectLevel);\r\n            }\r\n            var length = rsBlock.length / 3;\r\n            var totalDataCount = 0;\r\n            for (var i = 0; i < length; i++) {\r\n                var count = rsBlock[i * 3 + 0];\r\n                var dataCount = rsBlock[i * 3 + 2];\r\n                totalDataCount += dataCount * count;\r\n            }\r\n            var lengthBytes = typeNumber > 9 ? 2 : 1;\r\n            if (this.utf8bytes.length + lengthBytes < totalDataCount || typeNumber == 40) {\r\n                this.typeNumber = typeNumber;\r\n                this.rsBlock = rsBlock;\r\n                this.totalDataCount = totalDataCount;\r\n                break;\r\n            }\r\n        }\r\n    };\r\n\r\n    //---------------------------------------------------------------------\r\n    // QRBitBuffer\r\n    //---------------------------------------------------------------------\r\n    function QRBitBuffer() {\r\n        this.buffer = new Array();\r\n        this.length = 0;\r\n    }\r\n    QRBitBuffer.prototype = {\r\n        get: function (index) {\r\n            var bufIndex = Math.floor(index / 8);\r\n            return ((this.buffer[bufIndex] >>> (7 - index % 8)) & 1);\r\n        },\r\n        put: function (num, length) {\r\n            for (var i = 0; i < length; i++) {\r\n                this.putBit(((num >>> (length - i - 1)) & 1));\r\n            }\r\n        },\r\n        putBit: function (bit) {\r\n            var bufIndex = Math.floor(this.length / 8);\r\n            if (this.buffer.length <= bufIndex) {\r\n                this.buffer.push(0);\r\n            }\r\n            if (bit) {\r\n                this.buffer[bufIndex] |= (0x80 >>> (this.length % 8));\r\n            }\r\n            this.length++;\r\n        }\r\n    };\r\n\r\n\r\n\r\n    // xzedit\r\n    let qrcodeAlgObjCache = [];\r\n    /**\r\n     * 二维码构造函数，主要用于绘制\r\n     * @param  {参数列表} opt 传递参数\r\n     * @return {}\r\n     */\r\n    QRCode = function (opt) {\r\n        //设置默认参数\r\n        this.options = {\r\n            text: '',\r\n            size: 256,\r\n            correctLevel: 3,\r\n            background: '#ffffff',\r\n            foreground: '#000000',\r\n            pdground: '#000000',\r\n            image: '',\r\n            imageSize: 30,\r\n            canvasId: opt.canvasId,\r\n            context: opt.context,\r\n            usingComponents: opt.usingComponents,\r\n            showLoading: opt.showLoading,\r\n            loadingText: opt.loadingText,\r\n        };\r\n        if (typeof opt === 'string') { // 只编码ASCII字符串\r\n            opt = {\r\n                text: opt\r\n            };\r\n        }\r\n        if (opt) {\r\n            for (var i in opt) {\r\n                this.options[i] = opt[i];\r\n            }\r\n        }\r\n        //使用QRCodeAlg创建二维码结构\r\n        var qrCodeAlg = null;\r\n        for (var i = 0, l = qrcodeAlgObjCache.length; i < l; i++) {\r\n            if (qrcodeAlgObjCache[i].text == this.options.text && qrcodeAlgObjCache[i].text.correctLevel == this.options.correctLevel) {\r\n                qrCodeAlg = qrcodeAlgObjCache[i].obj;\r\n                break;\r\n            }\r\n        }\r\n        if (i == l) {\r\n            qrCodeAlg = new QRCodeAlg(this.options.text, this.options.correctLevel);\r\n            qrcodeAlgObjCache.push({\r\n                text: this.options.text,\r\n                correctLevel: this.options.correctLevel,\r\n                obj: qrCodeAlg\r\n            });\r\n        }\r\n        /**\r\n         * 计算矩阵点的前景色\r\n         * @param {Obj} config\r\n         * @param {Number} config.row 点x坐标\r\n         * @param {Number} config.col 点y坐标\r\n         * @param {Number} config.count 矩阵大小\r\n         * @param {Number} config.options 组件的options\r\n         * @return {String}\r\n         */\r\n        let getForeGround = function (config) {\r\n            var options = config.options;\r\n            if (options.pdground && (\r\n                (config.row > 1 && config.row < 5 && config.col > 1 && config.col < 5) ||\r\n                (config.row > (config.count - 6) && config.row < (config.count - 2) && config.col > 1 && config.col < 5) ||\r\n                (config.row > 1 && config.row < 5 && config.col > (config.count - 6) && config.col < (config.count - 2))\r\n            )) {\r\n                return options.pdground;\r\n            }\r\n            return options.foreground;\r\n        }\r\n        // 创建canvas\r\n        let createCanvas = function (options) {\r\n            if (options.showLoading) {\r\n                uni.showLoading({\r\n                    title: options.loadingText,\r\n                    mask: true\r\n                });\r\n            }\r\n            var ctx = uni.createCanvasContext(options.canvasId, options.context);\r\n            var count = qrCodeAlg.getModuleCount();\r\n            var ratioSize = options.size;\r\n            var ratioImgSize = options.imageSize;\r\n            //计算每个点的长宽\r\n            var tileW = (ratioSize / count).toPrecision(4);\r\n            var tileH = (ratioSize / count).toPrecision(4);\r\n            //绘制\r\n            for (var row = 0; row < count; row++) {\r\n                for (var col = 0; col < count; col++) {\r\n                    var w = (Math.ceil((col + 1) * tileW) - Math.floor(col * tileW));\r\n                    var h = (Math.ceil((row + 1) * tileW) - Math.floor(row * tileW));\r\n                    var foreground = getForeGround({\r\n                        row: row,\r\n                        col: col,\r\n                        count: count,\r\n                        options: options\r\n                    });\r\n                    ctx.setFillStyle(qrCodeAlg.modules[row][col] ? foreground : options.background);\r\n                    ctx.fillRect(Math.round(col * tileW), Math.round(row * tileH), w, h);\r\n                }\r\n            }\r\n            if (options.image) {\r\n                var x = Number(((ratioSize - ratioImgSize) / 2).toFixed(2));\r\n                var y = Number(((ratioSize - ratioImgSize) / 2).toFixed(2));\r\n                drawRoundedRect(ctx, x, y, ratioImgSize, ratioImgSize, 2, 6, true, true)\r\n                ctx.drawImage(options.image, x, y, ratioImgSize, ratioImgSize);\r\n                // 画圆角矩形\r\n                function drawRoundedRect(ctxi, x, y, width, height, r, lineWidth, fill, stroke) {\r\n                    ctxi.setLineWidth(lineWidth);\r\n                    ctxi.setFillStyle(options.background);\r\n                    ctxi.setStrokeStyle(options.background);\r\n                    ctxi.beginPath(); // draw top and top right corner \r\n                    ctxi.moveTo(x + r, y);\r\n                    ctxi.arcTo(x + width, y, x + width, y + r, r); // draw right side and bottom right corner \r\n                    ctxi.arcTo(x + width, y + height, x + width - r, y + height, r); // draw bottom and bottom left corner \r\n                    ctxi.arcTo(x, y + height, x, y + height - r, r); // draw left and top left corner \r\n                    ctxi.arcTo(x, y, x + r, y, r);\r\n                    ctxi.closePath();\r\n                    if (fill) {\r\n                        ctxi.fill();\r\n                    }\r\n                    if (stroke) {\r\n                        ctxi.stroke();\r\n                    }\r\n                }\r\n            }\r\n            setTimeout(() => {\r\n                ctx.draw(true, () => {\r\n                    // 保存到临时区域\r\n                    setTimeout(() => {\r\n                        uni.canvasToTempFilePath({\r\n                            width: options.width,\r\n                            height: options.height,\r\n                            destWidth: options.width,\r\n                            destHeight: options.height,\r\n                            canvasId: options.canvasId,\r\n                            quality: Number(1),\r\n                            success: function (res) {\r\n                                if (options.cbResult) {\r\n                                    options.cbResult(res.tempFilePath)\r\n                                }\r\n                            },\r\n                            fail: function (res) {\r\n                                if (options.cbResult) {\r\n                                    options.cbResult(res)\r\n                                }\r\n                            },\r\n                            complete: function () {\r\n                                if (options.showLoading){\r\n                                    uni.hideLoading();\r\n                                }\r\n                            },\r\n                        }, options.context);\r\n                    }, options.text.length + 100);\r\n                });\r\n            }, options.usingComponents ? 0 : 150);\r\n        }\r\n        createCanvas(this.options);\r\n        // 空判定\r\n        let empty = function (v) {\r\n            let tp = typeof v,\r\n                rt = false;\r\n            if (tp == \"number\" && String(v) == \"\") {\r\n                rt = true\r\n            } else if (tp == \"undefined\") {\r\n                rt = true\r\n            } else if (tp == \"object\") {\r\n                if (JSON.stringify(v) == \"{}\" || JSON.stringify(v) == \"[]\" || v == null) rt = true\r\n            } else if (tp == \"string\") {\r\n                if (v == \"\" || v == \"undefined\" || v == \"null\" || v == \"{}\" || v == \"[]\") rt = true\r\n            } else if (tp == \"function\") {\r\n                rt = false\r\n            }\r\n            return rt\r\n        }\r\n    };\r\n    QRCode.prototype.clear = function (fn) {\r\n        var ctx = uni.createCanvasContext(this.options.canvasId, this.options.context)\r\n        ctx.clearRect(0, 0, this.options.size, this.options.size)\r\n        ctx.draw(false, () => {\r\n            if (fn) {\r\n                fn()\r\n            }\r\n        })\r\n    };\r\n})()\r\n\r\nexport default QRCode"]}