{"version":3,"sources":["../../../../../src/views/admin/src/utils/http.js"],"names":["http","axios","create","timeout","withCredentials","baseURL","headers","interceptors","request","use","config","storage","get","Promise","reject","error","response","data","code","router","push","name"],"mappings":";;;;;;AAAA;;;;AACA;;;;AACA;;;;;;AAEA,IAAMA,OAAOC,gBAAMC,MAAN,CAAa;AACtBC,aAAS,OAAO,KADM;AAEtBC,qBAAiB,IAFK;AAGtBC,aAAS,cAHa;AAItBC,aAAS;AACL,wBAAgB;AADX;AAJa,CAAb,CAAb;AAQA;AACAN,KAAKO,YAAL,CAAkBC,OAAlB,CAA0BC,GAA1B,CAA8B,kBAAU;AACpCC,WAAOJ,OAAP,CAAe,OAAf,IAA0BK,kBAAQC,GAAR,CAAY,OAAZ,CAA1B,CADoC,CACW;AAC/C,WAAOF,MAAP;AACH,CAHD,EAGG,iBAAS;AACR,WAAOG,QAAQC,MAAR,CAAeC,KAAf,CAAP;AACH,CALD;AAMA;AACAf,KAAKO,YAAL,CAAkBS,QAAlB,CAA2BP,GAA3B,CAA+B,oBAAY;AACvC,QAAIO,SAASC,IAAT,IAAiBD,SAASC,IAAT,CAAcC,IAAd,KAAuB,GAA5C,EAAiD;AAAE;AAC/CC,+BAAOC,IAAP,CAAY,EAAEC,MAAM,OAAR,EAAZ;AACH;AACD,WAAOL,QAAP;AACH,CALD,EAKG,iBAAS;AACR,WAAOH,QAAQC,MAAR,CAAeC,KAAf,CAAP;AACH,CAPD;kBAQef,I","file":"http.js","sourcesContent":["import axios from 'axios'\r\nimport router from '@/router/router-static'\r\nimport storage from '@/utils/storage'\r\n\r\nconst http = axios.create({\r\n    timeout: 1000 * 86400,\r\n    withCredentials: true,\r\n    baseURL: '/nodejs22unh',\r\n    headers: {\r\n        'Content-Type': 'application/json; charset=utf-8'\r\n    }\r\n})\r\n// 请求拦截\r\nhttp.interceptors.request.use(config => {\r\n    config.headers['Token'] = storage.get('Token') // 请求头带上token\r\n    return config\r\n}, error => {\r\n    return Promise.reject(error)\r\n})\r\n// 响应拦截\r\nhttp.interceptors.response.use(response => {\r\n    if (response.data && response.data.code === 401) { // 401, token失效\r\n        router.push({ name: 'login' })\r\n    }\r\n    return response\r\n}, error => {\r\n    return Promise.reject(error)\r\n})\r\nexport default http"]}